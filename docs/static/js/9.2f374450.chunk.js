(this["webpackJsonptext-roleplay"]=this["webpackJsonptext-roleplay"]||[]).push([[9,29,42,51],{158:function(a,e,t){"use strict";t.r(e);var s=t(25),n=t(3),c=t(71),r=t(73),l=t(72),i=t(0),m=t.n(i),o=t(27),u=t(36),h=t(102),d=t(446),p=t(493),b=t(69),g=t(150),v=t(444),f=t(68),E=t(481),C=t(34),N=(t(470),t(42)),O=t(23),y=t(4),k=t(263),j=function(a){Object(r.a)(t,a);var e=Object(l.a)(t);function t(){var a;Object(c.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=e.call.apply(e,[this].concat(l))).state={character:N.initialCharacter},a.componentDidMount=function(){var e=a.props,t=e.character,s=e.uid,n=e.user;t?a.setState({character:t}):y.default.getCharacter({uid:s}),n||y.default.getUser({uid:s})},a.componentDidUpdate=function(e){e.character!==a.props.character&&a.state.character!==a.props.character&&a.setState({character:a.props.character})},a.onLimbClick=function(e,t){a.setState({character:Object(n.a)(Object(n.a)({},a.state.character),{},{limbs:Object(n.a)(Object(n.a)({},a.state.character.limbs),{},Object(s.a)({},e,"crippled"===t?"fine":"crippled"))})})},a.getStatus=function(e){var t=a.props.hasRight;return m.a.createElement(k.default,{limbs:e,onClick:t?a.onLimbClick:void 0,hasRight:t})},a.onSave=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=a.props,s=t.uid,n=t.character,c=a.state.character;if(n){var r=Object(O.getCharacterChanges)(N.initialCharacter,c);0!==r.length&&0!==(r=Object(O.getCharacterChanges)(n||N.initialCharacter,c)).length?c.stats.skillPoints<0?e||h.a.error("\u041e\u0447\u043a\u0438 \u041d\u0430\u0432\u044b\u043a\u043e\u0432 (\u041e\u041d) \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438!"):(h.a.success("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d"),y.default.setCharacter({uid:s,character:c}),y.default.sendMessage({uid:s,message:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b",data:{characterChanges:r}})):e||h.a.error("\u0412 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0435 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c")}else e||h.a.error("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436 \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!")},a.componentWillUnmount=function(){return a.onSave(!0)},a.onChange=function(e){return function(t){if(t){var s="number"===typeof t?t:t.currentTarget.value,c=Object(O.set)(a.state.character,e,s),r=Object(O.processCharacterChanges)({},c);a.setState({character:Object(n.a)(Object(n.a)({},a.state.character),r)})}}},a.getMainStats=function(e){var t=a.props.hasRight,s=e.stats;return m.a.createElement(d.a,{className:"status-main-stats"},m.a.createElement("div",{className:"status-main-stats-health"},m.a.createElement("div",{className:"status-main-stats-hp"},m.a.createElement("span",{className:"status-main-stats-hp-label"},"\u041e\u0447\u043a\u0438 \u0417\u0434\u043e\u0440\u043e\u0432\u044c\u044f (\u041e\u0417)"),m.a.createElement("div",{className:"status-main-stats-hp-body"},m.a.createElement(p.a,{max:s.maxHealthPoints||void 0,min:-Math.floor(s.maxHealthPoints/2),disabled:!t,value:s.healthPoints,onChange:a.onChange("stats.healthPoints")}),"/",m.a.createElement(b.a,{value:s.maxHealthPoints,readOnly:!0,disabled:!t}))),m.a.createElement("div",{className:"status-main-stats-ap-wrapper"},m.a.createElement("div",{className:"status-main-stats-ap"},m.a.createElement(g.a,{title:"\u041a\u043b\u0430\u0441\u0441 \u0411\u0440\u043e\u043d\u0438 (\u041a\u0411)"},m.a.createElement("div",{className:"status-main-stats-ap-total"},"\u041a\u0411")),m.a.createElement("div",{className:"status-main-stats-ap-change"},"+/-"),m.a.createElement("div",{className:"status-main-stats-ap-base"},"Base")),m.a.createElement("div",{className:"status-main-stats-ap"},m.a.createElement(b.a,{className:"status-main-stats-ap-total",readOnly:!0,disabled:!t,value:s.armorClass.total}),m.a.createElement(p.a,{className:"status-main-stats-ap-change",min:1,max:95,disabled:!t,value:s.armorClass.change,onChange:a.onChange("stats.armorClass.change")}),m.a.createElement(b.a,{className:"status-main-stats-ap-base",readOnly:!0,disabled:!t,value:s.armorClass.base})))),m.a.createElement("div",{className:"status-main-stats-info"},N.subStats.slice(3).map((function(e){var n=e.label,c=e.full,r=e.field;return m.a.createElement(g.a,{key:r,title:c},m.a.createElement("div",{className:"status-main-stats-item"},m.a.createElement("span",{className:"status-main-stats-item-label"},n),m.a.createElement(b.a,{className:"status-main-stats-item-input",readOnly:!0,disabled:!t,value:s[r],onChange:a.onChange(["stats",r])})))}))))},a.render=function(){var e=a.props,t=e.user,s=e.currentUser,n=e.history,c=e.character,r=a.state.character;return t&&t.uid&&s&&s.uid===t.uid&&"/status"===n.location.pathname?m.a.createElement(o.a,{from:"/status",to:"/".concat(s.uid,"/status"),exact:!0}):t&&c?m.a.createElement(d.a,{className:"status",title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 ".concat(t.nickname),extra:m.a.createElement(E.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",okText:"\u0414\u0430",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onConfirm:function(){return a.onSave()}},m.a.createElement(C.a,null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},a.getStatus(r.limbs),a.getMainStats(r)):m.a.createElement(v.a,{spinning:!0},m.a.createElement(f.a,{description:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d"}))},a}return t}(i.Component);e.default=Object(o.g)(Object(u.b)(O.getStateUser)(j))},263:function(a,e,t){"use strict";t.r(e);var s=t(0),n=t.n(s);t(465);e.default=function(a){var e=a.limbs,t=a.onClick,s=a.hasRight,c=Object.values(a.limbs).reduce((function(a,e){return a+(function(a){return"crippled"===a}(e)?1:0)}),0),r=function(a){var s=e[a];return n.a.createElement("div",{key:a+s,className:"limb ".concat(s," ").concat(a),style:{backgroundImage:"url(./assets/".concat(s,"-").concat(a,".png)")},onClick:function(){return t&&t(a,s)}})};return n.a.createElement("div",{className:"body-status ".concat(s?"":"disabled")},n.a.createElement("div",null,n.a.createElement("div",{key:"head"+e.head,className:"limb ".concat(e.head," head"),style:{backgroundImage:"url(./assets/".concat(e.head,"-head.png)")},onClick:function(){return t&&t("head",e.head)}},n.a.createElement("div",{key:"face",className:"limb face",style:{backgroundImage:"url(./assets/face_0".concat(Math.min(4,c),".png)")}}))),n.a.createElement("div",null,r("handL"),r("torso"),r("handR")),n.a.createElement("div",null,r("legL"),r("legR")))}},465:function(a,e,t){},470:function(a,e,t){}}]);
//# sourceMappingURL=9.2f374450.chunk.js.map