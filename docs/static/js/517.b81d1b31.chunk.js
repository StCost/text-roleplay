"use strict";(self.webpackChunktext_roleplay=self.webpackChunktext_roleplay||[]).push([[517,484,14,954,554,24,895],{1484:function(e,t,n){n.r(t),n.d(t,{AmountModal:function(){return u}});var r=n(1413),a=n(885),o=n(2791),i=n(2493),c=n(171),l=n(3924),u=function(e){var t=e.item,n=e.inputProps,r=e.onChange,l=e.max,u=(0,o.useState)(1),s=(0,a.Z)(u,2),m=s[0],d=s[1],f=function(e){"number"===typeof e&&(d(e||1),r&&r(e||1))};return o.createElement(o.Fragment,null,o.createElement(i.Z,Object.assign({defaultValue:1,value:m,min:1,max:l||t.amount,onChange:f},n||{})),o.createElement(c.Z,{value:m,defaultValue:1,min:1,max:l||t.amount,onChange:f,dots:(l||t.amount||10)<=12}))};t.default=function(e){var t=e.item,n=e.onSubmit,a=e.modalProps,i=e.max,c=i&&i>=2||!i&&t.amount&&t.amount>=2,s=c?"\u0421\u043a\u043e\u043b\u044c\u043a\u043e? (\u043c\u0430\u043a\u0441. ".concat(i||t.amount,"\u0448\u0442)"):"\u0423\u0432\u0435\u0440\u0435\u043d\u044b?",m=1;l.Z.confirm((0,r.Z)({title:s,className:"amount-modal",content:c&&o.createElement(u,Object.assign({},e,{onChange:function(e){"number"===typeof e&&(m=e)}})),onOk:function(e){n&&n(m),e()},okText:"\u0413\u043e\u0442\u043e\u0432\u043e",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",maskClosable:!0,centered:!0},a||{}))}},6081:function(e,t,n){n.r(t);var r=n(1413),a=n(5987),o=n(2791),i=n(426),c=n(3824),l=["avatar","nickname","style"];t.default=function(e){var t=e.avatar,n=e.nickname,u=e.style,s=(0,a.Z)(e,l),m=(0,c.isURL)(t)?t:"";return(0,c.isURL)(t),o.createElement(i.Z,Object.assign({src:m,style:(0,r.Z)((0,r.Z)({},u),{},{backgroundColor:m?"transparent":(0,c.colorFromString)(n)})},s),n&&n)}},9395:function(e,t,n){n.r(t);var r=n(3144),a=n(5671),o=n(136),i=n(4062),c=n(2791),l=n(4964),u=n(3347),s=n(2622),m=(n(1554),n(6081)),d=n(2404),f=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getStats=function(){var t=e.props.item,n=t.type,r=t.armor,a=t.capacity;switch(n){case"wearable":return r;case"weapon":return a;default:var o=e.props.amount||e.props.item.amount;return!!(o&&o>=2)&&"".concat(o,"\u0448\u0442")}},e.labels={wearable:"\u0417\u0430\u0449\u0438\u0442\u0430",weapon:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"},e.getFooter=function(){var t=e.props,n=t.footer,r=t.uid,a=e.props.item,o=a.failed,i=a.id;return o?c.createElement("div",{className:"item-footer"},c.createElement(l.Z,{disabled:!r,onClick:function(){return d.default.removeItem({uid:r,id:i,all:!0})}},c.createElement(s.Z,null))):!!n&&c.createElement("div",{className:"item-footer"},n)},e.render=function(){var t=e.props,n=t.disabled,r=t.item,a=r.name,o=void 0===a?r.id:a,i=r.price,l=void 0===i?0:i,s=r.description,d=r.image,f=r.effect,p=r.weight,v=void 0===p?0:p,g=r.type,h=r.approved,Z=e.getStats();return c.createElement(u.Z,{className:"item ".concat(h&&!n?"":"disabled")},c.createElement("div",{className:"item-info"},c.createElement("div",{className:"item-name"},o),c.createElement("div",{className:"item-subinfo"},c.createElement("div",{className:"item-price"},l>0&&"\u0426\u0435\u043d\u0430: ".concat(l)),c.createElement("div",{className:"item-weight"},v>0&&"\u0412\u0435\u0441: ".concat(v,"lb")))),(d||s)&&c.createElement("div",{className:"item-body"},d&&c.createElement("div",{className:"item-image"},c.createElement(m.default,{avatar:d,nickname:o,shape:"square"})),s),(Z||f)&&c.createElement("div",{className:"item-prefooter"},c.createElement("div",{className:"item-ammo"},Z?"".concat(e.labels[g]||"\u041a\u043e\u043b-\u0432\u043e",": ").concat(Z):""),c.createElement("div",{className:"item-effect"},f)),e.getFooter())},e}return(0,r.Z)(n)}(c.Component);t.default=f},1874:function(e,t,n){n.r(t);var r=n(2791),a=n(4469),o=n(2426),i=n.n(o),c=(n(4895),n(6081)),l=n(3824);t.default=function(e){var t=e.user,n=e.displayOnline,o=e.onClick;return r.createElement("div",{className:"user-info"},r.createElement(a.Z,{title:t&&t.lastOnline?"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c: ".concat(i()(t.lastOnline).fromNow()):void 0,placement:"left"},r.createElement("div",{className:"user-info-title ".concat((0,l.getUserStatus)(t)," ").concat(o&&t?"interactive":""),onClick:function(){return o&&t&&o(t)}},r.createElement(c.default,{avatar:t?t.avatar:"",size:26,nickname:t&&(t.nickname||t.uid)||""}),r.createElement("div",{className:"user-info-nickname"},t&&(t.nickname||t.uid)||"[Loading...]"))),n&&r.createElement("span",null,!(!t||!t.lastOnline)&&"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c: ".concat(i()(t.lastOnline).fromNow())))}},5966:function(e,t,n){n.r(t);var r=n(3144),a=n(5671),o=n(136),i=n(4062),c=n(2791),l=n(8327),u=n(4233),s=(n(5954),n(2404)),m=n(1874),d=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).componentDidMount=function(){s.default.getAllUsers({})},e.render=function(){var t=e.props,n=t.users,r=t.onClick,a=t.displayOnline;return c.createElement(l.Z,{className:"active-users",selectedKeys:[]},Object.values(n).sort((function(e,t){return e.nickname&&e.nickname<t.nickname?1:-1})).sort((function(e){return e.approved?-1:1})).map((function(e){return c.createElement(l.Z.Item,{className:"active-users__item",key:e.uid,onClick:function(){return r&&r(e)}},c.createElement(m.default,{user:e,displayOnline:a}))})))},e}return(0,r.Z)(n)}(c.Component);t.default=(0,u.$j)((function(e){var t=e.uid,n=e.loading;return{users:e.users,uid:t,loading:n}}))(d)},517:function(e,t,n){n.r(t);var r=n(1413),a=n(3144),o=n(5671),i=n(136),c=n(4062),l=n(2791),u=n(9271),s=n(4233),m=n(2756),d=n(8321),f=n(4964),p=n(3924),v=n(2033),g=n(8222),h=(n(2024),n(2404)),Z=n(1014),E=n(5966),y=n(9997),k=n(1484),b=n(3824),C=function(e){(0,i.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state=(0,r.Z)((0,r.Z)({},e.defaultState),{},{editingItem:null,passItem:null},JSON.parse(localStorage.getItem("inventory-state")||"{}")),e.componentDidMount=function(){var t=e.props,n=t.character,r=t.uid,a=t.user,o=t.currentUser,i=t.history;!n&&r&&h.default.getCharacter({uid:r}),(0,b.redirectToUserPage)(a,o,i)},e.componentDidUpdate=function(t,n){var r=e.props,a=r.user,o=r.currentUser,i=r.history;n!==e.state&&localStorage.setItem("inventory-state",JSON.stringify(e.state)),(0,b.redirectToUserPage)(a,o,i)},e.getPageControls=function(){return[l.createElement(m.Z,{key:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430",onChange:function(t){return e.setState({searchString:t.currentTarget.value})},allowClear:!0}),l.createElement(d.Z,{key:"filters",overlay:e.getFilters(e.state),trigger:["click"]},l.createElement(f.Z,null,l.createElement(v.Z,null))),e.getPassModal()]},e.getInventoryItems=function(t){var n=e.props,a=n.inventory,o=n.loading;if(a&&!o){var i=Object.values(a),c=[],l=[];return i.forEach((function(e){var n=e.id,a=t.find((function(e){return e.id===n}));a?c.push((0,r.Z)((0,r.Z)({},a),e)):l.push(n)})),l.length>0&&h.default.getItemById({id:l.shift()}),c}return[]},e.passItem=function(t){return e.setState({passItem:t||null})},e.getPassModal=function(){var t=e.state.passItem;return l.createElement(p.Z,{key:"pass-modal",visible:!!t,footer:l.createElement(f.Z,{onClick:function(){return e.passItem(null)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),onCancel:function(){return e.passItem(null)}},l.createElement(E.default,{onClick:function(n){null!==t&&(h.default.passItem({uid:e.props.uid,id:t.id,to:n,item:t}),e.passItem(null))}}))},e.cardControls=[{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c",onClick:function(t){return(0,k.default)({item:t,onSubmit:function(n){return h.default.passItem({id:t.id,uid:e.props.uid,demonstrate:!0,item:(0,r.Z)((0,r.Z)({},t),{},{amount:n})})}})}},{label:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c",onClick:function(t){return p.Z.confirm({title:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ".concat((0,b.getItemName)(t,!1),"?"),onOk:function(n){h.default.passItem({id:t.id,uid:e.props.uid,item:(0,r.Z)((0,r.Z)({},t),{},{amount:1}),use:!0}),n()},okText:"\u0414\u0430",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430"})},condition:function(e){return"usable"===e.type||"weapon"===e.type}},{label:"\u0412\u044b\u0431\u0440\u043e\u0441\u0438\u0442\u044c",onClick:function(t){return(0,k.default)({item:t,onSubmit:function(n){return h.default.passItem({id:t.id,uid:e.props.uid,item:(0,r.Z)((0,r.Z)({},t),{},{amount:n})})}})}},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0442\u044c",onClick:function(t){return(0,k.default)({item:t,onSubmit:function(n){return e.passItem((0,r.Z)((0,r.Z)({},t),{},{amount:n}))}})}},{label:"\u0412 \u043a\u043e\u043d\u0441\u043e\u043b\u044c",onClick:console.log,condition:function(){return Boolean(e.props.currentUser&&e.props.currentUser.isAdmin)}},{label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:function(t){return(0,k.default)({item:t,onSubmit:function(n){return h.default.removeItem({id:t.id,uid:e.props.uid,amount:n})}})},condition:function(){return Boolean(e.props.currentUser&&e.props.currentUser.isAdmin)}}],e.getTitle=function(){return!!e.props.user&&l.createElement(l.Fragment,null,l.createElement(g.Z,null)," ","\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c \u0438\u0433\u0440\u043e\u043a\u0430 ",e.props.user.nickname||e.props.user.uid)},e.getContent=function(t){var n=e.props,r=n.currentUser,a=n.uid,o=n.hasRight;return l.createElement(Z.default,{uid:a,currentUser:r,items:e.getInventoryItems(t),controls:o?e.cardControls:void 0})},e}return(0,a.Z)(n)}(y.default);t.default=(0,u.EN)((0,s.$j)((function(e,t){var n=e.users,a=e.items,o=e.messages,i=(0,b.getStateUser)(e,t),c=i.character,l=c?c.inventory:{};return(0,r.Z)({items:a,inventory:l,users:n,messages:o},i)}))(C))},1014:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var r=n(3144),a=n(5671),o=n(136),i=n(4062),c=n(2791),l=n(8327),u=n(4964),s=n(8321),m=n(9421),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M904 768H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8zm-25.3-608H145.3c-18.4 0-33.3 14.3-33.3 32v464c0 17.7 14.9 32 33.3 32h733.3c18.4 0 33.3-14.3 33.3-32V192c.1-17.7-14.8-32-33.2-32zM360 616H184V456h176v160zm0-224H184V232h176v160zm240 224H424V456h176v160zm0-224H424V232h176v160zm240 224H664V456h176v160zm0-224H664V232h176v160z"}}]},name:"insert-row-below",theme:"outlined"},f=n(4291),p=function(e,t){return c.createElement(f.Z,Object.assign({},e,{ref:t,icon:d}))};p.displayName="InsertRowBelowOutlined";var v=c.forwardRef(p),g=n(9395),h=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getFooter=function(t){var n=e.props.controls;if(n){var r=n.map((function(e){var n=e.label,r=e.onClick,a=(e.isAdmin,e.condition);return!(a&&!a(t))&&c.createElement(l.Z.Item,{key:n},c.createElement(u.Z,{onClick:function(){return r&&r(t)}},n))})).filter(Boolean);if(0!==r.length)return c.createElement(s.Z,{overlay:c.createElement(l.Z,null,r),trigger:["click"]},c.createElement(u.Z,null,c.createElement(v,null)))}},e.render=function(){var t=e.props,n=t.items,r=t.uid;return n&&0!==n.length?c.createElement("div",{className:"items-body"},n.map((function(t){return c.createElement(g.default,{key:t.id+t.time,item:t,footer:e.getFooter(t),uid:r})}))):c.createElement(m.Z,{description:"\u041d\u0435\u0442 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432"})},e}return(0,r.Z)(n)}(c.Component),Z=h},9997:function(e,t,n){n.r(t);var r=n(4942),a=n(1413),o=n(5671),i=n(3144),c=n(136),l=n(4062),u=n(2791),s=n(1099),m=n(7501),d=n(3347),f=function(e){(0,c.Z)(n,e);var t=(0,l.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).defaultState={searchString:"",showApproved:!0,showNotApproved:!1,filters:{weapon:!0,usable:!0,wearable:!0,junk:!0,ammo:!0,note:!0,key:!0,misc:!0}},e.getFilters=function(t){var n=t.showNotApproved,o=t.showApproved,i=t.filters,c=function(t,n){return u.createElement("div",{tabIndex:0,className:"items-approved-button",onClick:function(){return e.setState({filters:(0,a.Z)((0,a.Z)({},i),{},(0,r.Z)({},t,!i[t]))})}},u.createElement(s.Z,{checked:i[t]}),n)};return u.createElement(m.ZP.Group,{defaultValue:void 0,style:{display:"flex",flexDirection:"column"}},c("weapon","\u041e\u0440\u0443\u0436\u0438\u0435"),c("usable","\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0435"),c("wearable","\u041e\u0434\u0435\u0436\u0434\u0430/\u0411\u0440\u043e\u043d\u044f"),c("ammo","\u041f\u0430\u0442\u0440\u043e\u043d\u044b"),c("junk","\u041c\u0443\u0441\u043e\u0440"),c("note","\u0417\u0430\u043f\u0438\u0441\u043a\u0438"),c("key","\u041a\u043b\u044e\u0447\u0438"),c("misc","\u041f\u0440\u043e\u0447\u0435\u0435"),u.createElement("div",{tabIndex:0,className:"items-approved-button",onClick:function(){return e.setState({showApproved:!o})}},u.createElement(s.Z,{checked:o}),"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435"),u.createElement("div",{tabIndex:0,className:"items-approved-button",onClick:function(){return e.setState({showNotApproved:!n})}},u.createElement(s.Z,{checked:n}),"\u041d\u0435 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435"))},e.getPageControls=function(){return[]},e.getHeader=function(){return u.createElement("div",{className:"items-controls"},e.getPageControls())},e.getContent=function(){return u.createElement(u.Fragment,null)},e.getFooter=function(){return u.createElement(u.Fragment,null)},e.getTitle=function(){},e.render=function(){var t=e.items;return u.createElement(d.Z,{className:"items",title:e.getTitle()},e.getHeader(t),e.getContent(t),e.getFooter(t))},e}return(0,i.Z)(n,[{key:"items",get:function(){var e=this.state,t=e.searchString,n=e.filters,r=e.showApproved,a=e.showNotApproved,o=t.toLowerCase();return this.props.items.filter((function(e){var t=e.name,i=e.description,c=e.effect,l=e.type,u=e.approved;return(t&&t.toLowerCase().indexOf(o)>-1||i&&i.toLowerCase().indexOf(o)>-1||c&&c.toLowerCase().indexOf(o)>-1)&&n[l]&&(r&&!0===u||a&&!1===u)}))}}]),n}(u.Component);t.default=f},2033:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(2791),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"},o=n(4291),i=function(e,t){return r.createElement(o.Z,Object.assign({},e,{ref:t,icon:a}))};i.displayName="FilterOutlined";var c=r.forwardRef(i)},5954:function(e,t,n){n.r(t),t.default={}},1554:function(e,t,n){n.r(t),t.default={}},2024:function(e,t,n){n.r(t),t.default={}},4895:function(e,t,n){n.r(t),t.default={}}}]);
//# sourceMappingURL=517.b81d1b31.chunk.js.map