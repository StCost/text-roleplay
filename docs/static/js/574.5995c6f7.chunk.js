"use strict";(self.webpackChunktext_roleplay=self.webpackChunktext_roleplay||[]).push([[574,690,872,498,460,554,462,895],{6081:function(e,t,a){a.r(t);var n=a(1413),r=a(5987),s=a(2791),c=a(426),l=a(3824),i=["avatar","nickname","style"];t.default=function(e){var t=e.avatar,a=e.nickname,o=e.style,u=(0,r.Z)(e,i),m=(0,l.isURL)(t)?t:"";return(0,l.isURL)(t),s.createElement(c.Z,Object.assign({src:m,style:(0,n.Z)((0,n.Z)({},o),{},{backgroundColor:m?"transparent":(0,l.colorFromString)(a)})},u),a&&a)}},9395:function(e,t,a){a.r(t);var n=a(3144),r=a(5671),s=a(136),c=a(4062),l=a(2791),i=a(4964),o=a(3347),u=a(2622),m=(a(1554),a(6081)),d=a(2404),f=function(e){(0,s.Z)(a,e);var t=(0,c.Z)(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).getStats=function(){var t=e.props.item,a=t.type,n=t.armor,r=t.capacity;switch(a){case"wearable":return n;case"weapon":return r;default:var s=e.props.amount||e.props.item.amount;return!!(s&&s>=2)&&"".concat(s,"\u0448\u0442")}},e.labels={wearable:"\u0417\u0430\u0449\u0438\u0442\u0430",weapon:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"},e.getHeaderButton=function(){var t=e.props,a=t.footer,n=t.uid,r=e.props.item,s=r.failed,c=r.id;return s?l.createElement("div",{className:"item-header-button"},l.createElement(i.Z,{disabled:!n,onClick:function(){return d.default.removeItem({uid:n,id:c,all:!0})}},l.createElement(u.Z,null))):!!a&&l.createElement("div",{className:"item-header-button"},a)},e.render=function(){var t=e.props,a=t.disabled,n=t.item,r=n.name,s=void 0===r?n.id:r,c=n.price,i=void 0===c?0:c,u=n.description,d=n.image,f=n.effect,g=n.weight,v=void 0===g?0:g,p=n.type,h=n.approved,E=e.getStats();return l.createElement(o.Z,{className:"item ".concat(h&&!a?"":"disabled")},l.createElement("div",{className:"item-info"},l.createElement("div",{className:"item-name"},s,e.getHeaderButton()),l.createElement("div",{className:"item-subinfo"},l.createElement("div",{className:"item-price"},i>0&&"\u0426\u0435\u043d\u0430: ".concat(i)),l.createElement("div",{className:"item-weight"},v>0&&"\u0412\u0435\u0441: ".concat(v,"lb")))),(d||u)&&l.createElement("div",{className:"item-body"},d&&l.createElement("div",{className:"item-image"},l.createElement(m.default,{avatar:d,nickname:s,shape:"square"})),u),(E||f)&&l.createElement("div",{className:"item-prefooter"},l.createElement("div",{className:"item-ammo"},E?"".concat(e.labels[p]||"\u041a\u043e\u043b-\u0432\u043e",": ").concat(E):""),l.createElement("div",{className:"item-effect"},f)))},e}return(0,n.Z)(a)}(l.Component);t.default=f},8920:function(e,t,a){a.r(t);var n=a(5987),r=a(2791),s=a(4233),c=a(9395),l=a(2404),i=["id","item"];t.default=(0,s.$j)((function(e,t){return{item:e.items.find((function(e){return e.id===t.id}))}}))((function(e){var t=e.id,a=e.item,s=(0,n.Z)(e,i);return a?r.createElement(c.default,Object.assign({item:a},s)):(l.default.getItemById({id:t}),r.createElement(r.Fragment,null))}))},3690:function(e,t,a){a.r(t);var n=a(2791),r=a(4233);t.default=(0,r.$j)((function(e){return{users:e.users,currentUser:e.currentUser}}))((function(e){var t=e.users,a=e.currentUser,r=Object.values(t).map((function(e){var t=e.isTyping,n=e.nickname,r=e.uid;return t&&r!==(null===a||void 0===a?void 0:a.uid)&&(n||r)})).filter(Boolean);if(0===r.length)return n.createElement(n.Fragment,null);var s=" \u043f\u0438\u0448".concat(1===r.length?"\u0435\u0442":"\u0443\u0442","...");return n.createElement("div",{className:"chat-body__typing-users"},r.join(", "),s)}))},1874:function(e,t,a){a.r(t);var n=a(2791),r=a(4469),s=a(2426),c=a.n(s),l=(a(4895),a(6081)),i=a(3824);t.default=function(e){var t=e.user,a=e.displayOnline,s=e.onClick;return n.createElement("div",{className:"user-info"},n.createElement(r.Z,{title:t&&t.lastOnline?"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c: ".concat(c()(t.lastOnline).fromNow()):void 0,placement:"left"},n.createElement("div",{className:"user-info-title ".concat((0,i.getUserStatus)(t)," ").concat(s&&t?"interactive":""),onClick:function(){return s&&t&&s(t)}},n.createElement(l.default,{avatar:t?t.avatar:"",size:26,nickname:t&&(t.nickname||t.uid)||""}),n.createElement("div",{className:"user-info-nickname"},t&&(t.nickname||t.uid)||"[Loading...]"))),a&&n.createElement("span",null,!(!t||!t.lastOnline)&&"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c: ".concat(c()(t.lastOnline).fromNow())))}},6872:function(e,t,a){a.r(t);var n=a(2791),r=a(3347),s=a(2426),c=a.n(s),l=a(3498),i=a(1874),o=function(){};t.default=function(e){var t=e.message,a=t.time,s=t.grouped,u=t.body,m=t.mentioned,d=e.user,f=e.uid,g=e.extra,v=e.onUserClick,p=void 0===v?o:v,h=n.createElement(i.default,{user:d,onClick:p}),E=["chat-message",s&&"grouped",m&&d&&u.indexOf("@".concat(d.nickname," "))>-1&&"mentioned"].filter(Boolean).join(" ");return n.createElement(r.Z,{className:E,title:s?void 0:h,key:a},g||n.createElement("div",{className:"chat-time"},c()(a).fromNow()),n.createElement(l.default,{message:e.message,uid:f}))}},3498:function(e,t,a){a.r(t);var n=a(2791),r=a(6776),s=a(4469),c=a(2756),l=a(8183),i=a(4964),o=a(2351),u=a(3824),m=a(7585),d=a(8920),f=a(2404),g=a(8272);t.default=function(e){var t=e.uid,a=e.message,v=a.body,p=a.isRP,h=a.rolls,E=a.data;if(E){var y=E.itemId,b=E.taken,M=E.amount,k=E.type,N=E.characterChanges,Z=E.perk;if(Z)return n.createElement(n.Fragment,null,n.createElement("i",{className:"rp-message"},v,n.createElement(g.default,{perk:Z})));if(N){var w=Object.values(N),C=function(e){switch(typeof e){case"string":case"number":return e;default:return[e.base&&"b:".concat(e.base),e.change&&"".concat(e.base?" + ":"","c:").concat(e.change),e.total&&" = t:".concat(e.total)].filter(Boolean).join("")}};return n.createElement(r.Z,null,n.createElement(r.Z.Panel,{key:"char-changes",header:v},w.map((function(e){var t=e.label,a=e.full,r=e.before,l=e.after;return n.createElement("div",{key:t,className:"chat-char-changes"},n.createElement(s.Z,{title:a},n.createElement("span",null,t)),n.createElement("div",null,n.createElement(c.Z,{value:C(r),readOnly:!0}),"->",n.createElement(c.Z,{value:C(l),readOnly:!0})))}))))}if(y)return n.createElement(n.Fragment,null,n.createElement("i",{className:"rp-message"},v),n.createElement("div",{className:b?"":"rp-message"},n.createElement(d.default,{id:y.trim(),amount:M,disabled:b,footer:t&&k?n.createElement(l.Z,{title:"\u041f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442?",onConfirm:function(){return f.default.takeItem({uid:t,message:a,data:E})},okText:"\u041f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",disabled:b},n.createElement(i.Z,{className:"take-button",disabled:b},n.createElement(o.Z,null))):void 0})))}if((0,u.isURL)(v)){var O=(0,u.processLinks)(v);if(O)return n.createElement("span",null,O)}var S=h?(0,m.importRolls)(v,h):v;return p?n.createElement("i",{className:"rp-message"},S):n.createElement("span",null,S)}},3574:function(e,t,a){a.r(t),a.d(t,{default:function(){return te}});var n=a(1413),r=a(2982),s=a(5671),c=a(3144),l=a(136),i=a(4062),o=a(2791),u=a(4233),m=a(2426),d=a.n(m),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},g=a(4291),v=function(e,t){return o.createElement(g.Z,Object.assign({},e,{ref:t,icon:f}))};v.displayName="EyeOutlined";var p=o.forwardRef(v),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},E=function(e,t){return o.createElement(g.Z,Object.assign({},e,{ref:t,icon:h}))};E.displayName="EyeInvisibleOutlined";var y=o.forwardRef(E),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M945 412H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h256c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM811 548H689c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h122c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM477.3 322.5H434c-6.2 0-11.2 5-11.2 11.2v248c0 3.6 1.7 6.9 4.6 9l148.9 108.6c5 3.6 12 2.6 15.6-2.4l25.7-35.1v-.1c3.6-5 2.5-12-2.5-15.6l-126.7-91.6V333.7c.1-6.2-5-11.2-11.1-11.2z"}},{tag:"path",attrs:{d:"M804.8 673.9H747c-5.6 0-10.9 2.9-13.9 7.7a321 321 0 01-44.5 55.7 317.17 317.17 0 01-101.3 68.3c-39.3 16.6-81 25-124 25-43.1 0-84.8-8.4-124-25-37.9-16-72-39-101.3-68.3s-52.3-63.4-68.3-101.3c-16.6-39.2-25-80.9-25-124 0-43.1 8.4-84.7 25-124 16-37.9 39-72 68.3-101.3 29.3-29.3 63.4-52.3 101.3-68.3 39.2-16.6 81-25 124-25 43.1 0 84.8 8.4 124 25 37.9 16 72 39 101.3 68.3a321 321 0 0144.5 55.7c3 4.8 8.3 7.7 13.9 7.7h57.8c6.9 0 11.3-7.2 8.2-13.3-65.2-129.7-197.4-214-345-215.7-216.1-2.7-395.6 174.2-396 390.1C71.6 727.5 246.9 903 463.2 903c149.5 0 283.9-84.6 349.8-215.8a9.18 9.18 0 00-8.2-13.3z"}}]},name:"field-time",theme:"outlined"},M=function(e,t){return o.createElement(g.Z,Object.assign({},e,{ref:t,icon:b}))};M.displayName="FieldTimeOutlined";var k=o.forwardRef(M),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},Z=function(e,t){return o.createElement(g.Z,Object.assign({},e,{ref:t,icon:N}))};Z.displayName="SyncOutlined";var w=o.forwardRef(Z),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},O=function(e,t){return o.createElement(g.Z,Object.assign({},e,{ref:t,icon:C}))};O.displayName="ReloadOutlined";var S=o.forwardRef(O),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},L=function(e,t){return o.createElement(g.Z,Object.assign({},e,{ref:t,icon:z}))};L.displayName="DownOutlined";var T=o.forwardRef(L),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M877.1 238.7L770.6 132.3c-13-13-30.4-20.3-48.8-20.3s-35.8 7.2-48.8 20.3L558.3 246.8c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l89.6 89.7a405.46 405.46 0 01-86.4 127.3c-36.7 36.9-79.6 66-127.2 86.6l-89.6-89.7c-13-13-30.4-20.3-48.8-20.3a68.2 68.2 0 00-48.8 20.3L132.3 673c-13 13-20.3 30.5-20.3 48.9 0 18.5 7.2 35.8 20.3 48.9l106.4 106.4c22.2 22.2 52.8 34.9 84.2 34.9 6.5 0 12.8-.5 19.2-1.6 132.4-21.8 263.8-92.3 369.9-198.3C818 606 888.4 474.6 910.4 342.1c6.3-37.6-6.3-76.3-33.3-103.4zm-37.6 91.5c-19.5 117.9-82.9 235.5-178.4 331s-213 158.9-330.9 178.4c-14.8 2.5-30-2.5-40.8-13.2L184.9 721.9 295.7 611l119.8 120 .9.9 21.6-8a481.29 481.29 0 00285.7-285.8l8-21.6-120.8-120.7 110.8-110.9 104.5 104.5c10.8 10.8 15.8 26 13.3 40.8z"}}]},name:"phone",theme:"outlined"},U=function(e,t){return o.createElement(g.Z,Object.assign({},e,{ref:t,icon:I}))};U.displayName="PhoneOutlined";var x=o.forwardRef(U),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},j=function(e,t){return o.createElement(g.Z,Object.assign({},e,{ref:t,icon:R}))};j.displayName="EditOutlined";var A=o.forwardRef(j),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M368 724H252V608c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v116H72c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h116v116c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V788h116c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v352h72V232h576v560H448v72h272c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM888 625l-104-59.8V458.9L888 399v226z"}},{tag:"path",attrs:{d:"M320 360c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h112z"}}]},name:"video-camera-add",theme:"outlined"},B=function(e,t){return o.createElement(g.Z,Object.assign({},e,{ref:t,icon:D}))};B.displayName="VideoCameraAddOutlined";var H=o.forwardRef(B),P=a(3097),V=a(8528),F=a(8327),q=a(3347),_=a(4964),K=a(8321),Y=a(9271),Q=(a(3460),a(2404)),$=a(5078),J=a(3690),G=a(6872),W=a(3824),X=a(9638),ee=function(e){(0,l.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,s.Z)(this,a);for(var c=arguments.length,l=new Array(c),i=0;i<c;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={message:"",sending:!1,showPinned:!0},e.componentDidMount=function(){Q.default.subscribe({}),e.setState(JSON.parse(localStorage.getItem("chat-state")||"{}")),(0,X.addStatusChangeListener)("afk",e.resetIsTyping),(0,X.addStatusChangeListener)("offline",e.resetIsTyping)},e.quickDisplayActiveUsers=function(){return o.createElement("div",{className:"active-users-list"},(0,r.Z)(Object.values(e.props.users)).filter((function(e){return"offline"!==(0,W.getUserStatus)(e)})).map((function(t){return o.createElement("div",{className:"active-user ".concat((0,W.getUserStatus)(t)),key:t.uid,onClick:function(){return e.props.history.push("/".concat(t.uid,"/notes"))}},t.nickname)})))},e.componentDidUpdate=function(t,a){var n=e.props,r=n.messages,s=n.users,c=n.loading;if(e.state.sending&&t.messages.length<=r.length){var l="*"==e.state.message.substring(0,1)?"*":"";localStorage.setItem("message",l),e.setState({message:l,sending:!1})}if(!c){var i=r.map((function(e){return e.author})).filter((function(e,t,a){return a.findIndex((function(t){return t===e}))===t}));if(i.length!==Object.keys(s).length){var o=i.find((function(e){return!s[e]}));o&&Q.default.getUser({uid:o});var u=i.find((function(e){return!!s[e]&&!!s[e].error}));u&&r.forEach((function(e){var t=e.author,a=e.time;t===u&&Q.default.removeMessage({id:a})}))}}a!==e.state&&localStorage.setItem("chat-state",JSON.stringify(e.state))},e.togglePinned=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!e.state.showPinned;return e.setState({showPinned:t})},e.onChangeMessage=function(t){return e.changeMessage(t.target.value)},e.changeMessage=function(t){localStorage.setItem("message",t),e.setState({message:t})},e.lastTyping=Date.now()-500,e.timeout=null,e.onKeyDown=function(t){if("Enter"!==t.key||t.shiftKey){var a=Date.now();e.props.currentUser&&a>e.lastTyping&&(e.props.currentUser.isTyping||Q.default.setIsTyping({isTyping:!0,uid:e.props.uid}),null!==e.timeout&&clearTimeout(e.timeout),e.lastTyping=a+1e3,e.timeout=setTimeout((function(){Date.now()>e.lastTyping&&Q.default.setIsTyping({isTyping:!1,uid:e.props.uid})}),3e3))}else t.preventDefault(),e.onSendMessage(t.getModifierState("Alt")?"complete":"none")()},e.resetIsTyping=function(){var t=e.props,a=t.uid,n=t.currentUser;null!==n&&void 0!==n&&n.isTyping&&Q.default.setIsTyping({isTyping:!1,uid:a})},e.onSendMessage=function(t){return function(){var a=e.state.message,n=e.props,r=n.currentUser,s=n.loading,c=n.uid;if(!s)if(r)if(r.nickname)if(r.approved){if((0,W.validateMessage)(a))switch(e.setState({sending:!0}),t){case"picture":Q.default.sendMessagePhotoAi({message:a,uid:c,setMessageInsteadCallback:e.changeMessage});break;case"complete":Q.default.sendMessageAi({message:"\n"+a,uid:c,setMessageInsteadCallback:e.changeMessage});break;default:Q.default.sendMessage({uid:c,message:a})}}else V.Z.error("\u0410\u0434\u043c\u0438\u043d \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u043d\u0435 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043b \u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442");else V.Z.error("\u041d\u0438\u043a\u043d\u0435\u0439\u043c \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d. \u041f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438 \u043d\u0430\u0437\u043e\u0432\u0438\u0442\u0435 \u0441\u0435\u0431\u044f");else V.Z.error("\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")}},e.getMoreMessages=function(){Q.default.getMoreMessages({firstMessage:e.props.messages[e.props.messages.length-1]})},e.onScroll=function(t){t.currentTarget.scrollHeight+t.currentTarget.scrollTop<=1e3&&(t.preventDefault(),e.getMoreMessages())},e.onPinMessage=function(e){return function(){Q.default.changeMessage({message:(0,n.Z)((0,n.Z)({},e),{},{pinned:!e.pinned})}),Q.default.notify({message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 ".concat(e.pinned?"\u043e\u0442\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043e":"\u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u043e","!")})}},e.getPinnedMessage=function(t){var a=t.find((function(e){return e.pinned}));if(!a)return!1;var r=e.state.showPinned;return o.createElement("div",{className:"chat-pinned-message ".concat(r?"":"hidden")},r?o.createElement(p,{onClick:function(){return e.togglePinned()}}):o.createElement(y,{onClick:function(){return e.togglePinned()}}),e.getMessage((0,n.Z)((0,n.Z)({},a),{},{grouped:!1})))},e.getMessageControlsOverlay=function(t){var a=e.props.currentUser,n=null===a||void 0===a?void 0:a.isAdmin,r=n||(null===a||void 0===a?void 0:a.uid)===t.author;return o.createElement(F.Z,null,o.createElement(F.Z.Item,null,o.createElement(q.Z,{bodyStyle:{padding:"4px 15px"}},d()(t.time).format("HH:MM:SS DD:MM:YYYY"))),n&&o.createElement(F.Z.Item,null,o.createElement(_.Z,{onClick:e.onPinMessage(t)},t.pinned?"\u041e\u0442\u043a\u0440\u0435\u043f\u0438\u0442\u044c":"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c")),r&&o.createElement(F.Z.Item,null,o.createElement(_.Z,{onClick:function(e){return Q.default.removeMessage({id:t.time})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},e.getMessageControls=function(t){return o.createElement(K.Z,{overlay:e.getMessageControlsOverlay(t),trigger:["hover"],placement:"topLeft"},o.createElement("div",{className:"chat-time"},o.createElement(k,null)," ",d()(t.time).fromNow(!0)))},e.getMessage=function(t){var a=e.props,n=a.users,r=a.uid,s=a.history;return o.createElement(G.default,{key:t.time,message:t,user:n[t.author],uid:r,extra:e.getMessageControls(t),onUserClick:function(){return s.push("/".concat(t.author,"/notes"))}})},e.scrollDown=function(){return e.bodyRef&&e.bodyRef.scrollTo({left:0,top:Number.MAX_SAFE_INTEGER,behavior:"smooth"})},e.bodyRef=null,e.render=function(){var t=e.props,a=t.messages,n=t.loading,r=t.currentUser;return o.createElement("div",{className:"chat-wrapper"},o.createElement("div",{className:"chat-reload"},n?o.createElement(w,{spin:!0}):o.createElement(S,{onClick:function(){return Q.default.getMessages({})}})),e.getPinnedMessage(a),o.createElement("div",{className:"chat-body",ref:function(t){return e.bodyRef=t},onScroll:e.onScroll},a.map(e.getMessage)),o.createElement("div",{className:"chat-controls"},e.quickDisplayActiveUsers(),o.createElement(T,{onClick:e.scrollDown}),o.createElement(J.default,null),o.createElement($.default,{textArea:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",autoSize:{minRows:1,maxRows:10},onChange:e.onChangeMessage,onKeyDown:e.onKeyDown,value:e.state.message,disabled:!r||!r.enableDisabledFeatures,onUpload:function(t){e.changeMessage("".concat(e.state.message," ").concat(t)),Q.default.notify({message:"\u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"})}}),o.createElement("div",{className:"ai-buttons"},o.createElement(x,{onClick:function(){return Q.default.sendMessageAi({IC:!0,OOC:!0})}}),o.createElement("div",null,"call_AI"),o.createElement("br",null),o.createElement(A,{onClick:e.onSendMessage("complete")}),o.createElement("div",null,"write"),o.createElement("br",null),o.createElement(H,{onClick:e.onSendMessage("picture")}),o.createElement("div",null,"image")),o.createElement(P.Z,{onClick:e.onSendMessage("none")})))},e}return(0,c.Z)(a,[{key:"componentWillUnmount",value:function(){(0,X.removeStatusChangeListener)("afk",this.resetIsTyping),(0,X.removeStatusChangeListener)("offline",this.resetIsTyping)}}]),a}(o.Component),te=(0,Y.EN)((0,u.$j)((function(e){return{messages:e.messages,uid:e.uid,loading:e.loading,users:e.users,currentUser:e.currentUser}}))(ee))},8272:function(e,t,a){a.r(t);var n=a(2791),r=a(8183),s=a(4964),c=a(732);a(2462);t.default=function(e){var t=e.perk,a=e.onDelete,l=e.hasRight;return n.createElement("div",{className:"perks-item"},a&&l&&n.createElement(r.Z,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0440\u043a?",okText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onConfirm:function(){return a(t)}},n.createElement(s.Z,{className:"perks-item-close"},n.createElement(c.Z,null))),n.createElement("div",{className:"perks-item-label"},t.label),n.createElement("div",{className:"perks-item-description"},t.description))}},3097:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(2791),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},s=a(4291),c=function(e,t){return n.createElement(s.Z,Object.assign({},e,{ref:t,icon:r}))};c.displayName="SendOutlined";var l=n.forwardRef(c)},3460:function(e,t,a){a.r(t),t.default={}},1554:function(e,t,a){a.r(t),t.default={}},2462:function(e,t,a){a.r(t),t.default={}},4895:function(e,t,a){a.r(t),t.default={}}}]);
//# sourceMappingURL=574.5995c6f7.chunk.js.map