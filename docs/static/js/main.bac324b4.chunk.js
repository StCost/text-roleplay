(this["webpackJsonptext-roleplay"]=this["webpackJsonptext-roleplay"]||[]).push([[33],{109:function(e,t,a){"use strict";a.r(t);var n=a(164),r=a(166),s=a(165),c=a(0),u=a.n(c),i=a(22),o=a(88),l=a(32),d=a(92),m=(a(267),a(110)),f=a(113),p=(a(209),a(210),a(211),a(78)),g=a(3),b=u.a.createElement("div",{className:"build-date"},"build date ",window.buildDate.replace("_"," ")),E=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).componentDidMount=p.listenForActivity,e.componentDidUpdate=function(){var t=e.props,a=t.notify,n=t.redirect;a&&(d.a.info(a),g.default.notifySuccess({})),n&&g.default.redirectSuccess({})},e.getRedirect=function(){var t=e.props.redirect;return t&&u.a.createElement(i.a,{to:t})},e.render=function(){return u.a.createElement(u.a.Fragment,null,b,u.a.createElement(o.a,null,e.getRedirect(),u.a.createElement(m.default,null),u.a.createElement("div",{className:"app"},u.a.createElement(f.default,null))))},e}return a}(c.Component);t.default=Object(l.b)((function(e){return{redirect:e.redirect,notify:e.notify}}))(E)},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(228),c=a(88),u=a(22),i=a(32),o=(a(182),a(111));t.default=Object(i.b)((function(e){return{isLoggedIn:e.isLoggedIn}}))(Object(u.g)((function(e){if(!e.isLoggedIn)return r.a.createElement(r.a.Fragment,null);var t=window.innerWidth<767?"horizontal":"inline";return r.a.createElement("div",{className:"menu"},r.a.createElement(s.a,{mode:t,selectedKeys:[e.location.pathname.split("/").pop()||""]},o.map((function(t){return r.a.createElement(s.a.Item,{key:t.path.split("/").pop(),disabled:t.path===e.location.pathname},r.a.createElement(c.b,{to:t.path},t.label))}))))})))},111:function(e){e.exports=JSON.parse('[{"label":"\u0427\u0430\u0442","path":"/text-roleplay/chat"},{"label":"\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c","path":"./inventory"},{"label":"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436","path":"./character"},{"label":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","path":"./settings"},{"label":"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u044b","path":"/text-roleplay/items"},{"label":"\u041f\u043e\u043c\u043e\u0449\u044c","path":"/text-roleplay/help"},{"label":"\u0412\u044b\u0439\u0442\u0438","path":"/text-roleplay/logout"}]')},113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),c=a(32),u=a(58),i=a(114),o=a(115);t.default=Object(c.b)((function(e){return{isLoggedIn:e.isLoggedIn}}))((function(e){return e.isLoggedIn?r.a.createElement(s.d,null,i.default.map((function(e){var t=Object(n.lazy)((function(){return a(415)("./".concat(e.component))}));return r.a.createElement(s.b,{key:e.path,path:e.path,exact:e.exact||!1,component:function(){return r.a.createElement(n.Suspense,{key:e.path,fallback:r.a.createElement(u.a,{description:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0433\u0440\u0443\u0437\u0438\u0442\u0441\u044f..."})},r.a.createElement(t,null))}})})),r.a.createElement(s.a,{to:"/text-roleplay/chat"})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"*",component:o.default}))}))},114:function(e,t,a){"use strict";a.r(t);t.default=[{path:"/text-roleplay/chat",component:"containers/Chat"},{path:"/text-roleplay/:uid/settings",component:"containers/Settings",exact:!0},{path:"/text-roleplay/:uid/inventory",component:"containers/Inventory",exact:!0},{path:"/text-roleplay/inventory",component:"containers/Inventory",exact:!0},{path:"/text-roleplay/:uid/character",component:"containers/Character",exact:!0},{path:"/text-roleplay/character",component:"containers/Character",exact:!0},{path:"/text-roleplay/settings",component:"containers/Settings",exact:!0},{path:"/text-roleplay/items",component:"containers/Items"},{path:"/text-roleplay/help",component:"components/Help"},{path:"/text-roleplay/logout",component:"components/Logout"}]},115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(32),c=a(420),u=a(57),i=a(28),o=a(83),l=a(64),d=a(421),m=a(3);t.default=Object(s.b)((function(e){return{loading:e.loading,error:e.error}}))((function(e){var t=e.error,a=e.loading;return r.a.createElement(c.a,{loading:a},r.a.createElement(u.a,{defaultActiveKey:"1"},r.a.createElement(u.a.TabPane,{tab:"\u041b\u043e\u0433\u0438\u043d",key:"1"},r.a.createElement(i.a,{onFinish:function(e){return m.default.login(e)}},r.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail!"}]},r.a.createElement(o.a,null)),r.a.createElement(i.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}]},r.a.createElement(o.a.Password,null)),r.a.createElement(i.a.Item,null,r.a.createElement(l.a,{type:"primary",htmlType:"submit"},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement(u.a.TabPane,{tab:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",key:"2"},r.a.createElement(i.a,{onFinish:function(e){return m.default.register(e)}},r.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail!"}]},r.a.createElement(o.a,null)),r.a.createElement(i.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}]},r.a.createElement(o.a.Password,null)),r.a.createElement(i.a.Item,{label:"Confirm Password",name:"passwordConfirm",rules:[{required:!0,message:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b!"}]},r.a.createElement(o.a.Password,null)),r.a.createElement(i.a.Item,null,r.a.createElement(l.a,{type:"primary",htmlType:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))),r.a.createElement(u.a.TabPane,{tab:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",key:"3"},r.a.createElement(i.a,{onFinish:function(e){return m.default.resetPassword(e)}},r.a.createElement(i.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail!"}]},r.a.createElement(o.a,null)),r.a.createElement(i.a.Item,null,r.a.createElement(l.a,{type:"primary",htmlType:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c E-mail"))))),t&&r.a.createElement(d.a,{type:"error",message:t.message}))}))},117:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(6),r=a.n(n),s=a(10),c=a(13),u=a(3),i=r.a.mark(f),o=r.a.mark(p),l=r.a.mark(g),d=r.a.mark(b),m=r.a.mark(E);function f(e){var t,a,n;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.email,a=e.password,r.prev=1,r.next=4,c.auth.signInWithEmailAndPassword(t,a);case 4:return n=r.sent,u.default.loginSuccess({user:n}),localStorage.setItem("user",JSON.stringify(n.user)),localStorage.setItem("uid",n.user.uid),r.abrupt("return",n.user);case 11:return r.prev=11,r.t0=r.catch(1),u.default.loginFail({error:r.t0}),r.abrupt("return",!1);case 15:case"end":return r.stop()}}),i,null,[[1,11]])}function p(e){var t,a,n,s;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.email,a=e.password,n=e.passwordConfirm,a===n){r.next=4;break}return u.default.registerFail({error:{message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!"}}),r.abrupt("return");case 4:return r.prev=4,r.next=7,c.auth.createUserWithEmailAndPassword(t,a);case 7:return u.default.registerSuccess({}),r.next=10,f(e);case 10:(s=r.sent)&&u.default.sendMessage({uid:s.uid,message:"*[\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d]*"}),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(4),console.error(r.t0),u.default.registerFail({error:r.t0});case 18:case"end":return r.stop()}}),o,null,[[4,14]])}function g(e){var t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.email,a.prev=1,a.next=4,c.auth.sendPasswordResetEmail(t);case 4:u.default.resetPasswordSuccess({}),u.default.notify({message:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 E-mail!"}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0),u.default.resetPasswordFail({error:a.t0});case 12:case"end":return a.stop()}}),l,null,[[1,8]])}function b(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("user"),localStorage.removeItem("uid"),localStorage.removeItem("loggedIn"),e.next=5,c.auth.signOut();case 5:case"end":return e.stop()}}),d)}function E(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)([Object(s.c)("LOGIN",f),Object(s.c)("REGISTER",p),Object(s.c)("RESET_PASSWORD",g),Object(s.c)("LOGOUT",b)]);case 2:case"end":return e.stop()}}),m)}},118:function(e,t,a){"use strict";a.r(t);var n,r,s,c="ewogICAgImFwaUtleSI6ICJBSXphU3lEYkVwWWdfUjJkMXVyUEJhYk9IenJLTjRyd3BKUWpDNG8iLAogICAgImF1dGhEb21haW4iOiAidGV4dC1yb2xlcGxheS1hZmFlNi5maXJlYmFzZWFwcC5jb20iLAogICAgImRhdGFiYXNlVVJMIjogImh0dHBzOi8vdGV4dC1yb2xlcGxheS1hZmFlNi5maXJlYmFzZWlvLmNvbSIsCiAgICAicHJvamVjdElkIjogInRleHQtcm9sZXBsYXktYWZhZTYiLAogICAgInN0b3JhZ2VCdWNrZXQiOiAidGV4dC1yb2xlcGxheS1hZmFlNi5hcHBzcG90LmNvbSIsCiAgICAibWVzc2FnaW5nU2VuZGVySWQiOiAiNDk3Mjc3NjQwOTY5IiwKICAgICJhcHBJZCI6ICIxOjQ5NzI3NzY0MDk2OTp3ZWI6NTZiYjdkMmE2ZjM0NjM1Njc3MzNkOCIKICB9",u={},i=0,o=0,l="",d=String.fromCharCode,m=c.length;for(n=0;n<64;n++)u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n)]=n;for(r=0;r<m;r++)for(i=(i<<6)+u[c.charAt(r)],o+=6;o>=8;)((s=i>>>(o-=8)&255)||r<m-2)&&(l+=d(s));t.default=JSON.parse(l)},119:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var n=a(6),r=a.n(n),s=a(4),c=a(10),u=a(13),i=a(3),o=r.a.mark(f),l=r.a.mark(b),d=r.a.mark(E),m=r.a.mark(v);function f(e){var t,a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.uid,a=e.user,n.next=3,u.database.ref("users").child(t).set(Object(s.a)(Object(s.a)({},a),{},{lastOnline:(new Date).getTime(),uid:t}));case 3:i.default.setUserSuccess({}),i.default.getUser({uid:t});case 5:case"end":return n.stop()}}),o)}var p={};function g(e){var t=e.uid,a=e.currentUser;p[t]&&!a||(p[t]=!0,u.database.ref("users").child(t).on("value",(function(e){var n=e.val()||{};i.default.getUserSuccess({user:n,uid:t,currentUser:a})})))}function b(){var e,t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=localStorage.getItem("uid"))&&"undefined"!==e){a.next=3;break}return a.abrupt("return");case 3:return t=(new Date).getTime(),localStorage.setItem("lastActivity","".concat(t)),a.next=7,u.database.ref("users").child("".concat(e)).child("lastOnline").set(t);case 7:return a.next=9,u.database.ref("usersActivity").child("".concat(e)).set(t);case 9:case"end":return a.stop()}}),l)}function E(){var e,t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.database.ref("usersActivity").once("value");case 2:e=a.sent,t=e.val()||{},i.default.getUsersActivitySuccess({usersActivity:t});case 5:case"end":return a.stop()}}),d)}function v(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)([Object(c.c)("GET_USER",g),Object(c.c)("SET_USER",f),Object(c.c)("UPDATE_LAST_ONLINE",b),Object(c.c)("GET_USERS_ACTIVITY",E)]);case 2:case"end":return e.stop()}}),m)}},120:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x}));var n=a(160),r=a(6),s=a.n(r),c=a(4),u=a(10),i=a(3),o=a(13),l=a(20),d=a(42),m=s.a.mark(v),f=s.a.mark(I),p=s.a.mark(h),g=s.a.mark(S),b=s.a.mark(O),E=s.a.mark(x);function v(e){var t,a,n,r,u;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.item,a=(new Date).getTime(),n=t.id||Object(l.generateID)(),r=localStorage.getItem("uid"),u=Object(c.a)(Object(c.a)({},t),{},{id:n,time:a,author:r}),s.next=7,o.database.ref("items").child("".concat(n)).set(u);case 7:i.default.setItemSuccess({itemData:u}),i.default.getItemById({id:n});case 9:case"end":return s.stop()}}),m)}function I(){var e,t;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.database.ref("items").orderByKey().limitToFirst(30).once("value");case 2:e=a.sent,t=Object.values(e.val()||{}),i.default.getItemsSuccess({items:t});case 5:case"end":return a.stop()}}),f)}function h(e){var t,a,n;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,r.next=3,o.database.ref("items").child(t).once("value");case 3:return a=r.sent,n=a.val()||Object(l.getFailedItem)(t),i.default.getItemsSuccess({items:[n]}),r.abrupt("return",!0);case 7:case"end":return r.stop()}}),p)}function S(e){var t,a,n,r,c,u;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.amount,a=void 0===t?1:t,n=e.lastItem){s.next=3;break}return s.abrupt("return");case 3:return s.next=5,o.database.ref("items").orderByKey().startAt("".concat(n.id)).limitToFirst(a+1).once("value");case 5:r=s.sent,c=r.val(),u=Object.values(c||{}).splice(1),i.default.getItemsSuccess({items:u});case 9:case"end":return s.stop()}}),g)}function O(e){var t,a,r,c,u,l,m,f,p,g,E;return s.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return E=function(){return(E=Object(n.a)(s.a.mark((function e(a){var n,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f[a]){e.next=3;break}return e.abrupt("return");case 3:if(c=r(),setTimeout((function(){return i.default.deleteItemProgress({field:"usersChecked",value:a+1})}),c),!n.inventory){e.next=11;break}if(!(u=Object.values(n.inventory).find((function(e){return e.id===t})))){e.next=11;break}return e.next=10,o.database.ref("users/".concat(n.uid,"/inventory/").concat(t,"|").concat(u.time)).set({});case 10:setTimeout((function(){return i.default.deleteItemProgress({field:"usersCleared",value:++p})}),c);case 11:return e.next=13,g(a+1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)},g=function(e){return E.apply(this,arguments)},m=function(){return(m=Object(n.a)(s.a.mark((function e(a){var n,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c[a]){e.next=3;break}return e.abrupt("return");case 3:if(d=r(),setTimeout((function(){return i.default.deleteItemProgress({field:"messagesChecked",value:a+1})}),d),!n.data||!n.data.itemId||n.data.itemId!==t){e.next=9;break}return e.next=8,o.database.ref("messages/".concat(n.time,"/data")).set({});case 8:setTimeout((function(){return i.default.deleteItemProgress({field:"messagesCleared",value:++u})}),d);case 9:return e.next=11,l(a+1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},l=function(e){return m.apply(this,arguments)},t=e.id,b.next=7,o.database.ref("items/".concat(t)).set({});case 7:return i.default.deleteItemProgress({field:"deleted",value:!0}),a=0,r=function(){return a+=Object(d.getRandomInt)(10,500)},b.t0=Object,b.next=13,o.database.ref("messages").once("value");case 13:if(b.t1=b.sent.val(),b.t1){b.next=16;break}b.t1={};case 16:return b.t2=b.t1,c=b.t0.values.call(b.t0,b.t2),u=0,b.next=21,l(0);case 21:return b.t3=Object,b.next=24,o.database.ref("users").once("value");case 24:if(b.t4=b.sent.val(),b.t4){b.next=27;break}b.t4={};case 27:return b.t5=b.t4,f=b.t3.values.call(b.t3,b.t5),p=0,b.next=32,g(0);case 32:setTimeout((function(){return i.default.deleteItemProgress({field:"done",value:!0})}),r()),i.default.deleteItemSuccess({id:t});case 34:case"end":return b.stop()}}),b)}function x(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)([Object(u.c)("DELETE_ITEM",O),Object(u.c)("SET_ITEM",v),Object(u.c)("GET_ITEMS",I),Object(u.c)("GET_MORE_ITEMS",S),Object(u.b)("GET_ITEM_BY_ID",h)]);case 2:case"end":return e.stop()}}),E)}},121:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return O}));var n=a(4),r=a(6),s=a.n(r),c=a(10),u=a(13),i=a(3),o=a(79),l=a(20),d=s.a.mark(E),m=s.a.mark(v),f=s.a.mark(I),p=s.a.mark(h),g=s.a.mark(S),b=s.a.mark(O);function E(e){var t,a,n,r,c,u,o,m;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.id,a=e.uid,n=e.demonstrate,r=e.use,c=e.item,u=e.to,!(t&&a&&c)){s.next=33;break}if(o=Object(l.getItemName)(c),!n){s.next=9;break}return i.default.sendMessage({uid:a,message:"*\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 ".concat(o),data:{itemId:t,amount:c.amount}}),i.default.passItemSuccess({}),i.default.notify({message:"\u0412\u044b \u043f\u043e\u043a\u0430\u0437\u0430\u043b\u0438 ".concat(o)}),i.default.redirect({to:"/text-roleplay/chat"}),s.abrupt("return",!0);case 9:return s.next=11,v({id:t,uid:a,amount:c.amount});case 11:if(s.sent){s.next=16;break}return console.error("passItem error:",e),i.default.passItemFail({id:t,uid:a}),s.abrupt("return",!1);case 16:if(!r){s.next=23;break}return m=Object(l.getItemName)(c,!1),i.default.sendMessage({uid:a,message:"*\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b ".concat(m),data:{itemId:t}}),i.default.notify({message:"\u0412\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438 ".concat(m)}),i.default.redirect({to:"/text-roleplay/chat"}),i.default.passItemSuccess({}),s.abrupt("return",!0);case 23:if(!u){s.next=28;break}return i.default.giveItem({uid:u.uid,id:t,itemType:c.type,amount:c.amount}),i.default.notify({message:"\u0412\u044b \u043f\u0435\u0440\u0435\u0434\u0430\u043b\u0438 ".concat(c.name," \u0438\u0433\u0440\u043e\u043a\u0443 '").concat(u.nickname,"'")}),i.default.passItemSuccess({}),s.abrupt("return");case 28:return i.default.sendMessage({uid:a,message:"*\u0432\u044b\u0431\u0440\u043e\u0441\u0438\u043b ".concat(o),data:{itemId:t,amount:c.amount,type:c.type}}),i.default.notify({message:"\u0412\u044b \u0432\u044b\u0431\u0440\u043e\u0441\u0438\u043b\u0438 ".concat(o)}),i.default.redirect({to:"/text-roleplay/chat"}),i.default.passItemSuccess({}),s.abrupt("return",!0);case 33:return i.default.passItemFail({id:t,uid:a}),console.error("passItem error: id, uid, or item are not defined",e),s.abrupt("return",!1);case 36:case"end":return s.stop()}}),d)}function v(e){var t,a,r,c,o,l,d;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.id,a=e.uid,r=e.amount,c=void 0===r?1:r,o=u.database.ref("users").child(a).child("inventory"),s.next=4,I({id:t,uid:a});case 4:if(!(l=s.sent)){s.next=16;break}if(!(l.amount-c>=1)){s.next=12;break}return d=Object(n.a)(Object(n.a)({},l),{},{amount:l.amount-c}),s.next=10,o.child("".concat(t,"|").concat(l.time)).set(d);case 10:return i.default.removeItemSuccess({id:t,uid:a}),s.abrupt("return",!0);case 12:return s.next=14,o.child("".concat(t,"|").concat(l.time)).set({});case 14:return i.default.removeItemSuccess({id:t,uid:a}),s.abrupt("return",!0);case 16:return console.error("removeItem error: User '".concat(a,"' doesn't have item '").concat(t,"'")),i.default.notify({message:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0430 \u043d\u0435\u0442 \u0432 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0435"}),i.default.removeItemFail({id:t,uid:a,error:"has-no-item"}),s.abrupt("return",!1);case 20:case"end":return s.stop()}}),m)}function I(e){var t,a,n,r,c;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.id,a=e.uid,s.next=3,u.database.ref("users").child(a).child("inventory").once("value");case 3:if(n=s.sent,!(r=Object.values(n.val()||{})).length){s.next=9;break}if(!(c=r.find((function(e){return e.id===t})))){s.next=9;break}return s.abrupt("return",c);case 9:return s.abrupt("return");case 10:case"end":return s.stop()}}),f)}function h(e){var t,a,n,r,c,o,l,d,m;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.id,a=e.uid,n=e.itemType,r=e.amount,c=void 0===r?1:r,t&&a&&n){s.next=5;break}return console.error("giveItem error. One of the properties are not defined",t,a,n),i.default.giveItemFail({}),s.abrupt("return");case 5:if(o=(new Date).getTime(),l={id:t,time:o,type:n,amount:c},"weapon"===n||"wearable"===n){s.next=12;break}return s.next=10,I({id:t,uid:a});case 10:(d=s.sent)&&(l.amount=(d.amount||1)+c,l.time=d.time);case 12:return m="".concat(l.id,"|").concat(l.time),s.next=15,u.database.ref("users").child(a).child("inventory").child(m).set(l);case 15:return i.default.giveItemSuccess({id:t,uid:a}),s.abrupt("return",!0);case 17:case"end":return s.stop()}}),p)}function S(e){var t,a,n,r,c,u;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.uid,a=e.message,n=a.data,r=n.itemId,c=n.amount,u=n.type,a.data.taken=!0,s.next=5,Object(o.changeMessage)({uid:t,message:a});case 5:if(!s.sent||!u){s.next=14;break}return s.next=9,h({id:r,uid:t,amount:c||1,itemType:u});case 9:if(!s.sent){s.next=14;break}return i.default.sendMessage({uid:t,message:"*\u043f\u043e\u0434\u043e\u0431\u0440\u0430\u043b \u043f\u0440\u0435\u0434\u043c\u0435\u0442"}),i.default.takeItemSuccess({}),s.abrupt("return",!0);case 14:return console.error("takeItem error. Cant take or no item",e),i.default.takeItemFail({}),s.abrupt("return",!1);case 17:case"end":return s.stop()}}),g)}function O(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)([Object(c.c)("GIVE_ITEM",h),Object(c.c)("REMOVE_ITEM",v),Object(c.c)("PASS_ITEM",E),Object(c.c)("TAKE_ITEM",S)]);case 2:case"end":return e.stop()}}),b)}},122:function(e,t,a){"use strict";a.r(t),a.d(t,"register",(function(){return r})),a.d(t,"unregister",(function(){return c}));var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function c(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},13:function(e,t,a){"use strict";a.r(t),a.d(t,"auth",(function(){return i})),a.d(t,"database",(function(){return o})),a.d(t,"firebase",(function(){return u}));var n=a(225),r=a.n(n),s=(a(416),a(418),a(118)),c=a(3),u=r.a.initializeApp(s.default),i=u.auth();i.languageCode="ru";var o=u.database();i.onAuthStateChanged((function(e){e?(c.default.loginSuccess({user:e}),c.default.getUser({uid:e.uid,currentUser:!0})):c.default.logout({})}))},181:function(e,t,a){},182:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t),a.d(t,"camelize",(function(){return u})),a.d(t,"colorFromString",(function(){return i})),a.d(t,"isOnline",(function(){return o})),a.d(t,"doubleDigit",(function(){return l})),a.d(t,"getTime",(function(){return d})),a.d(t,"getDate",(function(){return m})),a.d(t,"getFullTime",(function(){return f})),a.d(t,"isURL",(function(){return p})),a.d(t,"processMessages",(function(){return g})),a.d(t,"formatMessage",(function(){return b})),a.d(t,"validateMessage",(function(){return E})),a.d(t,"generateID",(function(){return v})),a.d(t,"getFailedItem",(function(){return I})),a.d(t,"getItemName",(function(){return h}));var n=a(93),r=a(4),s=a(92),c=a(42),u=function(e){return e.toLowerCase().replace(/_./g,(function(e){return e.toUpperCase()})).replace(/_/g,"")},i=function(e){if(!e)return"#000";for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);for(var n="#",r=0;r<3;r++){n+=("00"+(t>>8*r&255).toString(16)).substr(-2)}return n},o=function(e){return!!e&&(e||parseInt(localStorage.getItem("lastActivity")||"0"))+18e4>(new Date).getTime()},l=function(e){return 1==="".concat(e).length?"0".concat(e):e},d=function(e){var t=new Date(e);return[t.getHours(),t.getMinutes(),t.getSeconds()].map(l).join(":")},m=function(e){var t=new Date(e);return[t.getDate(),t.getMonth()+1,t.getFullYear()].map(l).join(".")},f=function(e){var t=new Date(e);return[[t.getHours(),t.getMinutes(),t.getSeconds()].map(l).join(":"),[t.getDate(),t.getMonth()+1,t.getFullYear()].map(l).join(".")].join(" ")},p=function(e){return/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/gim.test(e)},g=function(e){return e.filter((function(e,t,a){return a.findIndex((function(t){return t.time===e.time}))===t})).sort((function(e,t){return t.time-e.time})).map((function(e,t,a){return t<a.length-2&&e.author===a[t+1].author?Object(r.a)(Object(r.a)({},e),{},{grouped:!0}):e}))},b=function(e){var t=e.body;return c.diceRegex.test(t)&&(e.rolls=Object(c.exportRolls)(t)),t.indexOf("*")>-1&&(e.isRP=!0),/(@[a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A]*)/im.test(t)&&(e.mentioned=!0),e},E=function(e){if(!e)return s.a.error("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u0443\u0441\u0442\u043e\u0435"),!1;if(Object(c.hasDice)(e)){var t=e.match(/(( |^)[a-z\u017F\u0430-\u044F\u1C80-\u1C86\u212A]+[0-9]+[d\u0434\u1C81][0-9]+)|([0-9]+[d\u0434\u1C81][0-9]+[a-z\u017F\u0430-\u044F\u1C80-\u1C86\u212A]+( |$))|([0-9]+[d\u0434\u1C81][0-9]+)/gim);if(t)if(t.some((function(e){if(/(([a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A])[0-9]+[d\u0434\u1C81][0-9]+)|([0-9]+[d\u0434\u1C81][0-9]+([a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A]))/gim.test(e))return s.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0434\u0430\u0439\u0441\u0435 ".concat(e,". \u0420\u044f\u0434\u043e\u043c \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),!0;var t=e.split(/[d\u0434]/),a=Object(n.a)(t,2),r=a[0],c=a[1];return parseInt(r)>10?(s.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0434\u0430\u0439\u0441\u0435 ".concat(e,". \u041d\u0435\u043b\u044c\u0437\u044f \u0431\u0440\u043e\u0441\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 10-\u0442\u0438 \u0434\u0430\u0439\u0441\u043e\u0432")),!0):-1===[2,4,6,8,10,12,20].indexOf(parseInt(c))&&(s.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0434\u0430\u0439\u0441\u0435 ".concat(e,". \u041c\u043e\u0436\u043d\u043e \u0431\u0440\u043e\u0441\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u0430\u0439\u0441\u044b \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u0432 4 6 8 10 12 20")),!0)})))return!1}return!0},v=function(){return"_"+Math.random().toString(36).substr(2,9)},I=function(e){return{discriminator:"IItem",id:e,type:"misc",name:"\u041e\u0448\u0438\u0431\u043a\u0430",weight:0,time:0,effect:e,image:"",description:"\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",price:0,capacity:0,armor:0,approved:!0,failed:!0,amount:Number.MAX_VALUE}},h=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"".concat(e?"'".concat(e.name,"'"):"\u043f\u0440\u0435\u0434\u043c\u0435\u0442")+(t&&e.amount&&e.amount>=2?" (".concat(e.amount,"\u0448\u0442)"):"")}},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},258:function(e,t,a){e.exports=a(97)},3:function(e,t,a){"use strict";a.r(t);var n=a(37),r=a(4),s=a(54),c=a(20),u=s.default.dispatch,i=function(e){return function(t){return u(Object(r.a)({type:e},t))}},o=function(e){var t,a=Object(c.camelize)(e);return t={},Object(n.a)(t,a,i(e)),Object(n.a)(t,"".concat(a,"Success"),i("".concat(e,"_SUCCESS"))),Object(n.a)(t,"".concat(a,"Fail"),i("".concat(e,"_FAIL"))),t},l=Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},o("LOGIN")),o("REGISTER")),o("RESET_PASSWORD")),o("GET_USER")),o("GET_MESSAGES")),o("GET_MORE_MESSAGES")),o("SET_USER")),o("SEND_MESSAGE")),o("CHANGE_MESSAGE")),o("SUBSCRIBE")),o("UNSUBSCRIBE")),o("UPLOAD_FILE")),o("SET_ITEM")),o("DELETE_ITEM")),o("GET_ITEMS")),o("GET_ITEM_BY_ID")),o("GET_MORE_ITEMS")),o("GIVE_ITEM")),o("REMOVE_ITEM")),o("PASS_ITEM")),o("TAKE_ITEM")),o("NOTIFY")),o("REDIRECT")),o("GET_USERS_ACTIVITY")),o("DELETE_ITEM")),{},{deleteItemProgress:i("DELETE_ITEM_PROGRESS"),updateLastOnline:i("UPDATE_LAST_ONLINE"),logout:i("LOGOUT")});t.default=l},415:function(e,t,a){var n={"./":[97,9],"./App":[109,9],"./App.css":[209,7],"./App.tsx":[109,9],"./components/ActiveUsersList":[241,9,21],"./components/ActiveUsersList.tsx":[241,9,21],"./components/AmountModal":[238,9,0,2,26],"./components/AmountModal.tsx":[238,9,0,2,26],"./components/Avatar":[230,9,24],"./components/Avatar.tsx":[230,9,24],"./components/Help":[253,9,27],"./components/Help.tsx":[253,9,27],"./components/Image":[234,9,0,23],"./components/Image.tsx":[234,9,0,23],"./components/Item":[231,9,18],"./components/Item.tsx":[231,9,18],"./components/ItemById":[237,9,16],"./components/ItemById.tsx":[237,9,16],"./components/Loader":[129,9,13],"./components/Loader/":[129,9,13],"./components/Loader/CheckIcon":[232,9,28],"./components/Loader/CheckIcon.tsx":[232,9,28],"./components/Loader/LoadIcon":[233,9,29],"./components/Loader/LoadIcon.tsx":[233,9,29],"./components/Loader/index":[129,9,13],"./components/Loader/index.tsx":[129,9,13],"./components/Login":[115,9],"./components/Login.tsx":[115,9],"./components/Logout":[254,9,25],"./components/Logout.tsx":[254,9,25],"./components/Menu":[110,9],"./components/Menu.tsx":[110,9],"./components/Router":[113,9],"./components/Router.tsx":[113,9],"./configs/firebase":[118,9],"./configs/firebase.js":[118,9],"./configs/menu":[111,3],"./configs/menu.json":[111,3],"./configs/routes":[114,9],"./configs/routes.tsx":[114,9],"./containers/Character":[135,9,8,12],"./containers/Character/":[135,9,8,12],"./containers/Character/config":[242,9,30],"./containers/Character/config.ts":[242,9,30],"./containers/Character/index":[135,9,8,12],"./containers/Character/index.tsx":[135,9,8,12],"./containers/Chat":[139,9,0,4,7],"./containers/Chat/":[139,9,0,4,7],"./containers/Chat/Message":[243,9,0,4,19],"./containers/Chat/Message.tsx":[243,9,0,4,19],"./containers/Chat/MessageBody":[239,9,0,4,20],"./containers/Chat/MessageBody.tsx":[239,9,0,4,20],"./containers/Chat/index":[139,9,0,4,7],"./containers/Chat/index.tsx":[139,9,0,4,7],"./containers/Inventory":[136,9,0,2,3,1,6],"./containers/Inventory/":[136,9,0,2,3,1,6],"./containers/Inventory/index":[136,9,0,2,3,1,6],"./containers/Inventory/index.tsx":[136,9,0,2,3,1,6],"./containers/Items":[137,9,0,2,3,1,5],"./containers/Items/":[137,9,0,2,3,1,5],"./containers/Items/ItemCreator":[244,9,0,17,15],"./containers/Items/ItemCreator.tsx":[244,9,0,17,15],"./containers/Items/index":[137,9,0,2,3,1,5],"./containers/Items/index.tsx":[137,9,0,2,3,1,5],"./containers/ItemsTable":[130,9,1,11],"./containers/ItemsTable/":[130,9,1,11],"./containers/ItemsTable/ItemsList":[240,9,3,22],"./containers/ItemsTable/ItemsList.tsx":[240,9,3,22],"./containers/ItemsTable/index":[130,9,1,11],"./containers/ItemsTable/index.tsx":[130,9,1,11],"./containers/Settings":[138,9,9,10],"./containers/Settings/":[138,9,9,10],"./containers/Settings/index":[138,9,9,10],"./containers/Settings/index.tsx":[138,9,9,10],"./helpers/activity":[78,9],"./helpers/activity.ts":[78,9],"./helpers/dice":[42,9],"./helpers/dice.tsx":[42,9],"./helpers/firebase":[13,9],"./helpers/firebase.tsx":[13,9],"./helpers/store":[54,9],"./helpers/store.tsx":[54,9],"./helpers/utils":[20,9],"./helpers/utils.tsx":[20,9],"./index":[97,9],"./index.css":[181,7],"./index.tsx":[97,9],"./logo.svg":[427,7,42],"./react-app-env.d":[255,7,31],"./react-app-env.d.ts":[255,7,31],"./reducers":[44,9],"./reducers/":[44,9],"./reducers/actions":[3,9],"./reducers/actions.ts":[3,9],"./reducers/index":[44,9],"./reducers/index.ts":[44,9],"./reducers/interfaces":[72,9],"./reducers/interfaces.ts":[72,9],"./sagas":[76,9],"./sagas/":[76,9],"./sagas/auth":[117,9],"./sagas/auth.ts":[117,9],"./sagas/index":[76,9],"./sagas/index.ts":[76,9],"./sagas/inventory":[121,9],"./sagas/inventory.ts":[121,9],"./sagas/items":[120,9],"./sagas/items.ts":[120,9],"./sagas/messages":[79,9],"./sagas/messages.ts":[79,9],"./sagas/users":[119,9],"./sagas/users.ts":[119,9],"./serviceWorker":[122,9],"./serviceWorker.ts":[122,9],"./setupTests":[256,9,14,32],"./setupTests.ts":[256,9,14,32],"./styles/active-users.scss":[423,7,36],"./styles/antd-dark.scss":[210,7],"./styles/character.scss":[425,7,37],"./styles/chat.scss":[426,7,38],"./styles/colors.scss":[428,7,39],"./styles/components.scss":[211,7],"./styles/item.scss":[422,7,40],"./styles/items.scss":[424,7,41],"./styles/menu.scss":[182,7]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(2).map(a.e)).then((function(){return a.t(r,t[1])}))}r.keys=function(){return Object.keys(n)},r.id=415,e.exports=r},42:function(e,t,a){"use strict";a.r(t),a.d(t,"diceRegex",(function(){return i})),a.d(t,"diceRegexG",(function(){return o})),a.d(t,"getRandomInt",(function(){return l})),a.d(t,"hasDice",(function(){return d})),a.d(t,"rollDice",(function(){return m})),a.d(t,"exportRolls",(function(){return f})),a.d(t,"importRolls",(function(){return p}));var n=a(55),r=a(93),s=a(0),c=a.n(s),u=a(131),i=/([1-9]|10)[d\u0434\u1C81]((10|12|20)|[468])/im,o=/([1-9]|10)[d\u0434\u1C81]((10|12|20)|[468])/gim,l=function(e,t){return Math.floor(Math.random()*(t+1-e)+e)},d=function(e){return/[0-9]+[d\u0434\u1C81][0-9]+/im.test(e)},m=function(e,t){return new Array(e).fill(e+t).map((function(){return l(1,t)}))},f=function(e){var t=e.match(o);return t?t.map((function(e){var t=e.split(/[d\u0434]/),a=Object(r.a)(t,2),n=a[0],s=a[1],c=parseInt(n),u=parseInt(s),i=m(c,u);return{maxResult:u*c,minResult:c,sum:i.reduce((function(e,t){return e+t}),0),roll:e,results:i,amount:c,size:u}})).splice(0,10):[]},p=function(e,t){var a=Object(n.a)(t);return e.split(" ").map((function(e,t){var n=a.findIndex((function(t){return t.roll===e}));if(n>-1){var r=a.splice(n,1)[0],s=r.results,i=r.maxResult,o=r.minResult,l=r.sum,d=s.length>1?"".concat(l," = ").concat(s.join(" + ")):"".concat(s.join(" + ")),m=(l===i?"critHit":l===o&&"critMiss")||"";return c.a.createElement(c.a.Fragment,{key:e+t}," ",c.a.createElement(u.a,{title:d},c.a.createElement("b",{className:m},e,"(",l,")")))}return" ".concat(e)}))}},44:function(e,t,a){"use strict";a.r(t),a.d(t,"initialState",(function(){return o}));var n=a(37),r=a(55),s=a(4),c=a(20),u=a(72),i=JSON.parse(localStorage.getItem("user")||"null");i&&localStorage.setItem("uid",i.uid);var o={userData:i,isLoggedIn:null!==i,settings:!1,loading:!1,messages:[],users:{},uid:i?i.uid:"",currentUser:null,items:[],error:!1,usersActivity:{},deletingItemData:u.defaultDeletedItemData};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"GET_MESSAGES":case"GET_MORE_MESSAGES":case"SEND_MESSAGE":case"SET_USER":case"GET_ITEMS":case"GET_MORE_ITEMS":case"GET_ITEMS_BY_ID":case"CREATE_ITEM":case"GIVE_ITEM":case"REMOVE_ITEM":case"PASS_ITEM":case"GET_USERS_ACTIVITY":case"REGISTER":case"RESET_PASSWORD":case"UPLOAD_FILE":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case"SET_USER_SUCCESS":case"SET_USER_FAIL":case"GET_MESSAGES_FAIL":case"GET_MORE_MESSAGES_SUCCESS":case"GET_MORE_MESSAGES_FAIL":case"GIVE_ITEM_SUCCESS":case"REMOVE_ITEM_SUCCESS":case"REMOVE_ITEM_FAIL":case"PASS_ITEM_SUCCESS":case"PASS_ITEM_FAIL":case"GET_USERS_ACTIVITY_FAIL":case"DELETE_ITEM_FAIL":case"RESET_PASSWORD_FAIL":case"RESET_PASSWORD_SUCCESS":case"SEND_MESSAGE_FAIL":return Object(s.a)(Object(s.a)({},e),{},{loading:!1});case"LOGIN_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{uid:t.user.uid,userData:t.user,isLoggedIn:null!==t.user,currentUser:Object(s.a)(Object(s.a)({},u.defaultUser),{},{uid:t.user.uid}),loading:!1});case"REGISTER_FAIL":case"LOGIN_FAIL":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,error:t.error});case"LOGOUT":return Object(s.a)(Object(s.a)({},e),{},{userData:null,isLoggedIn:!1});case"GET_MESSAGES_SUCCESS":var a=t.concat?[].concat(Object(r.a)(e.messages),Object(r.a)(t.messages)):t.messages;return Object(s.a)(Object(s.a)({},e),{},{messages:Object(c.processMessages)(a),loading:!1});case"GET_USER_SUCCESS":var i=t.user.uid===e.uid?t.user:e.currentUser;return Object(s.a)(Object(s.a)({},e),{},{currentUser:i,users:Object(s.a)(Object(s.a)({},e.users),{},Object(n.a)({},t.uid,t.user))});case"GET_ITEMS_SUCCESS":var l={};return[].concat(Object(r.a)(e.items),Object(r.a)(t.items)).forEach((function(e){return l[e.id]=e})),Object(s.a)(Object(s.a)({},e),{},{loading:!1,items:Object.values(l)});case"NOTIFY":return Object(s.a)(Object(s.a)({},e),{},{notify:t.message});case"NOTIFY_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{notify:void 0});case"REDIRECT":return Object(s.a)(Object(s.a)({},e),{},{redirect:t.to});case"REDIRECT_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{redirect:void 0});case"GET_USERS_ACTIVITY_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,usersActivity:t.usersActivity});case"DELETE_ITEM":return Object(s.a)(Object(s.a)({},e),{},{loading:!0,deletingItemData:{itemId:t.id,defaultDeletedItemData:u.defaultDeletedItemData}});case"DELETE_ITEM_PROGRESS":return Object(s.a)(Object(s.a)({},e),{},{deletingItemData:Object(s.a)(Object(s.a)({},e.deletingItemData),{},Object(n.a)({},t.field,t.value))});case"DELETE_ITEM_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,items:e.items.filter((function(e){return e.id!==t.id}))});default:return e}}},54:function(e,t,a){"use strict";a.r(t),a.d(t,"sagaMiddleware",(function(){return u}));var n=a(46),r=a(226),s=a(218),c=a(44),u=Object(r.a)(),i=Object(n.createStore)(c.default,c.initialState,Object(s.composeWithDevTools)(Object(n.applyMiddleware)(u)));t.default=i},72:function(e,t,a){"use strict";a.r(t),a.d(t,"defaultUser",(function(){return n})),a.d(t,"defaultItem",(function(){return r})),a.d(t,"defaultDeletedItemData",(function(){return s}));var n={lastOnline:0,nickname:"",avatar:"",isAdmin:!1,uid:"",inventory:{},approved:!1},r={discriminator:"IItem",id:"",type:"junk",name:"",effect:"",image:"",weight:0,price:0,description:"",capacity:0,approved:!1,armor:0,time:0,amount:0},s={itemId:"",deleted:!1,messagesChecked:0,messagesCleared:0,usersChecked:0,usersCleared:0,done:!1}},76:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var n=a(6),r=a.n(n),s=a(10),c=a(117),u=a(119),i=a(79),o=a(120),l=a(121),d=r.a.mark(m);function m(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)([Object(c.default)(),Object(u.default)(),Object(i.default)(),Object(o.default)(),Object(l.default)()]);case 2:case"end":return e.stop()}}),d)}},78:function(e,t,a){"use strict";a.r(t),a.d(t,"blinkTitle",(function(){return c})),a.d(t,"listenForActivity",(function(){return u}));var n=a(20),r=a(3),s=!1,c=function(){if(!s){s=!0;var e=setInterval((function(){var t=document.head.querySelector("title");t&&(t.innerText="TRP"===t.innerText?"(!) TRP":"TRP",s&&document.hidden||(t.innerText="TRP",clearInterval(e),s=!1))}),500)}},u=function(){!function(){var e=function(){Object(n.isOnline)(parseInt(localStorage.getItem("lastActivity")||"0")-6e4)||r.default.updateLastOnline({})};["mousedown","mousemove","keydown","scroll","touchstart"].forEach((function(t){document.addEventListener(t,e,!0)})),e()}()}},79:function(e,t,a){"use strict";a.r(t),a.d(t,"changeMessage",(function(){return S})),a.d(t,"default",(function(){return O}));var n=a(6),r=a.n(n),s=a(10),c=a(3),u=a(13),i=a(20),o=a(78),l=r.a.mark(g),d=r.a.mark(v),m=r.a.mark(I),f=r.a.mark(S),p=r.a.mark(O);function g(e){var t,a,n,s,o,d;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.uid,a=e.message,n=e.data,s=void 0===n?{}:n,o=(new Date).getTime(),d=Object(i.formatMessage)({time:o,author:t,body:"".concat(a," "),data:s}),r.prev=3,r.next=6,u.database.ref("messages").child("".concat(o)).set(d);case 6:localStorage.setItem("message",""),c.default.sendMessageSuccess({message:d}),r.next=15;break;case 10:r.prev=10,r.t0=r.catch(3),c.default.sendMessageFail({}),console.error(r.t0),c.default.notify({message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e. \u0414\u043b\u044f \u0434\u0435\u0442\u0430\u043b\u0435\u0439 ctrl + shift + i, \u0432\u043a\u043b\u0430\u0434\u043a\u0430 Console"});case 15:case"end":return r.stop()}}),l,null,[[3,10]])}function b(){u.database.ref("messages").orderByKey().limitToLast(1).on("value",(function(e){var t=Object.values(e.val()||{});c.default.getMessagesSuccess({messages:t,concat:!0}),Object(o.blinkTitle)()}))}function E(){u.database.ref("messages").off()}function v(){var e,t;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.database.ref("messages").orderByKey().limitToLast(100).once("value");case 2:e=a.sent,t=Object.values(e.val()||{}),c.default.getMessagesSuccess({messages:t});case 5:case"end":return a.stop()}}),d)}function I(e){var t,a,n;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.firstMessage,r.next=3,u.database.ref("messages").orderByKey().endAt("".concat(t.time)).limitToLast(30).once("value");case 3:a=r.sent,n=Object.values(a.val()||{}),c.default.getMessagesSuccess({messages:n,concat:!0});case 6:case"end":return r.stop()}}),m)}function h(e){var t=e.file,a=e.uid,n=new XMLHttpRequest,r=new FormData;r.append("image",t),n.open("POST","https://api.imgur.com/3/image/"),n.setRequestHeader("Authorization","Client-ID ea2c833b74d4583"),n.onreadystatechange=function(){if(200===n.status&&4===n.readyState){var e=JSON.parse(n.responseText);c.default.sendMessage({uid:a,message:e.data.link}),c.default.notify({message:"\u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"})}},n.send(r)}function S(e){var t,a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.message,a=Object(i.formatMessage)({time:t.time,author:t.author,body:t.body,data:t.data}),n.next=4,u.database.ref("messages").child("".concat(t.time)).set(a);case 4:return c.default.changeMessageSuccess({message:a}),n.abrupt("return",a);case 6:case"end":return n.stop()}}),f)}function O(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.a)([Object(s.c)("SEND_MESSAGE",g),Object(s.c)("GET_MESSAGES",v),Object(s.c)("GET_MORE_MESSAGES",I),Object(s.c)("SUBSCRIBE",b),Object(s.c)("UNSUBSCRIBE",E),Object(s.c)("UPLOAD_FILE",h),Object(s.c)("CHANGE_MESSAGE",S)]);case 2:case"end":return e.stop()}}),p)}},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),c=a.n(s),u=a(32),i=(a(181),a(109)),o=a(76),l=a(54),d=a(122);l.sagaMiddleware.run(o.default),c.a.render(r.a.createElement(u.a,{store:l.default},r.a.createElement(i.default,null)),document.getElementById("root")),d.unregister()}},[[258,34,35]]]);
//# sourceMappingURL=main.bac324b4.chunk.js.map