"use strict";(self.webpackChunktext_roleplay=self.webpackChunktext_roleplay||[]).push([[66,949,22,321],{9949:function(e,t,a){a.r(t);var n=a(2791),r=(a(22),[0,1,2,3,3,4,4]);t.default=function(e){var t=e.limbs,a=e.onClick,s=e.hasRight,c=Object.values(e.limbs).reduce((function(e,t){return e+(function(e){return"crippled"===e}(t)?1:0)}),0),l=function(e){var r=t[e];return n.createElement("div",{key:e+r,className:"limb ".concat(r," ").concat(e),style:{backgroundImage:"url(./assets/".concat(r,"-").concat(e,".png)")},onClick:function(){return a&&a(e,r)}})};return n.createElement("div",{className:"body-status ".concat(s?"":"disabled")},n.createElement("div",null,n.createElement("div",{key:"head"+t.head,className:"limb ".concat(t.head," head"),style:{backgroundImage:"url(./assets/".concat(t.head,"-head.png)")},onClick:function(){return a&&a("head",t.head)}},n.createElement("div",{key:"face",className:"limb face",style:{backgroundImage:"url(./assets/face_0".concat(r[c],".png)")}}))),n.createElement("div",null,l("handL"),l("torso"),l("handR")),n.createElement("div",null,l("legL"),l("legR")))}},3066:function(e,t,a){a.r(t);var n=a(4165),r=a(5861),s=a(4942),c=a(1413),l=a(3144),i=a(5671),o=a(136),u=a(4062),m=a(2791),f=a(9271),d=a(4233),h=a(3834),p=a(4483),v=a(5458),b=a(8528),g=a(3347),y=a(2493),E=a(2756),C=a(4469),Z=a(8183),k=a(4964),N=a(9421),S=(a(5321),a(9520)),x=a(3824),O=a(2404),w=a(9949),P=a(9638),j=function(e){(0,o.Z)(a,e);var t=(0,u.Z)(a);function a(){var e;(0,i.Z)(this,a);for(var l=arguments.length,o=new Array(l),u=0;u<l;u++)o[u]=arguments[u];return(e=t.call.apply(t,[this].concat(o))).state={character:(0,S.getInitialCharacter)()},e.componentDidMount=function(){var t=e.props,a=t.character,n=t.uid,r=t.user,s=t.currentUser,c=t.history;a?e.setState({character:a}):O.default.getCharacter({uid:n}),r||O.default.getUser({uid:n}),(0,x.redirectToUserPage)(r,s,c)},e.componentDidUpdate=function(t){var a=e.props,n=a.user,r=a.currentUser,s=a.history,c=a.character;t.character!==c&&e.state.character!==c&&e.setState({character:c}),(0,x.redirectToUserPage)(n,r,s),(0,P.addStatusChangeListener)("afk",e.onSave),(0,P.addStatusChangeListener)("offline",e.onSave)},e.componentWillUnmount=function(){(0,P.removeStatusChangeListener)("afk",e.onSave),(0,P.removeStatusChangeListener)("offline",e.onSave),e.onSave()},e.onLimbClick=function(t,a){e.setState({character:(0,c.Z)((0,c.Z)({},e.state.character),{},{limbs:(0,c.Z)((0,c.Z)({},e.state.character.limbs),{},(0,s.Z)({},t,"crippled"===a?"fine":"crippled"))})})},e.getStatus=function(t){var a=e.props.hasRight;return t&&m.createElement(w.default,{limbs:t,onClick:a?e.onLimbClick:void 0,hasRight:a})},e.onSave=(0,r.Z)((0,n.Z)().mark((function t(){var a,r,s,c,l,i,o=arguments;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=o.length>0&&void 0!==o[0]&&o[0],r=e.props,s=r.uid,c=r.character,l=e.state.character,c){t.next=6;break}return a&&b.Z.error("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436 \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"),t.abrupt("return");case 6:if(0!==(i=(0,x.getCharacterChanges)((0,S.getInitialCharacter)(),l)).length){t.next=10;break}return a&&b.Z.error("\u0412 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0435 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c"),t.abrupt("return");case 10:if(0!==(i=(0,x.getCharacterChanges)(c||(0,S.getInitialCharacter)(),l)).length){t.next=14;break}return a&&b.Z.error("\u0412 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0435 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c"),t.abrupt("return");case 14:if(!(l.stats.skillPoints<0)){t.next=17;break}return a&&b.Z.error("\u041e\u0447\u043a\u0438 \u041d\u0430\u0432\u044b\u043a\u043e\u0432 (\u041e\u041d) \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438!"),t.abrupt("return");case 17:b.Z.success("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d"),O.default.setCharacter({uid:s,character:l}),O.default.sendMessage({uid:s,message:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b",data:{characterChanges:i}});case 20:case"end":return t.stop()}}),t)}))),e.onChange=function(t){return function(a){if(a){var n="number"===typeof a?a:a.currentTarget.value,r=(0,x.set)(e.state.character,t,n),s=(0,x.processCharacterChanges)({},r);e.setState({character:(0,c.Z)((0,c.Z)({},e.state.character),s)})}}},e.getMainStats=function(t){var a=e.props.hasRight,n=t.stats;return n&&m.createElement(g.Z,{className:"status-main-stats"},m.createElement("div",{className:"status-main-stats-health"},m.createElement("div",{className:"status-main-stats-hp"},m.createElement("span",{className:"status-main-stats-hp-label"},"\u041e\u0447\u043a\u0438 \u0417\u0434\u043e\u0440\u043e\u0432\u044c\u044f (\u041e\u0417)"),m.createElement("div",{className:"status-main-stats-hp-body"},m.createElement(y.Z,{max:n.maxHealthPoints||1e3,min:-Math.floor(n.maxHealthPoints/2),disabled:!a,value:n.healthPoints,onChange:e.onChange("stats.healthPoints")}),"/",m.createElement(E.Z,{value:n.maxHealthPoints,readOnly:!0,disabled:!a}))),m.createElement("div",{className:"status-main-stats-ap-wrapper"},m.createElement("div",{className:"status-main-stats-ap"},m.createElement(C.Z,{title:"\u041a\u043b\u0430\u0441\u0441 \u0411\u0440\u043e\u043d\u0438 (\u041a\u0411)"},m.createElement("div",{className:"status-main-stats-ap-total"},"\u041a\u0411")),m.createElement("div",{className:"status-main-stats-ap-change"},"+/-"),m.createElement("div",{className:"status-main-stats-ap-base"},"Base")),m.createElement("div",{className:"status-main-stats-ap"},m.createElement(E.Z,{className:"status-main-stats-ap-total",readOnly:!0,disabled:!a,value:Math.min(95,n.armorClass.total)}),m.createElement(y.Z,{className:"status-main-stats-ap-change",min:1,max:95,disabled:!a,value:n.armorClass.change,onChange:e.onChange("stats.armorClass.change")}),m.createElement(E.Z,{className:"status-main-stats-ap-base",readOnly:!0,disabled:!a,value:n.armorClass.base})))),m.createElement("div",{className:"status-main-stats-info"},S.subStats.slice(3).map((function(t){var r=t.label,s=t.full,c=t.field;return m.createElement(C.Z,{key:c,title:s},m.createElement("div",{className:"status-main-stats-item"},m.createElement("span",{className:"status-main-stats-item-label"},r),m.createElement(E.Z,{className:"status-main-stats-item-input",readOnly:!0,disabled:!a,value:n[c],onChange:e.onChange(["stats",c])})))}))))},e.getControls=function(){var t=e.props.character,a=e.state.character;return m.createElement("div",{className:"status-controls"},m.createElement(Z.Z,{title:"\u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",okText:"\u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",disabled:t===a,onConfirm:function(){e.setState({character:e.props.character}),b.Z.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043a\u0430\u0447\u0435\u043d\u043e!")}},m.createElement(k.Z,{disabled:t===a},m.createElement(h.Z,null),"\u041e\u0442\u043a\u0430\u0442\u0438\u0442\u044c")),m.createElement(Z.Z,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",okText:"\u0414\u0430",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",disabled:t===a,onConfirm:function(){return e.onSave(!0)}},m.createElement(k.Z,{className:"status-save-button",disabled:t===a},m.createElement(p.Z,null),"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))},e.render=function(){var t=e.props,a=t.user,n=t.character,r=t.loading,s=t.hasRight,c=e.state.character;return a&&n&&!r?m.createElement(g.Z,{className:"status",extra:s&&e.getControls(),title:m.createElement(m.Fragment,null,m.createElement(v.Z,null)," ","\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 ",a.nickname)},e.getStatus(c.limbs),e.getMainStats(c)):m.createElement(N.Z,{description:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d"})},e}return(0,l.Z)(a)}(m.Component);t.default=(0,f.EN)((0,d.$j)(x.getStateUser)(j))},3834:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(2791),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},s=a(4291),c=function(e,t){return n.createElement(s.Z,Object.assign({},e,{ref:t,icon:r}))};c.displayName="RollbackOutlined";var l=n.forwardRef(c)},4483:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(2791),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},s=a(4291),c=function(e,t){return n.createElement(s.Z,Object.assign({},e,{ref:t,icon:r}))};c.displayName="SaveOutlined";var l=n.forwardRef(c)},8183:function(e,t,a){a.d(t,{Z:function(){return b}});var n=a(2791),r=a(9901),s=a.n(r),c=a(4469),l=a(4964),i=a(3439),o=a(1104),u=a(9077),m=void 0;function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f.apply(this,arguments)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(i){r=!0,s=i}finally{try{n||null==l.return||l.return()}finally{if(r)throw s}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},v=n.forwardRef((function(e,t){var a=d(n.useState(e.visible),2),r=a[0],s=a[1];n.useEffect((function(){"visible"in e&&s(e.visible)}),[e.visible]),n.useEffect((function(){"defaultVisible"in e&&s(e.defaultVisible)}),[e.defaultVisible]);var h=function(t,a){"visible"in e||s(t),e.onVisibleChange&&e.onVisibleChange(t,a)},v=function(t){h(!1,t),e.onConfirm&&e.onConfirm.call(m,t)},b=function(t){h(!1,t),e.onCancel&&e.onCancel.call(m,t)},g=n.useContext(u.E_).getPrefixCls,y=e.prefixCls,E=e.placement,C=p(e,["prefixCls","placement"]),Z=g("popover",y),k=n.createElement(i.Z,{componentName:"Popconfirm",defaultLocale:o.Z.Popconfirm},(function(t){return function(t,a){var r,s=e.okButtonProps,c=e.cancelButtonProps,i=e.title,o=e.cancelText,u=e.okText,m=e.okType,d=e.icon;return n.createElement("div",{className:"".concat(t,"-inner-content")},n.createElement("div",{className:"".concat(t,"-message")},d,n.createElement("div",{className:"".concat(t,"-message-title")},(r=i)?"function"===typeof r?r():r:null)),n.createElement("div",{className:"".concat(t,"-buttons")},n.createElement(l.Z,f({onClick:b,size:"small"},c),o||a.cancelText),n.createElement(l.Z,f({onClick:v,type:m,size:"small"},s),u||a.okText)))}(Z,t)}));return n.createElement(c.Z,f({},C,{prefixCls:Z,placement:E,onVisibleChange:function(t){e.disabled||h(t)},visible:r,overlay:k,ref:t}))}));v.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:n.createElement(s(),null),disabled:!1};var b=v},22:function(e,t,a){a.r(t),t.default={}},5321:function(e,t,a){a.r(t),t.default={}}}]);
//# sourceMappingURL=66.fcaaec84.chunk.js.map