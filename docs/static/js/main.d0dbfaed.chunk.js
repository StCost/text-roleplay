(this["webpackJsonptext-roleplay"]=this["webpackJsonptext-roleplay"]||[]).push([[0],{195:function(e){e.exports=JSON.parse('[{"label":"\u0427\u0430\u0442","path":"/text-roleplay/chat"},{"label":"\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c","path":"./inventory"},{"label":"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436","path":"./character"},{"label":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","path":"./settings"},{"label":"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u044b","path":"/text-roleplay/items"},{"label":"\u041f\u043e\u043c\u043e\u0449\u044c","path":"/text-roleplay/help"},{"label":"\u0412\u044b\u0439\u0442\u0438","path":"/text-roleplay/logout"}]')},218:function(e,t,a){e.exports=a(416)},227:function(e,t,a){},229:function(e,t,a){},280:function(e,t,a){},301:function(e,t,a){},320:function(e,t,a){},340:function(e,t,a){},343:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){},411:function(e,t,a){},416:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),s=a(23),i=(a(227),a(20)),o=a(25),u=a(24),m=a(76),d=a(80),f=a(429),p=(a(228),a(422)),g=(a(229),a(195));var E=Object(s.b)((function(e){return{isLoggedIn:e.isLoggedIn}}))(Object(m.g)((function(e){if(!e.isLoggedIn)return r.a.createElement(r.a.Fragment,null);var t=window.innerWidth<767?"horizontal":"inline";return r.a.createElement(p.a,{mode:t,selectedKeys:[e.location.pathname.split("/").pop()||""]},g.map((function(t){return r.a.createElement(p.a.Item,{key:t.path.split("/").pop(),disabled:t.path===e.location.pathname},t.link?r.a.createElement("a",{href:t.path,target:"_blank",rel:"noopener noreferrer"},"\u041f\u043e\u043c\u043e\u0449\u044c"):r.a.createElement(d.b,{to:t.path},t.label))})))}))),b=a(437),v=a(418),h=a(426),O=(a(280),a(33)),S=a(4),I=a(68),y=a(215),j=a(199),C=a(53),k=a(62),x=a(90),T=/([1-9]|10)[d\u0434\u1C81]((10|12|20)|[468])/im,w=/([1-9]|10)[d\u0434\u1C81]((10|12|20)|[468])/gim,A=function(e,t){return Math.floor(Math.random()*(t+1-e)+e)},N=function(e){var t=e.match(w);return t?t.map((function(e){var t=e.split(/[d\u0434]/),a=Object(k.a)(t,2),n=a[0],r=a[1],c=parseInt(n),l=parseInt(r),s=function(e,t){return new Array(e).fill(e+t).map((function(){return A(1,t)}))}(c,l);return{maxResult:l*c,minResult:c,sum:s.reduce((function(e,t){return e+t}),0),roll:e,results:s,amount:c,size:l}})).splice(0,10):[]},M=function(e){if(!e)return"#000";for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);for(var n="#",r=0;r<3;r++){n+=("00"+(t>>8*r&255).toString(16)).substr(-2)}return n},_=function(e){return!!e&&(e||parseInt(localStorage.getItem("lastActivity")||"0"))+18e4>(new Date).getTime()},U=function(e){return 1==="".concat(e).length?"0".concat(e):e},G=function(e){var t=new Date(e);return[t.getDate(),t.getMonth()+1,t.getFullYear()].map(U).join(".")},R=function(e){var t=new Date(e);return[[t.getHours(),t.getMinutes(),t.getSeconds()].map(U).join(":"),[t.getDate(),t.getMonth()+1,t.getFullYear()].map(U).join(".")].join(" ")},F=function(e){return/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/gim.test(e)},P=function(e){return e.filter((function(e,t,a){return a.findIndex((function(t){return t.time===e.time}))===t})).sort((function(e,t){return t.time-e.time})).map((function(e,t,a){return t<a.length-2&&e.author===a[t+1].author?Object(S.a)(Object(S.a)({},e),{},{grouped:!0}):e}))},D=function(e){var t=e.body;return T.test(t)&&(e.rolls=N(t)),t.indexOf("*")>-1&&(e.isRP=!0),/(@[a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A]*)/im.test(t)&&(e.mentioned=!0),e},L=function(e){if(!e)return f.a.error("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u0443\u0441\u0442\u043e\u0435"),!1;if(/[0-9]+[d\u0434\u1C81][0-9]+/im.test(e)){var t=e.match(/(( |^)[a-z\u017F\u0430-\u044F\u1C80-\u1C86\u212A]+[0-9]+[d\u0434\u1C81][0-9]+)|([0-9]+[d\u0434\u1C81][0-9]+[a-z\u017F\u0430-\u044F\u1C80-\u1C86\u212A]+( |$))|([0-9]+[d\u0434\u1C81][0-9]+)/gim);if(t)if(t.some((function(e){if(/(([a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A])[0-9]+[d\u0434\u1C81][0-9]+)|([0-9]+[d\u0434\u1C81][0-9]+([a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A]))/gim.test(e))return f.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0434\u0430\u0439\u0441\u0435 ".concat(e,". \u0420\u044f\u0434\u043e\u043c \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),!0;var t=e.split(/[d\u0434]/),a=Object(k.a)(t,2),n=a[0],r=a[1];return parseInt(n)>10?(f.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0434\u0430\u0439\u0441\u0435 ".concat(e,". \u041d\u0435\u043b\u044c\u0437\u044f \u0431\u0440\u043e\u0441\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 10-\u0442\u0438 \u0434\u0430\u0439\u0441\u043e\u0432")),!0):-1===[2,4,6,8,10,12,20].indexOf(parseInt(r))&&(f.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0434\u0430\u0439\u0441\u0435 ".concat(e,". \u041c\u043e\u0436\u043d\u043e \u0431\u0440\u043e\u0441\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u0430\u0439\u0441\u044b \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u0432 4 6 8 10 12 20")),!0)})))return!1}return!0},B=function(e){return{discriminator:"IItem",id:e,type:"misc",name:"\u041e\u0448\u0438\u0431\u043a\u0430",weight:0,time:0,effect:e,image:"",description:"\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",price:0,capacity:0,armor:0,approved:!0,failed:!0,amount:Number.MAX_VALUE}},V=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"".concat(e?"'".concat(e.name,"'"):"\u043f\u0440\u0435\u0434\u043c\u0435\u0442")+(t&&e.amount&&e.amount>=2?" (".concat(e.amount,"\u0448\u0442)"):"")},z={lastOnline:0,nickname:"",avatar:"",isAdmin:!1,uid:"",inventory:{},approved:!1},W={discriminator:"IItem",id:"",type:"junk",name:"",effect:"",image:"",weight:0,price:0,description:"",capacity:0,approved:!1,armor:0,time:0,amount:0},H={itemId:"",deleted:!1,messagesChecked:0,messagesCleared:0,usersChecked:0,usersCleared:0,done:!1},Y=JSON.parse(localStorage.getItem("user")||"null");Y&&localStorage.setItem("uid",Y.uid);var J={userData:Y,isLoggedIn:null!==Y,settings:!1,loading:!1,messages:[],users:{},uid:Y?Y.uid:"",currentUser:null,items:[],error:!1,usersActivity:{},deletingItemData:H},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"GET_MESSAGES":case"GET_MORE_MESSAGES":case"SEND_MESSAGE":case"SET_USER":case"GET_ITEMS":case"GET_MORE_ITEMS":case"GET_ITEMS_BY_ID":case"CREATE_ITEM":case"GIVE_ITEM":case"REMOVE_ITEM":case"PASS_ITEM":case"GET_USERS_ACTIVITY":case"REGISTER":case"RESET_PASSWORD":case"UPLOAD_FILE":return Object(S.a)(Object(S.a)({},e),{},{loading:!0});case"SET_USER_SUCCESS":case"SET_USER_FAIL":case"GET_MESSAGES_FAIL":case"GET_MORE_MESSAGES_SUCCESS":case"GET_MORE_MESSAGES_FAIL":case"GIVE_ITEM_SUCCESS":case"REMOVE_ITEM_SUCCESS":case"REMOVE_ITEM_FAIL":case"PASS_ITEM_SUCCESS":case"PASS_ITEM_FAIL":case"GET_USERS_ACTIVITY_FAIL":case"DELETE_ITEM_FAIL":case"RESET_PASSWORD_FAIL":case"RESET_PASSWORD_SUCCESS":case"SEND_MESSAGE_FAIL":return Object(S.a)(Object(S.a)({},e),{},{loading:!1});case"LOGIN_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{uid:t.user.uid,userData:t.user,isLoggedIn:null!==t.user,currentUser:Object(S.a)(Object(S.a)({},z),{},{uid:t.user.uid}),loading:!1});case"REGISTER_FAIL":case"LOGIN_FAIL":return Object(S.a)(Object(S.a)({},e),{},{loading:!1,error:t.error});case"LOGOUT":return Object(S.a)(Object(S.a)({},e),{},{userData:null,isLoggedIn:!1});case"GET_MESSAGES_SUCCESS":var a=t.concat?[].concat(Object(C.a)(e.messages),Object(C.a)(t.messages)):t.messages;return Object(S.a)(Object(S.a)({},e),{},{messages:P(a),loading:!1});case"GET_USER_SUCCESS":var n=t.user.uid===e.uid?t.user:e.currentUser;return Object(S.a)(Object(S.a)({},e),{},{currentUser:n,users:Object(S.a)(Object(S.a)({},e.users),{},Object(O.a)({},t.uid,t.user))});case"GET_ITEMS_SUCCESS":var r={};return[].concat(Object(C.a)(e.items),Object(C.a)(t.items)).forEach((function(e){return r[e.id]=e})),Object(S.a)(Object(S.a)({},e),{},{loading:!1,items:Object.values(r)});case"NOTIFY":return Object(S.a)(Object(S.a)({},e),{},{notify:t.message});case"NOTIFY_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{notify:void 0});case"REDIRECT":return Object(S.a)(Object(S.a)({},e),{},{redirect:t.to});case"REDIRECT_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{redirect:void 0});case"GET_USERS_ACTIVITY_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{loading:!1,usersActivity:t.usersActivity});case"DELETE_ITEM":return Object(S.a)(Object(S.a)({},e),{},{loading:!0,deletingItemData:{itemId:t.id,defaultDeletedItemData:H}});case"DELETE_ITEM_PROGRESS":return Object(S.a)(Object(S.a)({},e),{},{deletingItemData:Object(S.a)(Object(S.a)({},e.deletingItemData),{},Object(O.a)({},t.field,t.value))});case"DELETE_ITEM_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{loading:!1,items:e.items.filter((function(e){return e.id!==t.id}))});default:return e}},K=Object(y.a)(),q=Object(I.createStore)(Z,J,Object(j.composeWithDevTools)(Object(I.applyMiddleware)(K))),X=q.dispatch,Q=function(e){return function(t){return X(Object(S.a)({type:e},t))}},$=function(e){var t,a=e.toLowerCase().replace(/_./g,(function(e){return e.toUpperCase()})).replace(/_/g,"");return t={},Object(O.a)(t,a,Q(e)),Object(O.a)(t,"".concat(a,"Success"),Q("".concat(e,"_SUCCESS"))),Object(O.a)(t,"".concat(a,"Fail"),Q("".concat(e,"_FAIL"))),t},ee=Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)({},$("LOGIN")),$("REGISTER")),$("RESET_PASSWORD")),$("GET_USER")),$("GET_MESSAGES")),$("GET_MORE_MESSAGES")),$("SET_USER")),$("SEND_MESSAGE")),$("CHANGE_MESSAGE")),$("SUBSCRIBE")),$("UNSUBSCRIBE")),$("UPLOAD_FILE")),$("SET_ITEM")),$("DELETE_ITEM")),$("GET_ITEMS")),$("GET_ITEM_BY_ID")),$("GET_MORE_ITEMS")),$("GIVE_ITEM")),$("REMOVE_ITEM")),$("PASS_ITEM")),$("TAKE_ITEM")),$("NOTIFY")),$("REDIRECT")),$("GET_USERS_ACTIVITY")),$("DELETE_ITEM")),{},{deleteItemProgress:Q("DELETE_ITEM_PROGRESS"),updateLastOnline:Q("UPDATE_LAST_ONLINE"),logout:Q("LOGOUT")}),te=a(430),ae=a(132),ne=a(417),re=function(e){var t=e.avatar,a=e.nickname,n=e.style,c=Object(ae.a)(e,["avatar","nickname","style"]),l=F(t)?t:"";return r.a.createElement(ne.a,Object.assign({src:l,style:Object(S.a)(Object(S.a)({},n),{},{backgroundColor:l?"transparent":M(a)})},c),a&&a.substr(0,5))},ce=a(425),le=a(432),se=a(35),ie=a(436),oe=a(120),ue=a(423),me=a(434),de=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1},e.toggleModal=function(){e.setState({visible:!e.state.visible})},e}return Object(oe.a)(a,[{key:"render",value:function(){var e=this.props.src;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{onClick:this.toggleModal,src:e,alt:"",className:"chat-image"}),r.a.createElement(ue.a,{title:r.a.createElement("div",null,r.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},e),r.a.createElement(me.a,{onClick:this.toggleModal})),className:"image-modal",closable:!1,footer:null,visible:this.state.visible,onCancel:this.toggleModal,width:"fit-content"},r.a.createElement("img",{style:{maxWidth:"90vw"},src:e,alt:""})))}}]),a}(n.Component),fe=a(435),pe=(a(301),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).getStats=function(){var t=e.props.item,a=t.type,n=t.armor,r=t.capacity;switch(a){case"wearable":return n;case"weapon":return r;default:var c=e.props.amount||e.props.item.amount;return!!(c&&c>=2)&&"".concat(c,"\u0448\u0442")}},e.labels={wearable:"\u0417\u0430\u0449\u0438\u0442\u0430",weapon:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"},e.getFooter=function(){var t=e.props,a=t.footer,n=t.uid,c=e.props.item,l=c.failed,s=c.id;return l?r.a.createElement("div",{className:"item-footer"},r.a.createElement(se.a,{disabled:!n,onClick:function(){return ee.removeItem({uid:n,id:s,all:!0})}},r.a.createElement(fe.a,null))):!!a&&r.a.createElement("div",{className:"item-footer"},a)},e.render=function(){var t=e.props,a=t.disabled,n=t.item,c=n.name,l=void 0===c?n.id:c,s=n.price,i=void 0===s?0:s,o=n.description,u=n.image,m=n.effect,d=n.weight,f=void 0===d?0:d,p=n.type,g=n.approved,E=e.getStats();return r.a.createElement(te.a,{className:"item ".concat(g&&!a?"":"disabled")},r.a.createElement("div",{className:"item-info"},r.a.createElement("div",{className:"item-name"},l),r.a.createElement("div",{className:"item-subinfo"},r.a.createElement("div",{className:"item-price"},i>0&&"\u0426\u0435\u043d\u0430: ".concat(i)),r.a.createElement("div",{className:"item-weight"},f>0&&"\u0412\u0435\u0441: ".concat(f,"lb")))),(u||o)&&r.a.createElement("div",{className:"item-body"},u&&r.a.createElement("div",{className:"item-image"},r.a.createElement(re,{avatar:u,nickname:l,shape:"square"})),o),(E||m)&&r.a.createElement("div",{className:"item-prefooter"},r.a.createElement("div",{className:"item-ammo"},E?"".concat(e.labels[p]||"\u041a\u043e\u043b-\u0432\u043e",": ").concat(E):""),r.a.createElement("div",{className:"item-effect"},m)),e.getFooter())},e}return a}(n.Component)),ge=Object(s.b)((function(e,t){return{item:e.items.find((function(e){return e.id===t.id}))}}))((function(e){var t=e.id,a=e.item,n=Object(ae.a)(e,["id","item"]);return a?r.a.createElement(pe,Object.assign({item:a},n)):(ee.getItemById({id:t}),r.a.createElement(r.a.Fragment,null))})),Ee=function(e){var t=e.uid,a=e.message,n=a.body,c=a.isRP,l=a.rolls,s=a.data;if(s){var i=s.itemId,o=s.taken,u=s.amount,m=s.type,d=s.characterChanges;if(d){var f=Object.values(d),p=function(e){switch(typeof e){case"string":case"number":return e;default:return[e.base&&"b:".concat(e.base),e.change&&"".concat(e.base?" + ":"","c:").concat(e.change),e.total&&" = t:".concat(e.total)].filter(Boolean).join("")}};return r.a.createElement(ce.a,null,r.a.createElement(ce.a.Panel,{key:"char-changes",header:n},f.map((function(e){var t=e.label,a=e.full,n=e.before,c=e.after;return r.a.createElement("div",{key:t,className:"chat-char-changes"},r.a.createElement(x.a,{title:a},r.a.createElement("span",null,t)),r.a.createElement("div",null,r.a.createElement(h.a,{value:p(n),readOnly:!0}),"->",r.a.createElement(h.a,{value:p(c),readOnly:!0})))}))))}if(i)return r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"rp-message"},n),r.a.createElement("div",{className:o?"":"rp-message"},r.a.createElement(ge,{id:i.trim(),amount:u,disabled:o,footer:t&&m?r.a.createElement(le.a,{title:"\u041f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442?",onConfirm:function(){return ee.takeItem({uid:t,message:a,data:s})},okText:"\u041f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",disabled:o},r.a.createElement(se.a,{className:"take-button",disabled:o},r.a.createElement(ie.a,null))):void 0})))}if(F(n)){if(/\.(gif|jpe?g|tiff|png|webp|bmp)/gi.test(n))return r.a.createElement(de,{src:n});var g=r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},n);if(n.indexOf("youtu")>-1){var E=new URL(n).searchParams,b="listType=playlist",v=function(e){if(!(e.indexOf("youtu.be")>-1))return new URL(e).searchParams.get("v")||"";var t=e.match(/youtu\.be\/.* /i);if(t){var a=t.pop();if(a)return a.split("/").pop()||""}return""}(n);if(v){var O=E.get("list");O&&(b+="&list="+O);var S=E.get("t");return S&&(b+="&start="+S),r.a.createElement(r.a.Fragment,null,g,r.a.createElement("iframe",{title:v,id:"ytplayer",width:"100%",height:"360",src:"https://www.youtube.com/embed/".concat(v,"?").concat(b),frameBorder:"0",allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))}}return g}var I=l?function(e,t){var a=Object(C.a)(t);return e.split(" ").map((function(e,t){var n=a.findIndex((function(t){return t.roll===e}));if(n>-1){var c=a.splice(n,1)[0],l=c.results,s=c.maxResult,i=c.minResult,o=c.sum,u=l.length>1?"".concat(o," = ").concat(l.join(" + ")):"".concat(l.join(" + ")),m=(o===s?"critHit":o===i&&"critMiss")||"";return r.a.createElement(r.a.Fragment,{key:e+t}," ",r.a.createElement(x.a,{title:u},r.a.createElement("b",{className:m},e,"(",o,")")))}return" ".concat(e)}))}(n,l):n;return c?r.a.createElement("i",{className:"rp-message"},I):r.a.createElement("span",null,I)},be=function(e){var t=e.message,a=t.time,n=t.grouped,c=t.body,l=t.mentioned,s=t.author,i=e.user,o=e.uid,u=i&&r.a.createElement(d.b,{to:"./".concat(s,"/settings")},r.a.createElement(x.a,{title:i.lastOnline?"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c: ".concat(R(i.lastOnline)):void 0,placement:"left"},r.a.createElement("div",{className:"chat-message__title ".concat(_(i.lastOnline)?"online":"")},r.a.createElement(re,{avatar:i.avatar,nickname:i.nickname||i.uid||s}),r.a.createElement("div",{className:"chat-message__nickname"},i.nickname||i.uid||s))));return r.a.createElement(te.a,{className:"chat-message ".concat(n?"grouped":""," ").concat(l&&i&&c.indexOf("@".concat(i.nickname," "))>-1?"mentioned":""),title:n?void 0:u,key:a},r.a.createElement(x.a,{title:G(a),placement:"left"},r.a.createElement("div",{className:"chat-time"},function(e){var t=new Date(e);return[t.getHours(),t.getMinutes(),t.getSeconds()].map(U).join(":")}(a))),r.a.createElement(Ee,{message:e.message,uid:o}))},ve=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={message:"",sending:!1},e.componentDidMount=function(){ee.getMessages({}),ee.subscribe({}),e.setState({message:localStorage.getItem("message")||""})},e.componentWillUnmount=function(){ee.unsubscribe({})},e.componentDidUpdate=function(t){var a=e.props,n=a.messages,r=a.users;e.state.sending&&t.messages!==n&&(localStorage.setItem("message",""),e.setState({message:"",sending:!1})),n.forEach((function(e){r[e.author]||ee.getUser({uid:e.author})}))},e.onChangeMessage=function(t){var a=t.target.value;localStorage.setItem("message",a),e.setState({message:a})},e.onKeyDown=function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),e.onSendMessage());var a=e.props.uid;if("Up"===t.key||"ArrowUp"===t.key){var n=e.props.messages.find((function(e){return e.author===a}));if(n){var r=t.currentTarget,c=r.value,l=r.selectionStart;if(1===c.substr(0,l).split("\n").length){var s=n.body;localStorage.setItem("message",s),e.setState({message:s})}}}},e.onSendMessage=function(){var t=e.state.message,a=e.props,n=a.user,r=a.loading,c=a.uid;r||(n?n.nickname?n.approved?L(t)&&(e.setState({sending:!0}),ee.sendMessage({uid:c,message:t})):f.a.error("\u0410\u0434\u043c\u0438\u043d \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u043d\u0435 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043b \u0412\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"):f.a.error("\u041d\u0438\u043a\u043d\u0435\u0439\u043c \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d. \u041f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438 \u043d\u0430\u0437\u043e\u0432\u0438\u0442\u0435 \u0441\u0435\u0431\u044f"):f.a.error("\u0414\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"))},e.getMoreMessages=function(){ee.getMoreMessages({firstMessage:e.props.messages[e.props.messages.length-1]})},e.onScroll=function(t){t.currentTarget.scrollTop<=50&&(t.preventDefault(),e.getMoreMessages())},e.uploadFile=function(t,a){var n=e.props.uid;t&&(t.type.indexOf("image")>-1?ee.uploadFile({uid:n,file:t}):f.a.error("\u0422\u043e\u043b\u044c\u043a\u043e \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u044b"),a.preventDefault())},e.onPaste=function(t){e.uploadFile(t.clipboardData.files[0],t)},e.onDrop=function(t){var a=t.dataTransfer.items[0].getAsFile();a&&e.uploadFile(a,t)},e.render=function(){var t=e.props,a=t.messages,n=t.loading,c=t.users,l=t.uid;return r.a.createElement(v.a,{spinning:n},r.a.createElement("div",{className:"chat-wrapper"},r.a.createElement("div",{className:"chat-body",onScroll:e.onScroll},a.map((function(e){return r.a.createElement(be,{key:e.time,message:e,user:c[e.author],uid:l})}))),r.a.createElement("div",{className:"chat-controls"},r.a.createElement(h.a.TextArea,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",autoSize:{minRows:1,maxRows:10},onChange:e.onChangeMessage,onKeyDown:e.onKeyDown,value:e.state.message,onPaste:e.onPaste,onDrop:e.onDrop}),r.a.createElement(b.a,{onClick:e.onSendMessage}))))},e}return a}(n.Component),he=Object(s.b)((function(e){var t=e.messages,a=e.uid,n=e.loading,r=e.users;return{messages:t,uid:a,loading:n,users:r,user:r[a]}}))(ve),Oe=a(419),Se=a(438),Ie=function(){return r.a.createElement("svg",{viewBox:"64 64 896 896",focusable:"false",className:"anticon-spin","data-icon":"sync",width:"1em",height:"1em",fill:"#ff4d4f","aria-hidden":"true"},r.a.createElement("path",{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}))},ye=function(){return r.a.createElement("svg",{viewBox:"64 64 896 896",focusable:"false",className:"","data-icon":"check-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},r.a.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:"#52c41a"}),r.a.createElement("path",{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:"transparent"}),r.a.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:"#52c41a"}))},je=function(e){var t=e.loading;return r.a.createElement("div",{className:"loader"},t?r.a.createElement(Ie,null):r.a.createElement(ye,null))},Ce=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).componentDidMount=function(){var t=e.props,a=t.user,n=t.uid;a||ee.getUser({uid:n})},e.rawOnChange=function(t,a){var n=e.props.user;if(n){var r=Object(S.a)(Object(S.a)({},n),{},Object(O.a)({},t,a));e.setSettings(r)}},e.onChange=function(t){return function(a){return e.rawOnChange(t,a.target.value)}},e.setSettings=function(t){var a=e.props.user;a&&ee.setUser({uid:a.uid,user:t})},e.clearAvatar=function(){return e.setSettings(Object(S.a)(Object(S.a)({},e.props.user),{},{avatar:""}))},e.getField=function(t,a,n){var c=n.nickname,l=void 0===c?"":c,s=e.props,i=s.hasRight,o=s.currentUser,u=s.uid,m=!i;switch(t){case"avatar":return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(h.a,{value:a,onChange:e.onChange(t),readOnly:m}),r.a.createElement(le.a,{title:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440?",onConfirm:e.clearAvatar,okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:r.a.createElement(Se.a,{style:{color:"#ff4d4f"}}),disabled:!a},r.a.createElement(se.a,{disabled:m||!a,danger:!0},r.a.createElement(Se.a,null)))),r.a.createElement(re,{avatar:a,nickname:l||u,size:128,style:{margin:"8px auto",display:"block"}}));case"uid":return r.a.createElement(h.a,{value:a,readOnly:!0});case"lastOnline":return a?r.a.createElement(h.a,{value:R(parseInt(a)),readOnly:!0}):"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0435\u0449\u0451 \u043d\u0435 \u0431\u044b\u043b \u0430\u043a\u0442\u0438\u0432\u0435\u043d";case"approved":return r.a.createElement(r.a.Fragment,null,i&&o&&o.uid!==u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{checked:!!a,onChange:function(a){return e.rawOnChange(t,a)}})),a?"\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d":"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d");case"isAdmin":return r.a.createElement(r.a.Fragment,null,i&&o&&o.uid!==u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{checked:!!a,onChange:function(a){return e.rawOnChange(t,a)}})),a?"\u0418\u043c\u0435\u044e\u0442\u0441\u044f":"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442");default:return r.a.createElement(h.a,{defaultValue:a,onChange:e.onChange(t),readOnly:m})}},e.labels={avatar:"\u0410\u0432\u0430\u0442\u0430\u0440",nickname:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c",lastOnline:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c",isAdmin:"\u041f\u0440\u0430\u0432\u0430 \u0430\u0434\u043c\u0438\u043d\u0430",uid:"UID",approved:"\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d"},e.render=function(){var t=e.props,a=t.user,n=t.loading;return r.a.createElement(te.a,{className:"settings",bordered:!1,loading:void 0===a,title:a&&"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438\u0433\u0440\u043e\u043a\u0430 ".concat(a.nickname||a.uid)},r.a.createElement(je,{loading:n}),a&&Object.keys(z).map((function(t){var n=e.labels[t];return n&&r.a.createElement(te.a,{className:t,key:t,title:n},e.getField(t,"".concat(a[t]||""),a))})))},e}return a}(r.a.Component),ke=Object(s.b)((function(e,t){var a=e.loading,n=e.users,r=e.currentUser,c=new URLSearchParams(t.match.params).get("uid")||e.uid||"0",l=n[c];return l&&!l.uid&&c&&(l.uid=c),{loading:a,user:l,uid:c,hasRight:!!l&&!!r&&(r.uid===l.uid||!!r.isAdmin),currentUser:r}}))(Ce),xe=function(){return r.a.createElement(te.a,null,r.a.createElement(ne.a,{src:"https://cdn.lowgif.com/full/fc3d7d9abd06a92e-hi-bear-gifs-get-the-best-gif-on-giphy.gif",size:256,style:{margin:"0 auto",display:"block"}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(se.a,{type:"primary",size:"large",onClick:function(){return ee.logout({})},style:{width:"100%"}},"\u0412\u044b\u0439\u0442\u0438"))},Te=a(427),we=a(433),Ae=a(440),Ne=(a(320),a(99)),Me=a(421),_e=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={},e.labels={id:"ID",type:"\u0422\u0438\u043f*",name:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435*",weight:"\u0412\u0435\u0441",effect:"\u042d\u0444\u0444\u0435\u043a\u0442",image:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",price:"\u0426\u0435\u043d\u0430",capacity:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430",armor:"\u0417\u0430\u0449\u0438\u0442\u0430",approved:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043d"},e.types=[{key:"weapon",value:"\u041e\u0440\u0443\u0436\u0438\u0435"},{key:"wearable",value:"\u041e\u0434\u0435\u0436\u0434\u0430/\u0411\u0440\u043e\u043d\u044f"},{key:"usable",value:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0435"},{key:"ammo",value:"\u041f\u0430\u0442\u0440\u043e\u043d\u044b"},{key:"misc",value:"\u041f\u0440\u043e\u0447\u0435\u0435"},{key:"note",value:"\u0417\u0430\u043f\u0438\u0441\u043a\u0430"},{key:"key",value:"\u041a\u043b\u044e\u0447"},{key:"junk",value:"\u041c\u0443\u0441\u043e\u0440"}],e.onChange=function(t,a){return e.setState(Object(O.a)({},t,a))},e.clearImage=function(){return e.setState({image:""})},e.fields={id:function(){return!1},type:function(t,a){return r.a.createElement(Me.a,{value:t,onChange:function(t){return e.onChange(a,t)}},e.types.map((function(e){var t=e.key,a=e.value;return r.a.createElement(Me.a.Option,{value:t,key:t},a)})))},name:function(t,a){return r.a.createElement(h.a,{value:t,onChange:function(t){return e.onChange(a,t.currentTarget.value)}})},weight:function(t,a){return r.a.createElement(we.a,{value:t,min:0,precision:2,onChange:function(t){return e.onChange(a,t||0)},step:.01})},effect:function(t,a){return r.a.createElement(h.a,{value:t,onChange:function(t){return e.onChange(a,t.currentTarget.value)}})},image:function(t,a){return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(h.a,{value:t,onChange:function(t){return e.onChange(a,t.currentTarget.value)}}),r.a.createElement(le.a,{title:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443?",onConfirm:e.clearImage,okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",icon:r.a.createElement(Se.a,{style:{color:"#ff4d4f"}})},r.a.createElement(se.a,{disabled:!t,danger:!0},r.a.createElement(Se.a,null)))),r.a.createElement(re,{shape:"square",avatar:t,nickname:t,size:128,style:{margin:"8px auto",display:"block"}}))},description:function(t,a){return r.a.createElement(h.a.TextArea,{value:t,onChange:function(t){return e.onChange(a,t.currentTarget.value)}})},price:function(t,a){return r.a.createElement(we.a,{value:t,min:0,step:1,onChange:function(t){return e.onChange(a,t||0)}})},capacity:function(t,a,n){return"weapon"===n.type&&r.a.createElement(we.a,{value:t,min:1,step:1,onChange:function(t){return e.onChange(a,t||1)}})},armor:function(t,a,n){return"wearable"===n.type&&r.a.createElement(we.a,{value:t,min:0,step:1,onChange:function(t){return e.onChange(a,t||0)}})},approved:function(t,a){return e.props.isAdmin&&r.a.createElement(Oe.a,{checked:t,disabled:!e.props.isAdmin,onChange:function(t){return e.onChange(a,t)}})}},e.getField=function(t,a,n){var r=e.fields[t];return r&&r(a,t,n)},e.onSubmit=function(){var t=e.props.onSubmit,a={};Object.keys(W).forEach((function(t){a[t]=e.getValue(t)}));if("IItem"!==a.discriminator)return f.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430!"),void console.error(a);a.name?(t(a),e.setState({})):f.a.error("\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c")},e.getValue=function(t){var a=Object(Ne.a)(e).state,n=e.props.item,r=a[t],c=n?n[t]:void 0;return void 0!==r?r:void 0!==c?c:W[t]},e.content=function(){var t=Object(Ne.a)(e).state;return r.a.createElement("div",{className:"item-creator"},r.a.createElement("div",{className:"item-creator__body"},Object.keys(W).map((function(a){var n=e.getField(a,e.getValue(a),t);return n&&r.a.createElement(te.a,{className:a,key:a,title:e.labels[a]},n)}))),r.a.createElement("div",{className:"item-creator__controls"},r.a.createElement(le.a,{title:"\u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u043e\u0431\u043d\u0443\u043b\u0435\u043d\u044b",onConfirm:function(){return e.setState(W)},okText:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",icon:r.a.createElement(Se.a,{style:{color:"#ff4d4f"}})},r.a.createElement(se.a,null,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c")),r.a.createElement(le.a,{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",onConfirm:e.onSubmit,okText:"\u0413\u043e\u0442\u043e\u0432\u043e",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",icon:r.a.createElement(Se.a,{style:{color:"#15395b"}})},r.a.createElement(se.a,null,"\u0413\u043e\u0442\u043e\u0432\u043e"))))},e.render=function(){var t=e.props,a=t.onClose,n=t.visible;return r.a.createElement(ue.a,{className:"item-creator-modal",centered:!0,closable:!1,onCancel:a,footer:null,visible:n,title:r.a.createElement(me.a,{onClick:a})},e.content())},e}return a}(n.Component),Ue=a(93),Ge=a(439),Re=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).getFooter=function(t){var a=e.props.controls;if(a){var n=a.map((function(e){var a=e.label,n=e.onClick,c=(e.isAdmin,e.condition);return!(c&&!c(t))&&r.a.createElement(p.a.Item,{key:a},r.a.createElement(se.a,{onClick:function(){return n&&n(t)}},a))})).filter(Boolean);if(0!==n.length)return r.a.createElement(Te.a,{overlay:r.a.createElement(p.a,null,n),trigger:["click"]},r.a.createElement(se.a,null,r.a.createElement(Ge.a,null)))}},e.render=function(){var t=e.props,a=t.items,n=t.uid;return a&&0!==a.length?r.a.createElement("div",{className:"items-body"},a.map((function(t){return r.a.createElement(pe,{key:t.id+t.time,item:t,footer:e.getFooter(t),uid:n})}))):r.a.createElement(Ue.a,{description:"\u041d\u0435\u0442 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432"})},e}return a}(n.Component),Fe=a(428),Pe=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).defaultState={searchString:"",showApproved:!0,showNotApproved:!1,filters:{weapon:!0,usable:!0,wearable:!0,junk:!0,ammo:!0,note:!0,key:!0,misc:!0}},e.getFilters=function(t){var a=t.showNotApproved,n=t.showApproved,c=t.filters,l=function(t,a){return r.a.createElement("div",{tabIndex:0,className:"items-approved-button",onClick:function(){return e.setState({filters:Object(S.a)(Object(S.a)({},c),{},Object(O.a)({},t,!c[t]))})}},r.a.createElement(Oe.a,{checked:c[t]}),a)};return r.a.createElement(Fe.a.Group,{defaultValue:void 0,style:{display:"flex",flexDirection:"column"}},l("weapon","\u041e\u0440\u0443\u0436\u0438\u0435"),l("usable","\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u043e\u0435"),l("wearable","\u041e\u0434\u0435\u0436\u0434\u0430/\u0411\u0440\u043e\u043d\u044f"),l("ammo","\u041f\u0430\u0442\u0440\u043e\u043d\u044b"),l("junk","\u041c\u0443\u0441\u043e\u0440"),l("note","\u0417\u0430\u043f\u0438\u0441\u043a\u0438"),l("key","\u041a\u043b\u044e\u0447\u0438"),l("misc","\u041f\u0440\u043e\u0447\u0435\u0435"),r.a.createElement("div",{tabIndex:0,className:"items-approved-button",onClick:function(){return e.setState({showApproved:!n})}},r.a.createElement(Oe.a,{checked:n}),"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435"),r.a.createElement("div",{tabIndex:0,className:"items-approved-button",onClick:function(){return e.setState({showNotApproved:!a})}},r.a.createElement(Oe.a,{checked:a}),"\u041d\u0435 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u044b\u0435"))},e.getPageControls=function(){return[]},e.getHeader=function(){return r.a.createElement("div",{className:"items-controls"},e.getPageControls())},e.getContent=function(){return r.a.createElement(r.a.Fragment,null)},e.getFooter=function(){return r.a.createElement(r.a.Fragment,null)},e.getTitle=function(){},e.render=function(){var t=e.props.loading,a=e.items;return r.a.createElement(te.a,{className:"items",title:e.getTitle()},r.a.createElement(je,{loading:t}),e.getHeader(a),e.getContent(a),e.getFooter(a))},e}return Object(oe.a)(a,[{key:"items",get:function(){var e=this.state,t=e.searchString,a=e.filters,n=e.showApproved,r=e.showNotApproved,c=t.toLowerCase();return this.props.items.filter((function(e){var t=e.name,l=e.description,s=e.effect,i=e.type,o=e.approved;return(t&&t.toLowerCase().indexOf(c)>-1||l&&l.toLowerCase().indexOf(c)>-1||s&&s.toLowerCase().indexOf(c)>-1)&&a[i]&&(n&&!0===o||r&&!1===o)}))}}]),a}(n.Component),De=a(424),Le=function(e){var t=e.item,a=e.inputProps,c=e.onChange,l=e.max,s=Object(n.useState)(1),i=Object(k.a)(s,2),o=i[0],u=i[1],m=function(e){"number"===typeof e&&(u(e||1),c&&c(e||1))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(we.a,Object.assign({defaultValue:1,value:o,min:1,max:l||t.amount,onChange:m},a||{})),r.a.createElement(De.a,{value:o,defaultValue:1,min:1,max:l||t.amount,onChange:m,dots:(l||t.amount||10)<=12}))},Be=function(e){var t=e.item,a=e.onSubmit,n=e.modalProps,c=e.max,l=c&&c>=2||!c&&t.amount&&t.amount>=2,s=l?"\u0421\u043a\u043e\u043b\u044c\u043a\u043e? (\u043c\u0430\u043a\u0441. ".concat(c||t.amount,"\u0448\u0442)"):"\u0423\u0432\u0435\u0440\u0435\u043d\u044b?",i=1;ue.a.confirm(Object(S.a)({title:s,className:"amount-modal",content:l&&r.a.createElement(Le,Object.assign({},e,{onChange:function(e){"number"===typeof e&&(i=e)}})),onOk:function(e){a&&a(i),e()},okText:"\u0413\u043e\u0442\u043e\u0432\u043e",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",maskClosable:!0,centered:!0},n||{}))},Ve=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state=Object(S.a)(Object(S.a)({},e.defaultState),{},{creatingItem:!1,editingItem:null,itemsToLoad:99}),e.componentDidMount=function(){ee.getItems({})},e.getPageControls=function(){return[r.a.createElement(se.a,{key:"creator",onClick:function(){return e.toggleCreatingItem(!0)},disabled:!e.props.currentUser||!e.props.currentUser.approved},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442"),r.a.createElement(h.a,{key:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430",onChange:function(t){return e.setState({searchString:t.currentTarget.value})},allowClear:!0}),r.a.createElement(Te.a,{key:"filters",overlay:e.getFilters(e.state),trigger:["click"]},r.a.createElement(se.a,null,r.a.createElement(Ae.a,null))),r.a.createElement(x.a,{key:"load-amount",title:"\u041a\u043e\u043b-\u0432\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0445 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 \u0437\u0430 \u0440\u0430\u0437"},r.a.createElement(we.a,{value:e.state.itemsToLoad,min:1,max:99,onChange:function(t){return e.setState({itemsToLoad:t||1})}}))]},e.cardControls=[{label:"\u0412\u0437\u044f\u0442\u044c",onClick:function(t){return Be({item:t,max:100,onSubmit:function(a){return ee.giveItem({id:t.id,uid:e.props.uid,itemType:t.type,amount:a})}})},condition:function(t){return t.approved&&Boolean(e.props.currentUser&&e.props.currentUser.isAdmin)}},{label:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",onClick:function(t){return e.toggleEditingItem(t)},condition:function(t){return Boolean(e.props.uid===t.author&&!t.approved||e.props.currentUser&&e.props.currentUser.isAdmin)}},{label:"\u0412 \u043a\u043e\u043d\u0441\u043e\u043b\u044c",onClick:console.log,condition:function(){return Boolean(e.props.currentUser&&e.props.currentUser.isAdmin)}},{label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:function(t){return e.deleteModal(t)},condition:function(t){return Boolean(e.props.uid===t.author&&!t.approved||e.props.currentUser&&e.props.currentUser.isAdmin)}}],e.toggleCreatingItem=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!e.state.creatingItem;return e.setState({creatingItem:t})},e.toggleEditingItem=function(t){return e.setState({editingItem:t||null})},e.onCreateItem=function(t){ee.setItem({item:t}),e.toggleCreatingItem(!1),e.toggleEditingItem(null)},e.getCreators=function(){var t=e.state,a=t.creatingItem,n=t.editingItem,c=e.props.currentUser,l=!!c&&c.isAdmin&&c.approved;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{visible:a,onClose:function(){return e.toggleCreatingItem(!1)},onSubmit:e.onCreateItem,isAdmin:l}),r.a.createElement(_e,{visible:!!n,onClose:function(){return e.toggleEditingItem(null)},onSubmit:e.onCreateItem,item:n||void 0,isAdmin:l}))},e.deleteModal=function(e){return ue.a.confirm({title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",content:"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",maskClosable:!0,okText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onOk:function(t){ee.deleteItem({id:e.id}),t()}})},e.getContent=function(t){var a=e.props.currentUser;return r.a.createElement(Re,{items:t,currentUser:a,controls:e.cardControls})},e.getDeletingModal=function(){var t=e.props,a=t.deletingItemData,n=t.loading,c=a.itemId,l=a.usersChecked,s=a.messagesCleared,i=a.messagesChecked,o=a.deleted,u=a.usersCleared,m=a.done;return c&&r.a.createElement("div",{className:"item-deleting-modal"},r.a.createElement("div",null,"ID \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430: ",c),r.a.createElement("div",null,"\u0423\u0434\u0430\u043b\u0451\u043d \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432: ",o?"\u0433\u043e\u0442\u043e\u0432\u043e":"\u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435"),r.a.createElement("div",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439: ",i),r.a.createElement("div",null,"\u041e\u0447\u0438\u0449\u0435\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439: ",s),r.a.createElement("div",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439: ",l),r.a.createElement("div",null,"\u041e\u0447\u0438\u0449\u0435\u043d\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439: ",u),r.a.createElement(se.a,{onClick:function(){return ee.deleteItemProgress({field:"itemId",value:""})},disabled:!m||n},"\u0413\u043e\u0442\u043e\u0432\u043e"),r.a.createElement("button",{className:"secret",onClick:function(){return ee.deleteItemProgress({field:"itemId",value:""})},disabled:n}))},e.getTitle=function(){return!e.props.loading&&"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ".concat(e.props.items.length)},e.getFooter=function(t){var a=e.state.itemsToLoad,n=e.props.loading;return r.a.createElement(r.a.Fragment,null,e.getCreators(),e.getDeletingModal(),!n&&r.a.createElement(se.a,{className:"items-load-button",onClick:function(){return ee.getMoreItems({amount:a,lastItem:t[t.length-1]})}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c ",a,"\u0448\u0442"))},e}return a}(Pe),ze=Object(s.b)((function(e){return{loading:e.loading,currentUser:e.currentUser,uid:e.uid,items:e.items,deletingItemData:e.deletingItemData}}))(Ve),We=(a(340),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).componentDidMount=function(){ee.getUsersActivity({})},e.componentDidUpdate=function(){var t=e.props,a=t.activeUsers,n=t.users;!t.loading&&a.length>0&&a.forEach((function(e){n[e]||ee.getUser({uid:e})}))},e.render=function(){var t=e.props,a=t.activeUsers,n=t.users,c=t.onClick,l=a.filter((function(e){return n[e]&&n[e].uid})).map((function(e){return n[e]}));return r.a.createElement(p.a,{className:"active-users"},l.map((function(e){return r.a.createElement("div",{className:"active-users__item",key:e.uid,onClick:function(){return c(e)}},r.a.createElement("div",{className:"active-users__body ".concat(_(e.lastOnline)?"online":"")},r.a.createElement(re,{avatar:e.avatar,nickname:e.nickname}),r.a.createElement("div",{className:"active-users__nickname"},e.nickname||e.uid)),e.lastOnline&&r.a.createElement("div",{className:"active-users__online"},R(e.lastOnline)))})))},e}return a}(n.Component)),He=Object(s.b)((function(e){var t=e.usersActivity,a=e.uid,n=e.loading;return{users:e.users,activeUsers:Object.keys(t),uid:a,loading:n}}))(We),Ye=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state=Object(S.a)(Object(S.a)({},e.defaultState),{},{editingItem:null,passItem:null}),e.componentDidMount=function(){var t=e.props,a=t.user,n=t.uid;!a&&n&&ee.getUser({uid:n})},e.getPageControls=function(){return[r.a.createElement(h.a,{key:"search",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430",onChange:function(t){return e.setState({searchString:t.currentTarget.value})},allowClear:!0}),r.a.createElement(Te.a,{key:"filters",overlay:e.getFilters(e.state),trigger:["click"]},r.a.createElement(se.a,null,r.a.createElement(Ae.a,null))),e.getPassModal()]},e.getInventoryItems=function(t){var a=e.props,n=a.inventory,r=a.loading;if(n&&!r){var c=Object.values(n),l=[],s=[];return c.forEach((function(e){var a=e.id,n=t.find((function(e){return e.id===a}));n?l.push(Object(S.a)(Object(S.a)({},n),e)):s.push(a)})),s.length>0&&ee.getItemById({id:s.shift()}),l}return[]},e.passItem=function(t){return e.setState({passItem:t||null})},e.getPassModal=function(){var t=e.state.passItem;return r.a.createElement(ue.a,{key:"pass-modal",visible:!!t,closable:!1,footer:r.a.createElement(se.a,{onClick:function(){return e.passItem(null)}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")},r.a.createElement(He,{onClick:function(a){null!==t&&(ee.passItem({uid:e.props.uid,id:t.id,to:a,item:t}),e.passItem(null))}}))},e.cardControls=[{label:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c",onClick:function(t){return Be({item:t,onSubmit:function(a){return ee.passItem({id:t.id,uid:e.props.uid,demonstrate:!0,item:Object(S.a)(Object(S.a)({},t),{},{amount:a})})}})}},{label:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c",onClick:function(t){return ue.a.confirm({title:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ".concat(V(t,!1),"?"),onOk:function(a){ee.passItem({id:t.id,uid:e.props.uid,item:Object(S.a)(Object(S.a)({},t),{},{amount:1}),use:!0}),a()},okText:"\u0414\u0430",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430"})},condition:function(e){return"usable"===e.type}},{label:"\u0412\u044b\u0431\u0440\u043e\u0441\u0438\u0442\u044c",onClick:function(t){return Be({item:t,onSubmit:function(a){return ee.passItem({id:t.id,uid:e.props.uid,item:Object(S.a)(Object(S.a)({},t),{},{amount:a})})}})}},{label:"\u041f\u0435\u0440\u0435\u0434\u0430\u0442\u044c",onClick:function(t){return Be({item:t,onSubmit:function(a){return e.passItem(Object(S.a)(Object(S.a)({},t),{},{amount:a}))}})}},{label:"\u0412 \u043a\u043e\u043d\u0441\u043e\u043b\u044c",onClick:console.log,condition:function(){return Boolean(e.props.currentUser&&e.props.currentUser.isAdmin)}},{label:"\u0423\u0431\u0440\u0430\u0442\u044c",onClick:function(t){return Be({item:t,onSubmit:function(a){return ee.removeItem({id:t.id,uid:e.props.uid,amount:a})}})},condition:function(){return Boolean(e.props.currentUser&&e.props.currentUser.isAdmin)}}],e.getTitle=function(){return!!e.props.user&&"\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c \u0438\u0433\u0440\u043e\u043a\u0430 ".concat(e.props.user.nickname||e.props.user.uid)},e.getContent=function(t){var a=e.props,n=a.currentUser,c=a.uid,l=a.hasRight;return r.a.createElement(Re,{uid:c,currentUser:n,items:e.getInventoryItems(t),controls:l?e.cardControls:void 0})},e}return a}(Pe),Je=Object(s.b)((function(e,t){var a=e.loading,n=e.users,r=e.currentUser,c=e.items,l=e.messages,s=e.usersActivity,i=new URLSearchParams(t.match.params).get("uid")||e.uid||"0",o=n[i];return o&&!o.uid&&i&&(o.uid=i),{loading:a,uid:i,items:c,inventory:o?o.inventory:{},user:o,currentUser:r,users:n,messages:l,hasRight:!!o&&!!r&&o.approved&&(r.uid===o.uid||!!r.isAdmin),usersActivity:s}}))(Ye),Ze=a(420),Ke=a(161),qe=(a(343),{change:0,base:0,total:0}),Xe={special:{strength:qe,perception:qe,endurance:qe,charisma:qe,intelligence:qe,agility:qe,luck:qe},skills:{smallGuns:qe,bigGuns:qe,energyGuns:qe,unarmed:qe,meleeWeapons:qe,medicine:qe,sneak:qe,lockpick:qe,steal:qe,traps:qe,science:qe,repair:qe,speech:qe,barter:qe,survival:qe},stats:{level:0,hpPerLevel:0,exp:0,carryWeight:0,wounds:"",maxHealthPoints:0,healthPoints:0,armorClass:qe,healingRate:0,resistance:0,actionPoints:0,sequence:0,meleeDamage:0,criticalChance:0,skillPoints:0,spentSkillPoints:0},bio:""},Qe=[{label:"ST",full:"\u0421\u0438\u043b\u0430",field:"strength"},{label:"PE",full:"\u0412\u043e\u0441\u043f\u0440\u0438\u044f\u0442\u0438\u0435",field:"perception"},{label:"EN",full:"\u0412\u044b\u043d\u043e\u0441\u043b\u0438\u0432\u043e\u0441\u0442\u044c",field:"endurance"},{label:"CH",full:"\u0425\u0430\u0440\u0438\u0437\u043c\u0430",field:"charisma"},{label:"IN",full:"\u0418\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442",field:"intelligence"},{label:"AG",full:"\u041b\u043e\u0432\u043a\u043e\u0441\u0442\u044c",field:"agility"},{label:"LK",full:"\u0423\u0434\u0430\u0447\u0430",field:"luck"}],$e=[{label:"Small Guns",full:"\u041e\u0440\u0443\u0436\u0438\u0435",formula:"5+(4*AG)",field:"smallGuns",getBase:function(e){return 5+4*e.ag}},{label:"Big Guns",full:"\u0411\u043e\u043b\u044c\u0448\u043e\u0435 \u043e\u0440\u0443\u0436\u0438\u0435",formula:"(2*AG)",field:"bigGuns",getBase:function(e){return 2*e.ag}},{label:"Energy Guns",full:"\u042d\u043d\u0435\u0440\u0433\u0435\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0440\u0443\u0436\u0438\u0435",formula:"(2*AG)",field:"energyGuns",getBase:function(e){return 2*e.ag}},{label:"Unarmed",full:"\u0411\u0435\u0437 \u043e\u0440\u0443\u0436\u0438\u044f",formula:"(30+(2*(AG+ST)))",field:"unarmed",getBase:function(e){return 30+2*(e.ag+e.st)}},{label:"Melee",full:"\u0425\u043e\u043b\u043e\u0434\u043d\u043e\u0435 \u043e\u0440\u0443\u0436\u0438\u0435",formula:"20+(2*(AG+ST))",field:"meleeWeapons",getBase:function(e){return 20+2*(e.ag+e.st)}},{label:"Medicine",full:"\u041c\u0435\u0434\u0438\u0446\u0438\u043d\u0430",formula:"5+(PE+EN+(3*AG))",field:"medicine",getBase:function(e){return 5+(e.pe+e.en+3*e.ag)}},{label:"Sneak",full:"\u0421\u043a\u0440\u044b\u0442\u043d\u043e\u0441\u0442\u044c",formula:"5+(3*AG)",field:"sneak",getBase:function(e){return 5+3*e.ag}},{label:"Lockpick",full:"\u0412\u0437\u043b\u043e\u043c",formula:"10+(PE+AG)",field:"lockpick",getBase:function(e){return 10+(e.pe+e.ag)}},{label:"Steal",full:"\u041a\u0440\u0430\u0436\u0430",formula:"(3+AG)",field:"steal",getBase:function(e){return 3+e.ag}},{label:"Traps",full:"\u041b\u043e\u0432\u0443\u0448\u043a\u0438",formula:"10+(PE+AG)",field:"traps",getBase:function(e){return 10+(e.pe+e.ag)}},{label:"Science",full:"\u041d\u0430\u0443\u043a\u0430",formula:"(4*IN)",field:"science",getBase:function(e){return 4*e.in}},{label:"Repair",full:"\u0420\u0435\u043c\u043e\u043d\u0442",formula:"(3*IN)",field:"repair",getBase:function(e){return 3*e.in}},{label:"Speech",full:"\u041a\u0440\u0430\u0441\u043d\u043e\u0440\u0435\u0447\u0438\u0435",formula:"(5*CH)",field:"speech",getBase:function(e){return 5*e.ch}},{label:"Barter",full:"\u0411\u0430\u0440\u0442\u0435\u0440",formula:"(4*CH)",field:"barter",getBase:function(e){return 4*e.ch}},{label:"Survival",full:"\u0412\u044b\u0436\u0438\u0432\u0430\u043d\u0438\u0435",formula:"(2*(EN+IN))",field:"survival",getBase:function(e){return 2*(e.en+e.in)}}],et=[{label:"Level",full:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c",field:"level",getBase:function(e,t){return(Math.sqrt(t.exp/500*4+1)+1)/2}},{label:"HP/Level",full:"\u041e\u0417/\u0423\u0440\u043e\u0432\u0435\u043d\u044c",field:"hpPerLevel",getBase:function(e){return 3+Math.floor(e.en/2)}},{label:"Experience",full:"\u041e\u043f\u044b\u0442",field:"exp"},{label:"Carry Weight",full:"\u041f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u043c\u044b\u0439 \u0432\u0435\u0441",field:"carryWeight",getBase:function(e){return 25+25*e.st}},{label:"Wounds",full:"\u0420\u0430\u043d\u044b",field:"wounds"}],tt=[{label:"Max HP",full:"\u041c\u0430\u043a\u0441. \u041e\u0447\u043a\u0438 \u0417\u0434\u043e\u0440\u043e\u0432\u044c\u044f (\u041e\u0417)",field:"maxHealthPoints",getBase:function(e,t){return 15+(e.st+2*e.en)+t.hpPerLevel*t.level}},{label:"Health Points",full:"\u041e\u0447\u043a\u0438 \u0417\u0434\u043e\u0440\u043e\u0432\u044c\u044f (\u041e\u0417)",field:"healthPoints"},{label:"\u041a\u0411",full:"\u041a\u043b\u0430\u0441\u0441 \u0411\u0440\u043e\u043d\u0438",field:"armorClass",getBase:function(e){return e.ag}},{label:"\u0421\u041b",full:"\u0421\u0430\u043c\u043e\u041b\u0435\u0447\u0435\u043d\u0438\u0435",field:"healingRate",getBase:function(e){return Math.floor(e.en/3)}},{label:"\u0421\u041f",full:"\u0421\u043e\u041f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0435",field:"resistance",getBase:function(e){return 5*e.en}},{label:"\u041e\u0414",full:"\u041e\u0447\u043a\u0438 \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0439",field:"actionPoints",getBase:function(e){return 5+Math.ceil(e.ag/2)}},{label:"\u0418\u0426",full:"\u0418\u043d\u0438\u0426\u0438\u0430\u0442\u0438\u0432\u0430",field:"sequence",getBase:function(e){return 2*e.pe}},{label:"\u0420\u0423",full:"\u0420\u0443\u043a\u043e\u043f\u0430\u0448\u043d\u044b\u0439 \u0423\u0440\u043e\u043d",field:"meleeDamage",getBase:function(e){return Math.max(1,e.st-5)}},{label:"\u0428\u041a",full:"\u0428\u0430\u043d\u0441 \u041a\u0440\u0438\u0442\u0430",field:"criticalChance",getBase:function(e){return e.lk}},{label:"\u041e\u041d",full:"\u041e\u0447\u043a\u0438 \u041d\u0430\u0432\u044b\u043a\u043e\u0432",field:"skillPoints",getBase:function(e,t){return(t.level-1)*(5+2*e.in)-t.spentSkillPoints}}],at=function(e){return[].concat(Qe,$e,et,tt).find((function(t){return t.field===e}))},nt=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state=Xe,e.componentDidMount=function(){var t=e.props,a=t.user,n=t.uid;a||ee.getUser({uid:n})},e.getSpecial=function(){var t=e.props.hasRight;return r.a.createElement(te.a,{className:"char-special"},r.a.createElement("div",{className:"char-special-item"},r.a.createElement("span",{className:"char-special-label"}),r.a.createElement("div",{className:"char-special-input total"},"Total"),r.a.createElement("div",{className:"char-special-input"},"+/-"),r.a.createElement("div",{className:"char-special-input"},"Base")),Qe.map((function(e){var a=e.label,n=e.full,c=e.field;return r.a.createElement("div",{key:a,className:"char-special-item"},r.a.createElement(x.a,{title:n},r.a.createElement("span",{className:"char-special-label"},a)),r.a.createElement(Ze.a.Item,{name:["special",c,"total"]},r.a.createElement(h.a,{className:"char-special-input total",readOnly:!0,min:0,max:9,disabled:!t})),r.a.createElement(Ze.a.Item,{name:["special",c,"change"]},r.a.createElement(we.a,{className:"char-special-input",min:0,max:9,disabled:!t})),r.a.createElement(Ze.a.Item,{name:["special",c,"base"]},r.a.createElement(we.a,{className:"char-special-input",min:0,max:9,disabled:!t})))})))},e.getSkills=function(){var t=e.props.hasRight;return r.a.createElement(te.a,{className:"char-skills"},r.a.createElement("div",{className:"char-skills-item"},r.a.createElement("span",{className:"char-skills-label"}),r.a.createElement("div",{className:"char-skills-input total"},"Total"),r.a.createElement("div",{className:"char-skills-input"},"+/-"),r.a.createElement("div",{className:"char-skills-input"},"Base")),$e.map((function(e){var a=e.label,n=e.full,c=e.formula,l=e.field;return r.a.createElement("div",{key:l,className:"char-skills-item"},r.a.createElement(x.a,{title:n},r.a.createElement("span",{className:"char-skills-label"},a)),r.a.createElement(Ze.a.Item,{name:["skills",l,"total"]},r.a.createElement(h.a,{className:"char-skills-input",readOnly:!0,disabled:!t})),r.a.createElement(Ze.a.Item,{name:["skills",l,"change"]},r.a.createElement(we.a,{className:"char-skills-input",disabled:!t,min:1,max:95})),r.a.createElement(x.a,{title:c},r.a.createElement(Ze.a.Item,{name:["skills",l,"base"]},r.a.createElement(h.a,{className:"char-skills-input",readOnly:!0,disabled:!t}))))})))},e.getStats=function(){var t=e.props.hasRight;return r.a.createElement(te.a,{className:"char-stats"},et.map((function(e){var a=e.label,n=e.full,c=e.field,l=e.getBase;return r.a.createElement("div",{key:c,className:"char-stats-item"},r.a.createElement(x.a,{title:n},r.a.createElement("span",{className:"char-stats-label"},a)),r.a.createElement(Ze.a.Item,{name:["stats",c]},"wounds"===c?r.a.createElement(h.a.TextArea,{className:"char-stats-input",disabled:!t}):l?r.a.createElement(h.a,{className:"char-stats-input",readOnly:!0,disabled:!t}):r.a.createElement(we.a,{className:"char-stats-input",min:1,max:Number.MAX_SAFE_INTEGER,disabled:!t})))})))},e.getMainStats=function(){var t=e.props.hasRight;return r.a.createElement(te.a,{className:"char-main-stats"},r.a.createElement("div",{className:"char-main-stats-health"},r.a.createElement("div",{className:"char-main-stats-hp"},r.a.createElement("span",{className:"char-main-stats-hp-label"},"\u041e\u0447\u043a\u0438 \u0417\u0434\u043e\u0440\u043e\u0432\u044c\u044f (\u041e\u0417)"),r.a.createElement("div",{className:"char-main-stats-hp-body"},r.a.createElement(Ze.a.Item,{name:["stats","healthPoints"]},r.a.createElement(we.a,{max:e.state.stats.maxHealthPoints||void 0,min:-Math.floor(e.state.stats.maxHealthPoints/2),disabled:!t})),"/",r.a.createElement(Ze.a.Item,{name:["stats","maxHealthPoints"]},r.a.createElement(h.a,{readOnly:!0,disabled:!t})))),r.a.createElement("div",{className:"char-main-stats-ap-wrapper"},r.a.createElement("div",{className:"char-main-stats-ap"},r.a.createElement(x.a,{title:"\u041a\u043b\u0430\u0441\u0441 \u0411\u0440\u043e\u043d\u0438 (\u041a\u0411)"},r.a.createElement("div",{className:"char-main-stats-ap-total"},"\u041a\u0411")),r.a.createElement("div",{className:"char-main-stats-ap-change"},"+/-"),r.a.createElement("div",{className:"char-main-stats-ap-base"},"Base")),r.a.createElement("div",{className:"char-main-stats-ap"},r.a.createElement(Ze.a.Item,{name:["stats","armorClass","total"]},r.a.createElement(h.a,{className:"char-main-stats-ap-total",readOnly:!0,disabled:!t})),r.a.createElement(Ze.a.Item,{name:["stats","armorClass","change"]},r.a.createElement(we.a,{className:"char-main-stats-ap-change",min:1,max:95,disabled:!t})),r.a.createElement(Ze.a.Item,{name:["stats","armorClass","base"]},r.a.createElement(h.a,{className:"char-main-stats-ap-base",readOnly:!0,disabled:!t}))))),r.a.createElement("div",{className:"char-main-stats-info"},tt.slice(3).map((function(e){var a=e.label,n=e.full,c=e.field;return r.a.createElement("div",{key:c,className:"char-main-stats-item"},r.a.createElement(x.a,{title:n},r.a.createElement("span",{className:"char-main-stats-item-label"},a)),r.a.createElement(Ze.a.Item,{name:["stats",c]},r.a.createElement(h.a,{className:"char-main-stats-item-input",readOnly:!0,disabled:!t})))}))))},e.onChange=function(t,a){t.bio?e.setState({bio:t.bio}):e.setState(e.processChar(t,a))},e.processChar=function(e,t){var a=t.special,n=t.skills,r=t.stats,c=t.bio;if(!e.bio){var l={};Qe.forEach((function(e){var t=e.field,n=e.label,r=a[t],c=Math.max(0,Math.min(9,r.base+r.change));a[t]=Object(S.a)(Object(S.a)({},r),{},{total:c}),l[n.toLowerCase()]=c})),r.spentSkillPoints=0,$e.forEach((function(e){var t=e.field,a=e.getBase,c=n[t],s=Math.max(1,c.change),i=Math.max(1,a?a(l,r):1),o=Math.max(1,Math.min(95,i+s));n[t]={change:s,base:i,total:o},r.spentSkillPoints+=c.change-1})),[].concat(Object(C.a)(et),Object(C.a)(tt)).forEach((function(e){var t=e.field,a=e.getBase;if(a)if("armorClass"===t){var n=a(l,r),c=r[t].change;r[t]={change:c,base:n,total:c+n}}else r[t]=Math.floor(a(l,r))}))}return{special:a,skills:n,stats:r,bio:c}},e.getChanges=function(e,t){var a=Object(Ke.diff)(t,e),n=Object(Ke.diff)(e,t),r=[];return Object.entries(a).forEach((function(e){var t=Object(k.a)(e,2),a=t[0],c=t[1];"bio"!==a||"string"!==typeof c?Object.entries(c).forEach((function(e){var t=Object(k.a)(e,2),c=t[0],l=t[1],s=n[a][c],i=at(c);i&&r.push({label:i.label,full:i.full,before:l,after:s})})):r.push({label:"Bio",full:"\u0411\u0438\u043e\u0433\u0440\u0430\u0444\u0438\u044f",before:c,after:n[a]})})),r},e.onSave=function(){var t=e.props,a=t.uid,n=t.user,r=e.state;if(n){var c=e.getChanges(Xe,r);0!==c.length&&0!==(c=e.getChanges(n.character||Xe,r)).length?r.stats.skillPoints<0?f.a.error("\u041e\u0447\u043a\u0438 \u041d\u0430\u0432\u044b\u043a\u043e\u0432 (\u041e\u041d) \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438!"):(f.a.success("\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d"),ee.setUser({uid:a,user:Object(S.a)(Object(S.a)({},n),{},{character:r})}),ee.sendMessage({uid:a,message:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b",data:{characterChanges:c}})):f.a.error("\u0412 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0435 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c")}else f.a.error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!")},e.render=function(){var t=e.props,a=t.user,n=t.hasRight;return a?r.a.createElement(Ze.a,{initialValues:a.character||Xe,onValuesChange:e.onChange},r.a.createElement(te.a,{className:"char",title:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436 \u0438\u0433\u0440\u043e\u043a\u0430 ".concat(a.nickname||a.uid),extra:r.a.createElement(le.a,{title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",okText:"\u0414\u0430",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onConfirm:e.onSave},r.a.createElement(se.a,null,"\u0413\u043e\u0442\u043e\u0432\u043e"))},r.a.createElement("div",{className:"char-bio"},r.a.createElement(Ze.a.Item,{name:["bio"]},r.a.createElement(h.a.TextArea,{disabled:!n,minLength:3}))),r.a.createElement("div",null,e.getMainStats()),r.a.createElement("div",null,r.a.createElement("div",null,e.getSpecial(),e.getStats()),r.a.createElement("div",null,e.getSkills())))):r.a.createElement(v.a,{spinning:!0},r.a.createElement(Ue.a,{description:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d"}))},e}return a}(n.Component),rt=Object(s.b)((function(e,t){var a=e.loading,n=e.users,r=e.currentUser,c=new URLSearchParams(t.match.params).get("uid")||e.uid||"0",l=n[c];return l&&!l.uid&&c&&(l.uid=c),{loading:a,user:l,uid:c,hasRight:!!l&&!!r&&l.approved&&(r.uid===l.uid||!!r.isAdmin),currentUser:r}}))(nt),ct=[{path:"/text-roleplay/chat",component:he},{path:"/text-roleplay/:uid/settings",component:ke,exact:!0},{path:"/text-roleplay/:uid/inventory",component:Je,exact:!0},{path:"/text-roleplay/inventory",component:Je,exact:!0},{path:"/text-roleplay/:uid/character",component:rt,exact:!0},{path:"/text-roleplay/character",component:rt,exact:!0},{path:"/text-roleplay/settings",component:ke,exact:!0},{path:"/text-roleplay/items",component:ze},{path:"/text-roleplay/help",component:function(){return r.a.createElement(te.a,{className:"help"},"\u0427\u0430\u0442 \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0439 \u0440\u043e\u043b\u0435\u0432\u043e\u0439 \u0438\u0433\u0440\u044b. \u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c, \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0447\u0430\u0442\u043e\u043c, \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430, \u043f\u0440\u043e\u0444\u0438\u043b\u044f.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438"),r.a.createElement("pre",null,"- \u041d\u043e\u0432\u043e\u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u0438\u0433\u0440\u043e\u043a \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0451\u043d \u0430\u0434\u043c\u0438\u043d\u043e\u043c",r.a.createElement("br",null),"- \u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0432 \u0447\u0430\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0438\u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u043e\u0431\u043c\u0435\u043d\u0430 (ctrl + v) \u043b\u0438\u0431\u043e \u043f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u044f \u0432 \u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430",r.a.createElement("br",null),"- \u0423\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438",r.a.createElement("br",null),"- \u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u0441\u0441\u044b\u043b\u043e\u043a",r.a.createElement("br",null),"- \u0412\u0441\u0442\u0430\u0432\u043a\u0430 YouTube \u0432\u0438\u0434\u0435\u043e (\u043f\u043e\u043b\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430, \u043d\u0435 youtu.be)",r.a.createElement("br",null),"- \u0411\u0440\u043e\u0441\u043a\u0438 \u0434\u0430\u0439\u0441\u043e\u0432",r.a.createElement("br",null),"- \u0412 \u043e\u0434\u043d\u043e\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 10-\u0442\u0438 \u0434\u0430\u0439\u0441\u043e\u0432 - \u041a\u043e\u043b-\u0432\u043e \u0434\u0430\u0439\u0441\u043e\u0432 \u0432 \u043f\u0435\u0440\u0432\u043e\u0439 \u0446\u0438\u0444\u0440\u0435. \u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 10",r.a.createElement("br",null),'- \u0411\u0443\u043a\u0432\u0430 "\u0434" \u0438\u043b\u0438 "d" \u0432\u0442\u043e\u0440\u044b\u043c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u043c',r.a.createElement("br",null),"- \u0420\u0430\u0437\u043c\u0435\u0440 \u0434\u0430\u0439\u0441\u0430 \u0432\u043e \u0432\u0442\u043e\u0440\u043e\u0439 \u0446\u0438\u0444\u0440\u0435. \u0422\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430 4 6 8 10 12 \u0438 20",r.a.createElement("br",null),"- \u041f\u0440\u0438\u043c\u0435\u0440\u044b: 1\u043410, 2\u043420, 9d4",r.a.createElement("br",null),"- \u041f\u0440\u0438 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u043c \u0434\u0430\u0439\u0441\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e",r.a.createElement("br",null),"- \u0414\u0430\u0439\u0441 \u043c\u043e\u0436\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u043b\u044e\u0431\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0438 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0443\u0433\u043e\u0434\u043d\u043e \u0440\u0430\u0437",r.a.createElement("br",null),"- \u041f\u0440\u0438 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0438 \u043d\u0430 \u0431\u0440\u043e\u0448\u0435\u043d\u043d\u044b\u0439 \u0434\u0430\u0439\u0441 \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u043f\u043e\u043b\u043d\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",r.a.createElement("br",null),"- \u041a\u0440\u0438\u0442 \u043f\u043e\u043f\u0430\u0434\u0430\u043d\u0438\u044f \u0438 \u043f\u0440\u043e\u043c\u0430\u0445\u0438 \u0441\u043b\u0435\u0433\u043a\u0430 \u043f\u043e\u0434\u0441\u0432\u0435\u0447\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0437\u0435\u043b\u0435\u043d\u044b\u043c \u0438 \u043a\u0440\u0430\u0441\u043d\u044b\u043c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e",r.a.createElement("br",null),'- \u0420\u041f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u0435\u0441\u043b\u0438 \u043f\u0435\u0440\u0432\u044b\u043c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u043c \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c "*"',r.a.createElement("br",null),"- \u0418\u0433\u0440\u043e\u043a\u0438 \u043e\u043d\u043b\u0430\u0439\u043d \u0438\u043c\u0435\u044e\u0442 \u0441\u0438\u043d\u044e\u044e \u043e\u0431\u0432\u043e\u0434\u043a\u0443 \u0432\u043e\u043a\u0440\u0443\u0433 \u0430\u0432\u0430\u0442\u0430\u0440\u0430",r.a.createElement("br",null),"- \u041f\u0440\u0438 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0438 \u043d\u0430 \u0438\u0433\u0440\u043e\u043a\u0430 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u043e\u043d\u043b\u0430\u0439\u043d",r.a.createElement("br",null),"- \u041f\u0440\u0438 \u043a\u043b\u0438\u043a\u0435 \u043d\u0430 \u0438\u0433\u0440\u043e\u043a\u0430 \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a",r.a.createElement("br",null),"- \u0410\u0434\u043c\u0438\u043d\u044b \u043c\u043e\u0433\u0443\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0438\u0433\u0440\u043e\u043a\u043e\u0432",r.a.createElement("br",null),"- \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438\u043c\u0435\u043d\u0438 \u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430",r.a.createElement("br",null),"- \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u0441\u0440\u0430\u0437\u0443 \u043f\u043e\u0441\u043b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f (\u0434\u0430\u0436\u0435 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f)",r.a.createElement("br",null),"- \u0412\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0432\u0438\u0434\u044f\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",r.a.createElement("br",null),"- \u041f\u0440\u0438 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0438 \u043d\u0430 \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0435\u0433\u043e \u0434\u0430\u0442\u0430",r.a.createElement("br",null),"- \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0442 \u043e\u0434\u043d\u043e\u0433\u043e \u0430\u0432\u0442\u043e\u0440\u0430 \u0441\u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u044b",r.a.createElement("br",null),"- \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u044b (\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435, \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435)",r.a.createElement("br",null),"- \u0422\u043e\u043b\u044c\u043a\u043e \u0430\u0434\u043c\u0438\u043d \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b",r.a.createElement("br",null),"- \u0423\u0434\u0430\u043b\u044f\u0442\u044c \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0431\u043e\u0439 \u0436\u0435, \u043b\u0438\u0431\u043e \u0435\u0441\u043b\u0438 \u0430\u0434\u043c\u0438\u043d",r.a.createElement("br",null),"- \u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0442\u0438\u043f\u0443 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430",r.a.createElement("br",null),"- \u041f\u043e\u0438\u0441\u043a \u043e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044e \u0438 \u044d\u0444\u0444\u0435\u043a\u0442\u0443 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432",r.a.createElement("br",null),"- \u0412\u0435\u0441 \u0438 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f, \u0435\u0441\u043b\u0438 \u043d\u0443\u043b\u0435\u0432\u0430\u044f",r.a.createElement("br",null),"- \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u0435\u0441\u043b\u0438 \u043f\u0440\u0435\u0434\u043c\u0435\u0442 \u043e\u0434\u0438\u043d",r.a.createElement("br",null),"- \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 \u043f\u043e \u043d\u0430\u0436\u0430\u0442\u0438\u044e \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 (\u043d\u0435 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445)",r.a.createElement("br",null),"- \u0412\u044b\u0431\u043e\u0440 \u043a\u043e\u043b-\u0432\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c\u044b\u0445 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432",r.a.createElement("br",null),"- \u0412 \u0432\u0435\u0440\u0445\u043d\u0435\u043c \u043b\u0435\u0432\u043e\u043c \u0443\u0433\u043b\u0443 \u0434\u0430\u0442\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0431\u0438\u043b\u0434\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u041f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u043d\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0438 \u043a\u0443\u0440\u0441\u043e\u0440\u0430",r.a.createElement("br",null),"- \u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c",r.a.createElement("br",null),"- \u0410\u0434\u043c\u0438\u043d \u043c\u043e\u0436\u0435\u0442 \u0432\u0437\u044f\u0442\u044c \u0432 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430",r.a.createElement("br",null),"- \u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0438\u0437 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044f \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d \u0434\u0440\u0443\u0433\u0438\u043c \u0432 \u0447\u0430\u0442\u0435",r.a.createElement("br",null),"- \u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d, \u0447\u0435\u043c \u0431\u0443\u0434\u0435\u0442 \u0438\u0437\u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432\u0430\u043d (1\u0448\u0442)",r.a.createElement("br",null),"- \u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0432 \u0447\u0430\u0442 \u0438 \u043b\u044e\u0431\u043e\u0439 \u0438\u0433\u0440\u043e\u043a \u043c\u043e\u0436\u0435\u0442 \u0435\u0433\u043e \u043f\u043e\u0434\u043e\u0431\u0440\u0430\u0442\u044c",r.a.createElement("br",null),"- \u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430 \u0434\u0440\u0443\u0433\u0438\u043c \u0438\u0433\u0440\u043e\u043a\u0430\u043c",r.a.createElement("br",null),"- \u041c\u043e\u0436\u043d\u043e \u0437\u0430\u0439\u0442\u0438 \u0432 \u0447\u0443\u0436\u043e\u0439 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c \u0431\u0435\u0437 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",r.a.createElement("br",null),"- \u041b\u0438\u0441\u0442 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430",r.a.createElement("br",null),"- \u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 \u0440\u0430\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u0430\u043c\u0438",r.a.createElement("br",null),"- \u041f\u043e\u0441\u043b\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430, \u0447\u0430\u0442 \u043e\u043f\u043e\u0432\u0435\u0449\u0430\u0435\u0442\u0441\u044f \u043e\u0431 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u0445",r.a.createElement("br",null),"- \u041d\u0435\u043b\u044c\u0437\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 \u043f\u0440\u0438 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u041e\u0447\u043a\u0430\u0445 \u041d\u0430\u0432\u044b\u043a\u043e\u0432",r.a.createElement("br",null),'- \u0415\u0441\u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u043a\u043e\u0433\u0434\u0430 \u0432\u043a\u043b\u0430\u0434\u043a\u0430 \u043d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u0430 - \u0432 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0438 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f "(!)"',r.a.createElement("br",null),"- ",r.a.createElement("br",null)),r.a.createElement("h1",null,"\u0411\u0430\u0433\u0438/\u043e\u0448\u0438\u0431\u043a\u0438"),r.a.createElement("pre",null,"- ",r.a.createElement("br",null)),r.a.createElement("h1",null,"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f"),r.a.createElement("pre",null,"- \u0421\u0434\u0435\u043b\u0430\u0442\u044c lazy loading \u0434\u043b\u044f \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",r.a.createElement("br",null),"- Lazy loading \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0439 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b",r.a.createElement("br",null),"- \u041d\u0443\u0436\u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0430 \u0431\u044b\u0441\u0442\u0440\u043e\u0433\u043e \u0441\u043a\u0440\u043e\u043b\u043b\u0430 \u0432\u043d\u0438\u0437 \u0447\u0430\u0442\u0430",r.a.createElement("br",null),"- \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0430\u0432\u0430\u0442\u0430\u0440\u0430 \u0447\u0435\u0440\u0435\u0437 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430",r.a.createElement("br",null),"- \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043a \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438",r.a.createElement("br",null),"- \u041f\u043e\u0440\u0435\u0437\u0430\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u044b \u043d\u0430 \u0444\u0430\u0439\u043b\u044b \u043f\u043e\u043c\u0435\u043d\u044c\u0448\u0435",r.a.createElement("br",null),"- \u041e\u0442\u0440\u0435\u0444\u0430\u043a\u0442\u043e\u0440\u0438\u0442\u044c ItemCreator \u043d\u0430 \u0444\u043e\u0440\u043c\u0443",r.a.createElement("br",null),"- ",r.a.createElement("br",null)),r.a.createElement("h1",null,"Todo"),r.a.createElement("pre",null,"- Character page",r.a.createElement("br",null),"- Effect cards?",r.a.createElement("br",null),"- Local Notes",r.a.createElement("br",null),"- Global notes",r.a.createElement("br",null),"- Drawing",r.a.createElement("br",null),"- ",r.a.createElement("br",null)))}},{path:"/text-roleplay/logout",component:xe}],lt=a(163),st=a(431),it=Object(s.b)((function(e){return{loading:e.loading,error:e.error}}))((function(e){var t=e.error,a=e.loading;return r.a.createElement(te.a,{loading:a},r.a.createElement(lt.a,{defaultActiveKey:"1"},r.a.createElement(lt.a.TabPane,{tab:"\u041b\u043e\u0433\u0438\u043d",key:"1"},r.a.createElement(Ze.a,{onFinish:function(e){return ee.login(e)}},r.a.createElement(Ze.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail!"}]},r.a.createElement(h.a,null)),r.a.createElement(Ze.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}]},r.a.createElement(h.a.Password,null)),r.a.createElement(Ze.a.Item,null,r.a.createElement(se.a,{type:"primary",htmlType:"submit"},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement(lt.a.TabPane,{tab:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",key:"2"},r.a.createElement(Ze.a,{onFinish:function(e){return ee.register(e)}},r.a.createElement(Ze.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail!"}]},r.a.createElement(h.a,null)),r.a.createElement(Ze.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}]},r.a.createElement(h.a.Password,null)),r.a.createElement(Ze.a.Item,{label:"Confirm Password",name:"passwordConfirm",rules:[{required:!0,message:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b!"}]},r.a.createElement(h.a.Password,null)),r.a.createElement(Ze.a.Item,null,r.a.createElement(se.a,{type:"primary",htmlType:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))),r.a.createElement(lt.a.TabPane,{tab:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",key:"3"},r.a.createElement(Ze.a,{onFinish:function(e){return ee.resetPassword(e)}},r.a.createElement(Ze.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail!"}]},r.a.createElement(h.a,null)),r.a.createElement(Ze.a.Item,null,r.a.createElement(se.a,{type:"primary",htmlType:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c E-mail"))))),t&&r.a.createElement(st.a,{type:"error",message:t.message}))}));var ot,ut,mt,dt=Object(s.b)((function(e){return{isLoggedIn:e.isLoggedIn}}))((function(e){return e.isLoggedIn?r.a.createElement(m.d,null,ct.map((function(e){return r.a.createElement(m.b,{key:e.path,path:e.path,component:e.component,exact:e.exact||!1})})),r.a.createElement(m.a,{to:"/text-roleplay/chat"})):r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"*",component:it}))})),ft=(a(409),a(410),a(411),!1),pt=function(){!function(){var e=function(){_(parseInt(localStorage.getItem("lastActivity")||"0")-6e4)||ee.updateLastOnline({})};["mousedown","mousemove","keydown","scroll","touchstart"].forEach((function(t){document.addEventListener(t,e,!0)})),e()}()},gt=r.a.createElement("div",{className:"build-date"},"build date ",window.buildDate.replace("_"," ")),Et=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).componentDidMount=pt,e.componentDidUpdate=function(){var t=e.props,a=t.notify,n=t.redirect;a&&(f.a.info(a),ee.notifySuccess({})),n&&ee.redirectSuccess({})},e.getRedirect=function(){var t=e.props.redirect;return t&&r.a.createElement(m.a,{to:t})},e.render=function(){return r.a.createElement(r.a.Fragment,null,gt,r.a.createElement(d.a,null,e.getRedirect(),r.a.createElement(E,null),r.a.createElement("div",{className:"app"},r.a.createElement(dt,null))))},e}return a}(n.Component),bt=Object(s.b)((function(e){return{redirect:e.redirect,notify:e.notify}}))(Et),vt=a(6),ht=a.n(vt),Ot=a(14),St=a(212),It=a.n(St),yt=(a(412),a(414),"ewogICAgImFwaUtleSI6ICJBSXphU3lEYkVwWWdfUjJkMXVyUEJhYk9IenJLTjRyd3BKUWpDNG8iLAogICAgImF1dGhEb21haW4iOiAidGV4dC1yb2xlcGxheS1hZmFlNi5maXJlYmFzZWFwcC5jb20iLAogICAgImRhdGFiYXNlVVJMIjogImh0dHBzOi8vdGV4dC1yb2xlcGxheS1hZmFlNi5maXJlYmFzZWlvLmNvbSIsCiAgICAicHJvamVjdElkIjogInRleHQtcm9sZXBsYXktYWZhZTYiLAogICAgInN0b3JhZ2VCdWNrZXQiOiAidGV4dC1yb2xlcGxheS1hZmFlNi5hcHBzcG90LmNvbSIsCiAgICAibWVzc2FnaW5nU2VuZGVySWQiOiAiNDk3Mjc3NjQwOTY5IiwKICAgICJhcHBJZCI6ICIxOjQ5NzI3NzY0MDk2OTp3ZWI6NTZiYjdkMmE2ZjM0NjM1Njc3MzNkOCIKICB9"),jt={},Ct=0,kt=0,xt="",Tt=String.fromCharCode,wt=yt.length;for(ot=0;ot<64;ot++)jt["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(ot)]=ot;for(ut=0;ut<wt;ut++)for(Ct=(Ct<<6)+jt[yt.charAt(ut)],kt+=6;kt>=8;)((mt=Ct>>>(kt-=8)&255)||ut<wt-2)&&(xt+=Tt(mt));var At=JSON.parse(xt),Nt=It.a.initializeApp(At),Mt=Nt.auth();Mt.languageCode="ru";var _t=Nt.database();Mt.onAuthStateChanged((function(e){e?(ee.loginSuccess({user:e}),ee.getUser({uid:e.uid,currentUser:!0})):ee.logout({})}));var Ut=ht.a.mark(Dt),Gt=ht.a.mark(Lt),Rt=ht.a.mark(Bt),Ft=ht.a.mark(Vt),Pt=ht.a.mark(zt);function Dt(e){var t,a,n;return ht.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.email,a=e.password,r.prev=1,r.next=4,Mt.signInWithEmailAndPassword(t,a);case 4:return n=r.sent,ee.loginSuccess({user:n}),localStorage.setItem("user",JSON.stringify(n.user)),localStorage.setItem("uid",n.user.uid),r.abrupt("return",n.user);case 11:return r.prev=11,r.t0=r.catch(1),ee.loginFail({error:r.t0}),r.abrupt("return",!1);case 15:case"end":return r.stop()}}),Ut,null,[[1,11]])}function Lt(e){var t,a,n,r;return ht.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.email,a=e.password,n=e.passwordConfirm,a===n){c.next=4;break}return ee.registerFail({error:{message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!"}}),c.abrupt("return");case 4:return c.prev=4,c.next=7,Mt.createUserWithEmailAndPassword(t,a);case 7:return ee.registerSuccess({}),c.next=10,Dt(e);case 10:(r=c.sent)&&ee.sendMessage({uid:r.uid,message:"*[\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d]*"}),c.next=18;break;case 14:c.prev=14,c.t0=c.catch(4),console.error(c.t0),ee.registerFail({error:c.t0});case 18:case"end":return c.stop()}}),Gt,null,[[4,14]])}function Bt(e){var t;return ht.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.email,a.prev=1,a.next=4,Mt.sendPasswordResetEmail(t);case 4:ee.resetPasswordSuccess({}),ee.notify({message:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 E-mail!"}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0),ee.resetPasswordFail({error:a.t0});case 12:case"end":return a.stop()}}),Rt,null,[[1,8]])}function Vt(){return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("user"),localStorage.removeItem("uid"),localStorage.removeItem("loggedIn"),e.next=5,Mt.signOut();case 5:case"end":return e.stop()}}),Ft)}function zt(){return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ot.a)([Object(Ot.c)("LOGIN",Dt),Object(Ot.c)("REGISTER",Lt),Object(Ot.c)("RESET_PASSWORD",Bt),Object(Ot.c)("LOGOUT",Vt)]);case 2:case"end":return e.stop()}}),Pt)}var Wt=ht.a.mark(Zt),Ht=ht.a.mark(Xt),Yt=ht.a.mark(Qt),Jt=ht.a.mark($t);function Zt(e){var t,a;return ht.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.uid,a=e.user,n.next=3,_t.ref("users").child(t).set(Object(S.a)(Object(S.a)({},a),{},{lastOnline:(new Date).getTime(),uid:t}));case 3:ee.setUserSuccess({}),ee.getUser({uid:t});case 5:case"end":return n.stop()}}),Wt)}var Kt={};function qt(e){var t=e.uid,a=e.currentUser;Kt[t]&&!a||(Kt[t]=!0,_t.ref("users").child(t).on("value",(function(e){var n=e.val()||{};ee.getUserSuccess({user:n,uid:t,currentUser:a})})))}function Xt(){var e,t;return ht.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=localStorage.getItem("uid"))&&"undefined"!==e){a.next=3;break}return a.abrupt("return");case 3:return t=(new Date).getTime(),localStorage.setItem("lastActivity","".concat(t)),a.next=7,_t.ref("users").child("".concat(e)).child("lastOnline").set(t);case 7:return a.next=9,_t.ref("usersActivity").child("".concat(e)).set(t);case 9:case"end":return a.stop()}}),Ht)}function Qt(){var e,t;return ht.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_t.ref("usersActivity").once("value");case 2:e=a.sent,t=e.val()||{},ee.getUsersActivitySuccess({usersActivity:t});case 5:case"end":return a.stop()}}),Yt)}function $t(){return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ot.a)([Object(Ot.c)("GET_USER",qt),Object(Ot.c)("SET_USER",Zt),Object(Ot.c)("UPDATE_LAST_ONLINE",Xt),Object(Ot.c)("GET_USERS_ACTIVITY",Qt)]);case 2:case"end":return e.stop()}}),Jt)}var ea=ht.a.mark(ca),ta=ht.a.mark(ia),aa=ht.a.mark(oa),na=ht.a.mark(ma),ra=ht.a.mark(da);function ca(e){var t,a,n,r,c,l;return ht.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.uid,a=e.message,n=e.data,r=void 0===n?{}:n,c=(new Date).getTime(),l=D({time:c,author:t,body:"".concat(a," "),data:r}),s.prev=3,s.next=6,_t.ref("messages").child("".concat(c)).set(l);case 6:localStorage.setItem("message",""),ee.sendMessageSuccess({message:l}),s.next=15;break;case 10:s.prev=10,s.t0=s.catch(3),ee.sendMessageFail({}),console.error(s.t0),ee.notify({message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e. \u0414\u043b\u044f \u0434\u0435\u0442\u0430\u043b\u0435\u0439 ctrl + shift + i, \u0432\u043a\u043b\u0430\u0434\u043a\u0430 Console"});case 15:case"end":return s.stop()}}),ea,null,[[3,10]])}function la(){_t.ref("messages").orderByKey().limitToLast(1).on("value",(function(e){var t=Object.values(e.val()||{});ee.getMessagesSuccess({messages:t,concat:!0}),function(){if(!ft){ft=!0;var e=setInterval((function(){var t=document.head.querySelector("title");t&&(t.innerText="TRP"===t.innerText?"(!) TRP":"TRP",ft&&document.hidden||(t.innerText="TRP",clearInterval(e),ft=!1))}),500)}}()}))}function sa(){_t.ref("messages").off()}function ia(){var e,t;return ht.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_t.ref("messages").orderByKey().limitToLast(100).once("value");case 2:e=a.sent,t=Object.values(e.val()||{}),ee.getMessagesSuccess({messages:t});case 5:case"end":return a.stop()}}),ta)}function oa(e){var t,a,n;return ht.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.firstMessage,r.next=3,_t.ref("messages").orderByKey().endAt("".concat(t.time)).limitToLast(30).once("value");case 3:a=r.sent,n=Object.values(a.val()||{}),ee.getMessagesSuccess({messages:n,concat:!0});case 6:case"end":return r.stop()}}),aa)}function ua(e){var t=e.file,a=e.uid,n=new XMLHttpRequest,r=new FormData;r.append("image",t),n.open("POST","https://api.imgur.com/3/image/"),n.setRequestHeader("Authorization","Client-ID ea2c833b74d4583"),n.onreadystatechange=function(){if(200===n.status&&4===n.readyState){var e=JSON.parse(n.responseText);ee.sendMessage({uid:a,message:e.data.link}),ee.notify({message:"\u0424\u0430\u0439\u043b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d!"})}},n.send(r)}function ma(e){var t,a;return ht.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.message,a=D({time:t.time,author:t.author,body:t.body,data:t.data}),n.next=4,_t.ref("messages").child("".concat(t.time)).set(a);case 4:return ee.changeMessageSuccess({message:a}),n.abrupt("return",a);case 6:case"end":return n.stop()}}),na)}function da(){return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ot.a)([Object(Ot.c)("SEND_MESSAGE",ca),Object(Ot.c)("GET_MESSAGES",ia),Object(Ot.c)("GET_MORE_MESSAGES",oa),Object(Ot.c)("SUBSCRIBE",la),Object(Ot.c)("UNSUBSCRIBE",sa),Object(Ot.c)("UPLOAD_FILE",ua),Object(Ot.c)("CHANGE_MESSAGE",ma)]);case 2:case"end":return e.stop()}}),ra)}var fa=a(162),pa=ht.a.mark(Oa),ga=ht.a.mark(Sa),Ea=ht.a.mark(Ia),ba=ht.a.mark(ya),va=ht.a.mark(ja),ha=ht.a.mark(Ca);function Oa(e){var t,a,n,r,c;return ht.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.item,a=(new Date).getTime(),n=t.id||"_"+Math.random().toString(36).substr(2,9),r=localStorage.getItem("uid"),c=Object(S.a)(Object(S.a)({},t),{},{id:n,time:a,author:r}),l.next=7,_t.ref("items").child("".concat(n)).set(c);case 7:ee.setItemSuccess({itemData:c}),ee.getItemById({id:n});case 9:case"end":return l.stop()}}),pa)}function Sa(){var e,t;return ht.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_t.ref("items").orderByKey().limitToFirst(30).once("value");case 2:e=a.sent,t=Object.values(e.val()||{}),ee.getItemsSuccess({items:t});case 5:case"end":return a.stop()}}),ga)}function Ia(e){var t,a,n;return ht.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,r.next=3,_t.ref("items").child(t).once("value");case 3:return a=r.sent,n=a.val()||B(t),ee.getItemsSuccess({items:[n]}),r.abrupt("return",!0);case 7:case"end":return r.stop()}}),Ea)}function ya(e){var t,a,n,r,c,l;return ht.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.amount,a=void 0===t?1:t,n=e.lastItem,s.next=3,_t.ref("items").orderByKey().startAt("".concat(n.id)).limitToFirst(a+1).once("value");case 3:r=s.sent,c=r.val(),l=Object.values(c||{}).splice(1),ee.getItemsSuccess({items:l});case 7:case"end":return s.stop()}}),ba)}function ja(e){var t,a,n,r,c,l,s,i,o,u,m;return ht.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return m=function(){return(m=Object(fa.a)(ht.a.mark((function e(a){var r,c,l;return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i[a]){e.next=3;break}return e.abrupt("return");case 3:if(c=n(),setTimeout((function(){return ee.deleteItemProgress({field:"usersChecked",value:a+1})}),c),!r.inventory){e.next=11;break}if(!(l=Object.values(r.inventory).find((function(e){return e.id===t})))){e.next=11;break}return e.next=10,_t.ref("users/".concat(r.uid,"/inventory/").concat(t,"|").concat(l.time)).set({});case 10:setTimeout((function(){return ee.deleteItemProgress({field:"usersCleared",value:++o})}),c);case 11:return e.next=13,u(a+1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(e){return m.apply(this,arguments)},s=function(){return(s=Object(fa.a)(ht.a.mark((function e(a){var s,i;return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r[a]){e.next=3;break}return e.abrupt("return");case 3:if(i=n(),setTimeout((function(){return ee.deleteItemProgress({field:"messagesChecked",value:a+1})}),i),!s.data||!s.data.itemId||s.data.itemId!==t){e.next=9;break}return e.next=8,_t.ref("messages/".concat(s.time,"/data")).set({});case 8:setTimeout((function(){return ee.deleteItemProgress({field:"messagesCleared",value:++c})}),i);case 9:return e.next=11,l(a+1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},l=function(e){return s.apply(this,arguments)},t=e.id,d.next=7,_t.ref("items/".concat(t)).set({});case 7:return ee.deleteItemProgress({field:"deleted",value:!0}),a=0,n=function(){return a+=A(10,500)},d.t0=Object,d.next=13,_t.ref("messages").once("value");case 13:if(d.t1=d.sent.val(),d.t1){d.next=16;break}d.t1={};case 16:return d.t2=d.t1,r=d.t0.values.call(d.t0,d.t2),c=0,d.next=21,l(0);case 21:return d.t3=Object,d.next=24,_t.ref("users").once("value");case 24:if(d.t4=d.sent.val(),d.t4){d.next=27;break}d.t4={};case 27:return d.t5=d.t4,i=d.t3.values.call(d.t3,d.t5),o=0,d.next=32,u(0);case 32:setTimeout((function(){return ee.deleteItemProgress({field:"done",value:!0})}),n()),ee.deleteItemSuccess({id:t});case 34:case"end":return d.stop()}}),va)}function Ca(){return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ot.a)([Object(Ot.c)("DELETE_ITEM",ja),Object(Ot.c)("SET_ITEM",Oa),Object(Ot.c)("GET_ITEMS",Sa),Object(Ot.c)("GET_MORE_ITEMS",ya),Object(Ot.b)("GET_ITEM_BY_ID",Ia)]);case 2:case"end":return e.stop()}}),ha)}var ka=ht.a.mark(Ma),xa=ht.a.mark(_a),Ta=ht.a.mark(Ua),wa=ht.a.mark(Ga),Aa=ht.a.mark(Ra),Na=ht.a.mark(Fa);function Ma(e){var t,a,n,r,c,l,s,i;return ht.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.id,a=e.uid,n=e.demonstrate,r=e.use,c=e.item,l=e.to,!(t&&a&&c)){o.next=33;break}if(s=V(c),!n){o.next=9;break}return ee.sendMessage({uid:a,message:"*\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 ".concat(s),data:{itemId:t,amount:c.amount}}),ee.passItemSuccess({}),ee.notify({message:"\u0412\u044b \u043f\u043e\u043a\u0430\u0437\u0430\u043b\u0438 ".concat(s)}),ee.redirect({to:"/text-roleplay/chat"}),o.abrupt("return",!0);case 9:return o.next=11,_a({id:t,uid:a,amount:c.amount});case 11:if(o.sent){o.next=16;break}return console.error("passItem error:",e),ee.passItemFail({id:t,uid:a}),o.abrupt("return",!1);case 16:if(!r){o.next=23;break}return i=V(c,!1),ee.sendMessage({uid:a,message:"*\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b ".concat(i),data:{itemId:t}}),ee.notify({message:"\u0412\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438 ".concat(i)}),ee.redirect({to:"/text-roleplay/chat"}),ee.passItemSuccess({}),o.abrupt("return",!0);case 23:if(!l){o.next=28;break}return ee.giveItem({uid:l.uid,id:t,itemType:c.type,amount:c.amount}),ee.notify({message:"\u0412\u044b \u043f\u0435\u0440\u0435\u0434\u0430\u043b\u0438 ".concat(c.name," \u0438\u0433\u0440\u043e\u043a\u0443 '").concat(l.nickname,"'")}),ee.passItemSuccess({}),o.abrupt("return");case 28:return ee.sendMessage({uid:a,message:"*\u0432\u044b\u0431\u0440\u043e\u0441\u0438\u043b ".concat(s),data:{itemId:t,amount:c.amount,type:c.type}}),ee.notify({message:"\u0412\u044b \u0432\u044b\u0431\u0440\u043e\u0441\u0438\u043b\u0438 ".concat(s)}),ee.redirect({to:"/text-roleplay/chat"}),ee.passItemSuccess({}),o.abrupt("return",!0);case 33:return ee.passItemFail({id:t,uid:a}),console.error("passItem error: id, uid, or item are not defined",e),o.abrupt("return",!1);case 36:case"end":return o.stop()}}),ka)}function _a(e){var t,a,n,r,c,l,s;return ht.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.id,a=e.uid,n=e.amount,r=void 0===n?1:n,c=_t.ref("users").child(a).child("inventory"),i.next=4,Ua({id:t,uid:a});case 4:if(!(l=i.sent)){i.next=16;break}if(!(l.amount-r>=1)){i.next=12;break}return s=Object(S.a)(Object(S.a)({},l),{},{amount:l.amount-r}),i.next=10,c.child("".concat(t,"|").concat(l.time)).set(s);case 10:return ee.removeItemSuccess({id:t,uid:a}),i.abrupt("return",!0);case 12:return i.next=14,c.child("".concat(t,"|").concat(l.time)).set({});case 14:return ee.removeItemSuccess({id:t,uid:a}),i.abrupt("return",!0);case 16:return console.error("removeItem error: User '".concat(a,"' doesn't have item '").concat(t,"'")),ee.notify({message:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0430 \u043d\u0435\u0442 \u0432 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0435"}),ee.removeItemFail({id:t,uid:a,error:"has-no-item"}),i.abrupt("return",!1);case 20:case"end":return i.stop()}}),xa)}function Ua(e){var t,a,n,r,c;return ht.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.id,a=e.uid,l.next=3,_t.ref("users").child(a).child("inventory").once("value");case 3:if(n=l.sent,!(r=Object.values(n.val()||{})).length){l.next=9;break}if(!(c=r.find((function(e){return e.id===t})))){l.next=9;break}return l.abrupt("return",c);case 9:return l.abrupt("return");case 10:case"end":return l.stop()}}),Ta)}function Ga(e){var t,a,n,r,c,l,s,i,o;return ht.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e.id,a=e.uid,n=e.itemType,r=e.amount,c=void 0===r?1:r,t&&a&&n){u.next=5;break}return console.error("giveItem error. One of the properties are not defined",t,a,n),ee.giveItemFail({}),u.abrupt("return");case 5:if(l=(new Date).getTime(),s={id:t,time:l,type:n,amount:c},"weapon"===n||"wearable"===n){u.next=12;break}return u.next=10,Ua({id:t,uid:a});case 10:(i=u.sent)&&(s.amount=(i.amount||1)+c,s.time=i.time);case 12:return o="".concat(s.id,"|").concat(s.time),u.next=15,_t.ref("users").child(a).child("inventory").child(o).set(s);case 15:return ee.giveItemSuccess({id:t,uid:a}),u.abrupt("return",!0);case 17:case"end":return u.stop()}}),wa)}function Ra(e){var t,a,n,r,c,l;return ht.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.uid,a=e.message,n=a.data,r=n.itemId,c=n.amount,l=n.type,a.data.taken=!0,s.next=5,ma({uid:t,message:a});case 5:if(!s.sent||!l){s.next=14;break}return s.next=9,Ga({id:r,uid:t,amount:c||1,itemType:l});case 9:if(!s.sent){s.next=14;break}return ee.sendMessage({uid:t,message:"*\u043f\u043e\u0434\u043e\u0431\u0440\u0430\u043b \u043f\u0440\u0435\u0434\u043c\u0435\u0442"}),ee.takeItemSuccess({}),s.abrupt("return",!0);case 14:return console.error("takeItem error. Cant take or no item",e),ee.takeItemFail({}),s.abrupt("return",!1);case 17:case"end":return s.stop()}}),Aa)}function Fa(){return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ot.a)([Object(Ot.c)("GIVE_ITEM",Ga),Object(Ot.c)("REMOVE_ITEM",_a),Object(Ot.c)("PASS_ITEM",Ma),Object(Ot.c)("TAKE_ITEM",Ra)]);case 2:case"end":return e.stop()}}),Na)}var Pa=ht.a.mark(Da);function Da(){return ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ot.a)([zt(),$t(),da(),Ca(),Fa()]);case 2:case"end":return e.stop()}}),Pa)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));K.run(Da),l.a.render(r.a.createElement(s.a,{store:q},r.a.createElement(bt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[218,1,2]]]);
//# sourceMappingURL=main.d0dbfaed.chunk.js.map