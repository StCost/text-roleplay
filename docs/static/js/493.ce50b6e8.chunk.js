"use strict";(self.webpackChunktext_roleplay=self.webpackChunktext_roleplay||[]).push([[493],{2493:function(t,e,r){r.d(e,{Z:function(){return D}});var n=r(2791),o=r(1694),i=r.n(o),s=r(3891),a=r(2836),u=r(5053),p=r(4976),l=r(2455),c=r(1354);function h(){}function d(t){t.preventDefault()}var f=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,v=function(t){return void 0!==t&&null!==t},m=function(t,e){return e===t||"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)},y=function(t){function e(r){(0,u.Z)(this,e);var n=(0,p.Z)(this,t.call(this,r));g.call(n);var o=void 0;o="value"in r?r.value:r.defaultValue,n.state={focused:r.autoFocus};var i=n.getValidValue(n.toNumber(o));return n.state=(0,a.Z)({},n.state,{inputValue:n.toPrecisionAsStep(i),value:i}),n}return(0,l.Z)(e,t),e.prototype.componentDidMount=function(){this.componentDidUpdate()},e.prototype.componentDidUpdate=function(t){var e=this.props,r=e.value,n=e.onChange,o=e.max,i=e.min,s=this.state.focused;if(t){if(!m(t.value,r)||!m(t.max,o)||!m(t.min,i)){var a=s?r:this.getValidValue(r),u=void 0;u=this.pressingUpOrDown?a:this.inputting?this.rawInput:this.toPrecisionAsStep(a),this.setState({value:a,inputValue:u})}var p="value"in this.props?r:this.state.value;"max"in this.props&&t.max!==o&&"number"===typeof p&&p>o&&n&&n(o),"min"in this.props&&t.min!==i&&"number"===typeof p&&p<i&&n&&n(i)}try{if(void 0!==this.cursorStart&&this.state.focused)if(this.partRestoreByAfter(this.cursorAfter)||this.state.value===this.props.value){if(this.currentValue===this.input.value)switch(this.lastKeyCode){case c.Z.BACKSPACE:this.fixCaret(this.cursorStart-1,this.cursorStart-1);break;case c.Z.DELETE:this.fixCaret(this.cursorStart+1,this.cursorStart+1)}}else{var l=this.cursorStart+1;this.cursorAfter?this.lastKeyCode===c.Z.BACKSPACE?l=this.cursorStart-1:this.lastKeyCode===c.Z.DELETE&&(l=this.cursorStart):l=this.input.value.length,this.fixCaret(l,l)}}catch(h){}this.lastKeyCode=null,this.pressingUpOrDown&&(this.props.focusOnUpDown&&this.state.focused&&document.activeElement!==this.input&&this.focus(),this.pressingUpOrDown=!1)},e.prototype.componentWillUnmount=function(){this.stop()},e.prototype.getCurrentValidValue=function(t){var e=t;return e=""===e?"":this.isNotCompleteNumber(parseFloat(e,10))?this.state.value:this.getValidValue(e),this.toNumber(e)},e.prototype.getRatio=function(t){var e=1;return t.metaKey||t.ctrlKey?e=.1:t.shiftKey&&(e=10),e},e.prototype.getValueFromEvent=function(t){var e=t.target.value.trim().replace(/\u3002/g,".");return v(this.props.decimalSeparator)&&(e=e.replace(this.props.decimalSeparator,".")),e},e.prototype.getValidValue=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.min,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.max,n=parseFloat(t,10);return isNaN(n)?t:(n<e&&(n=e),n>r&&(n=r),n)},e.prototype.setValue=function(t,e){var r=this.props.precision,n=this.isNotCompleteNumber(parseFloat(t,10))?null:parseFloat(t,10),o=this.state,i=o.value,s=void 0===i?null:i,a=o.inputValue,u=void 0===a?null:a,p="number"===typeof n?n.toFixed(r):""+n,l=n!==s||p!==""+u;return"value"in this.props?this.setState({inputValue:this.toPrecisionAsStep(this.state.value)},e):this.setState({value:n,inputValue:this.toPrecisionAsStep(t)},e),l&&this.props.onChange(n),n},e.prototype.getPrecision=function(t){if(v(this.props.precision))return this.props.precision;var e=t.toString();if(e.indexOf("e-")>=0)return parseInt(e.slice(e.indexOf("e-")+2),10);var r=0;return e.indexOf(".")>=0&&(r=e.length-e.indexOf(".")-1),r},e.prototype.getMaxPrecision=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.props,n=r.precision,o=r.step;if(v(n))return n;var i=this.getPrecision(e),s=this.getPrecision(o),a=this.getPrecision(t);return t?Math.max(a,i+s):i+s},e.prototype.getPrecisionFactor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getMaxPrecision(t,e);return Math.pow(10,r)},e.prototype.fixCaret=function(t,e){if(void 0!==t&&void 0!==e&&this.input&&this.input.value)try{var r=this.input.selectionStart,n=this.input.selectionEnd;t===r&&e===n||this.input.setSelectionRange(t,e)}catch(o){}},e.prototype.focus=function(){this.input.focus(),this.recordCursorPosition()},e.prototype.blur=function(){this.input.blur()},e.prototype.select=function(){this.input.select()},e.prototype.formatWrapper=function(t){return this.props.formatter?this.props.formatter(t):t},e.prototype.toPrecisionAsStep=function(t){if(this.isNotCompleteNumber(t)||""===t)return t;var e=Math.abs(this.getMaxPrecision(t));return isNaN(e)?t.toString():Number(t).toFixed(e)},e.prototype.isNotCompleteNumber=function(t){return isNaN(t)||""===t||null===t||t&&t.toString().indexOf(".")===t.toString().length-1},e.prototype.toNumber=function(t){var e=this.props.precision,r=this.state.focused,n=t&&t.length>16&&r;return this.isNotCompleteNumber(t)||n?t:v(e)?Math.round(t*Math.pow(10,e))/Math.pow(10,e):Number(t)},e.prototype.upStep=function(t,e){var r=this.props.step,n=this.getPrecisionFactor(t,e),o=Math.abs(this.getMaxPrecision(t,e)),i=((n*t+n*r*e)/n).toFixed(o);return this.toNumber(i)},e.prototype.downStep=function(t,e){var r=this.props.step,n=this.getPrecisionFactor(t,e),o=Math.abs(this.getMaxPrecision(t,e)),i=((n*t-n*r*e)/n).toFixed(o);return this.toNumber(i)},e.prototype.step=function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments[3];this.stop(),e&&(e.persist(),e.preventDefault());var i=this.props;if(!i.disabled){var s=this.getCurrentValidValue(this.state.inputValue)||0;if(!this.isNotCompleteNumber(s)){var a=this[t+"Step"](s,n),u=a>i.max||a<i.min;a>i.max?a=i.max:a<i.min&&(a=i.min),this.setValue(a),this.setState({focused:!0}),u||(this.autoStepTimer=setTimeout((function(){r[t](e,n,!0)}),o?200:600))}}},e.prototype.render=function(){var t,e,r,o=this.props,u=o.prefixCls,p=o.disabled,l=o.readOnly,c=o.useTouch,f=o.autoComplete,v=o.upHandler,m=o.downHandler,y=o.className,g=o.max,b=o.min,C=o.style,N=o.title,x=o.onMouseEnter,w=o.onMouseLeave,S=o.onMouseOver,E=o.onMouseOut,M=o.required,O=o.onClick,P=o.tabIndex,V=o.type,D=o.placeholder,A=o.id,F=o.inputMode,U=o.pattern,K=o.step,Z=o.maxLength,I=o.autoFocus,T=o.name,k=(0,s.Z)(o,["prefixCls","disabled","readOnly","useTouch","autoComplete","upHandler","downHandler","className","max","min","style","title","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","required","onClick","tabIndex","type","placeholder","id","inputMode","pattern","step","maxLength","autoFocus","name"]),B=this.state,L=B.value,R=B.focused,j=i()(u,((t={})[y]=!!y,t[u+"-disabled"]=p,t[u+"-focused"]=R,t)),H={};for(var q in k)!k.hasOwnProperty(q)||"data-"!==q.substr(0,5)&&"aria-"!==q.substr(0,5)&&"role"!==q||(H[q]=k[q]);var W=!l&&!p,_=this.getInputDisplayValue(),z=(L||0===L)&&(isNaN(L)||Number(L)>=g)||p||l,G=(L||0===L)&&(isNaN(L)||Number(L)<=b)||p||l,X=i()(u+"-handler",u+"-handler-up",((e={})[u+"-handler-up-disabled"]=z,e)),J=i()(u+"-handler",u+"-handler-down",((r={})[u+"-handler-down-disabled"]=G,r)),Q=c?{onTouchStart:z?h:this.up,onTouchEnd:this.stop}:{onMouseDown:z?h:this.up,onMouseUp:this.stop,onMouseLeave:this.stop},Y=c?{onTouchStart:G?h:this.down,onTouchEnd:this.stop}:{onMouseDown:G?h:this.down,onMouseUp:this.stop,onMouseLeave:this.stop};return n.createElement("div",{className:j,style:C,title:N,onMouseEnter:x,onMouseLeave:w,onMouseOver:S,onMouseOut:E},n.createElement("div",{className:u+"-handler-wrap"},n.createElement("span",(0,a.Z)({unselectable:"unselectable"},Q,{role:"button","aria-label":"Increase Value","aria-disabled":z,className:X}),v||n.createElement("span",{unselectable:"unselectable",className:u+"-handler-up-inner",onClick:d})),n.createElement("span",(0,a.Z)({unselectable:"unselectable"},Y,{role:"button","aria-label":"Decrease Value","aria-disabled":G,className:J}),m||n.createElement("span",{unselectable:"unselectable",className:u+"-handler-down-inner",onClick:d}))),n.createElement("div",{className:u+"-input-wrap"},n.createElement("input",(0,a.Z)({role:"spinbutton","aria-valuemin":b,"aria-valuemax":g,"aria-valuenow":L,required:M,type:V,placeholder:D,onClick:O,onMouseUp:this.onMouseUp,className:u+"-input",tabIndex:P,autoComplete:f,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:W?this.onKeyDown:h,onKeyUp:W?this.onKeyUp:h,autoFocus:I,maxLength:Z,readOnly:l,disabled:p,max:g,min:b,step:K,name:T,title:N,id:A,onChange:this.onChange,ref:this.saveInput,value:_,pattern:U,inputMode:F},H))))},e}(n.Component);y.defaultProps={focusOnUpDown:!0,useTouch:!1,prefixCls:"rc-input-number",min:-f,step:1,style:{},onChange:h,onKeyDown:h,onPressEnter:h,onFocus:h,onBlur:h,parser:function(t){return t.replace(/[^\w\.-]+/g,"")},required:!1,autoComplete:"off"};var g=function(){var t=this;this.onKeyDown=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i=t.props,s=i.onKeyDown,a=i.onPressEnter;if(e.keyCode===c.Z.UP){var u=t.getRatio(e);t.up(e,u),t.stop()}else if(e.keyCode===c.Z.DOWN){var p=t.getRatio(e);t.down(e,p),t.stop()}else e.keyCode===c.Z.ENTER&&a&&a(e);t.recordCursorPosition(),t.lastKeyCode=e.keyCode,s&&s.apply(void 0,[e].concat(n))},this.onKeyUp=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i=t.props.onKeyUp;t.stop(),t.recordCursorPosition(),i&&i.apply(void 0,[e].concat(n))},this.onChange=function(e){var r=t.props.onChange;t.state.focused&&(t.inputting=!0),t.rawInput=t.props.parser(t.getValueFromEvent(e)),t.setState({inputValue:t.rawInput}),r(t.toNumber(t.rawInput))},this.onMouseUp=function(){var e=t.props.onMouseUp;t.recordCursorPosition(),e&&e.apply(void 0,arguments)},this.onFocus=function(){var e;t.setState({focused:!0}),(e=t.props).onFocus.apply(e,arguments)},this.onBlur=function(){var e=t.props.onBlur;t.inputting=!1,t.setState({focused:!1});var r=t.getCurrentValidValue(t.state.inputValue),n=t.setValue(r);if(e){var o=t.input.value,i=t.getInputDisplayValue({focus:!1,value:n});t.input.value=i,e.apply(void 0,arguments),t.input.value=o}},this.getInputDisplayValue=function(e){var r=e||t.state,n=r.focused,o=r.inputValue,i=r.value,s=void 0;void 0!==(s=n?o:t.toPrecisionAsStep(i))&&null!==s||(s="");var a=t.formatWrapper(s);return v(t.props.decimalSeparator)&&(a=a.toString().replace(".",t.props.decimalSeparator)),a},this.recordCursorPosition=function(){try{t.cursorStart=t.input.selectionStart,t.cursorEnd=t.input.selectionEnd,t.currentValue=t.input.value,t.cursorBefore=t.input.value.substring(0,t.cursorStart),t.cursorAfter=t.input.value.substring(t.cursorEnd)}catch(e){}},this.restoreByAfter=function(e){if(void 0===e)return!1;var r=t.input.value,n=r.lastIndexOf(e);if(-1===n)return!1;var o=t.cursorBefore.length;return t.lastKeyCode===c.Z.DELETE&&t.cursorBefore.charAt(o-1)===e[0]?(t.fixCaret(o,o),!0):n+e.length===r.length&&(t.fixCaret(n,n),!0)},this.partRestoreByAfter=function(e){return void 0!==e&&Array.prototype.some.call(e,(function(r,n){var o=e.substring(n);return t.restoreByAfter(o)}))},this.stop=function(){t.autoStepTimer&&clearTimeout(t.autoStepTimer)},this.down=function(e,r,n){t.pressingUpOrDown=!0,t.step("down",e,r,n)},this.up=function(e,r,n){t.pressingUpOrDown=!0,t.step("up",e,r,n)},this.saveInput=function(e){t.input=e}},b=y,C=r(7647),N=r.n(C),x=r(1643),w=r.n(x),S=r(9077),E=r(3081);function M(){return M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},M.apply(this,arguments)}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var P=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},V=n.forwardRef((function(t,e){var r=function(r){var o=r.getPrefixCls,s=r.direction,a=t.className,u=t.size,p=t.prefixCls,l=P(t,["className","size","prefixCls"]),c=o("input-number",p),h=n.createElement(N(),{className:"".concat(c,"-handler-up-inner")}),d=n.createElement(w(),{className:"".concat(c,"-handler-down-inner")});return n.createElement(E.Z.Consumer,null,(function(t){var r,o=u||t,p=i()((O(r={},"".concat(c,"-lg"),"large"===o),O(r,"".concat(c,"-sm"),"small"===o),O(r,"".concat(c,"-rtl"),"rtl"===s),r),a);return n.createElement(b,M({ref:e,className:p,upHandler:h,downHandler:d,prefixCls:c},l))}))};return n.createElement(S.C,null,r)}));V.defaultProps={step:1};var D=V},3891:function(t,e){e.Z=function(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}}}]);
//# sourceMappingURL=493.ce50b6e8.chunk.js.map