"use strict";(self.webpackChunktext_roleplay=self.webpackChunktext_roleplay||[]).push([[449,272,462],{8272:function(e,t,n){n.r(t);var r=n(2791),a=n(8183),o=n(4964),l=n(732);n(2462);t.default=function(e){var t=e.perk,n=e.onDelete,i=e.hasRight;return r.createElement("div",{className:"perks-item"},n&&i&&r.createElement(a.Z,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0440\u043a?",okText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",onConfirm:function(){return n(t)}},r.createElement(o.Z,{className:"perks-item-close"},r.createElement(l.Z,null))),r.createElement("div",{className:"perks-item-label"},t.label),r.createElement("div",{className:"perks-item-description"},t.description))}},449:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(4942),a=n(2982),o=n(1413),l=n(3144),i=n(5671),c=n(136),s=n(4062),u=n(2791),f=n(4233),d=n(9271),p=n(8528),m=n(3347),v=n(4964),h=n(2756),b=n(8409),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},g=n(4291),E=function(e,t){return u.createElement(g.Z,Object.assign({},e,{ref:t,icon:y}))};E.displayName="UpOutlined";var k=u.forwardRef(E),Z=n(3097),C=(n(2462),n(8272)),w=n(3824),x=n(2404),O=function(e){(0,c.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var l=arguments.length,c=new Array(l),s=0;s<l;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={label:"",description:""},e.componentDidMount=function(){var t=e.props,n=t.character,r=t.uid,a=t.user,o=t.currentUser,l=t.history;n||x.default.getCharacter({uid:r}),(0,w.redirectToUserPage)(a,o,l)},e.componentDidUpdate=function(){var t=e.props,n=t.user,r=t.currentUser,a=t.history;(0,w.redirectToUserPage)(n,r,a)},e.scrollUp=function(){return e.bodyRef&&e.bodyRef.scrollTo({left:0,top:0,behavior:"smooth"})},e.onSend=function(){var t=e.props,n=t.uid,r=t.character,l=e.state,i=l.description,c=l.label;if(r)if(c)if(c.length>32)p.Z.error("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u043a\u0430 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u043e\u0435! \u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 32-\u0445 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432");else if(i){var s={id:Date.now(),label:c,description:i},u=(0,o.Z)((0,o.Z)({},r),{},{perks:[].concat((0,a.Z)(r.perks||[]),[s])});x.default.setCharacter({uid:n,character:u}),x.default.sendMessage({uid:n,message:"*\u043f\u043e\u043b\u0443\u0447\u0438\u043b \u043f\u0435\u0440\u043a",data:{perk:s}}),e.setState({label:"",description:""})}else p.Z.error("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u043a\u0430!");else p.Z.error("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u043a\u0430!")},e.onChange=function(t,n){return e.setState({label:n.label||"",description:n.description||""})},e.onDelete=function(t){var n=e.props,r=n.uid,a=n.character;if(a){var l=(0,o.Z)((0,o.Z)({},a),{},{perks:a.perks.filter((function(e){return t.id!==e.id}))});x.default.setCharacter({uid:r,character:l}),x.default.sendMessage({uid:r,message:"*\u043f\u043e\u0442\u0435\u0440\u044f\u043b \u043f\u0435\u0440\u043a",data:{perk:t}})}},e.onChangeInput=function(t){return function(n){return e.setState((0,r.Z)({},t,n.target.value))}},e.onKeyDown=function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),e.onSend())},e.bodyRef=null,e.render=function(){var t=e.props,n=t.character,r=t.user,a=t.hasRight,o=e.state,l=o.label,i=o.description;return!(!r||!n)&&u.createElement(m.Z,{className:"perks",title:u.createElement(u.Fragment,null,u.createElement(b.Z,null)," ","\u041f\u0435\u0440\u043a\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430 ",r.nickname)},u.createElement("div",{className:"perks-body",ref:function(t){return e.bodyRef=t}},(n.perks||[]).map((function(t){return u.createElement(C.default,{key:t.id,perk:t,onDelete:e.onDelete,hasRight:a})}))),u.createElement("div",{className:"perks-controls"},u.createElement(v.Z,{onClick:e.scrollUp},u.createElement(k,null)),u.createElement("div",{className:"perks-controls-form"},u.createElement(h.Z,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u043a\u0430",disabled:!a,onChange:e.onChangeInput("label"),onPressEnter:e.onSend,value:l}),u.createElement(h.Z.TextArea,{placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u043a\u0430",onKeyDown:e.onKeyDown,disabled:!a,onChange:e.onChangeInput("description"),value:i})),u.createElement(v.Z,{disabled:!a,onClick:e.onSend},u.createElement(Z.Z,null))))},e}return(0,l.Z)(n)}(u.Component),S=(0,d.EN)((0,f.$j)((function(e,t){var n=(0,w.getStateUser)(e,t),r=n.user,a=n.currentUser,l=n.character,i=!!r&&!!a&&a.approved&&(a.uid===r.uid&&l&&!l.static||a.isAdmin);return(0,o.Z)((0,o.Z)({},n),{},{hasRight:i})}))(O))},3097:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(2791),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},o=n(4291),l=function(e,t){return r.createElement(o.Z,Object.assign({},e,{ref:t,icon:a}))};l.displayName="SendOutlined";var i=r.forwardRef(l)},8183:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(2791),a=n(9901),o=n.n(a),l=n(4469),i=n(4964),c=n(3439),s=n(1104),u=n(9077),f=void 0;function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},h=r.forwardRef((function(e,t){var n=p(r.useState(e.visible),2),a=n[0],o=n[1];r.useEffect((function(){"visible"in e&&o(e.visible)}),[e.visible]),r.useEffect((function(){"defaultVisible"in e&&o(e.defaultVisible)}),[e.defaultVisible]);var m=function(t,n){"visible"in e||o(t),e.onVisibleChange&&e.onVisibleChange(t,n)},h=function(t){m(!1,t),e.onConfirm&&e.onConfirm.call(f,t)},b=function(t){m(!1,t),e.onCancel&&e.onCancel.call(f,t)},y=r.useContext(u.E_).getPrefixCls,g=e.prefixCls,E=e.placement,k=v(e,["prefixCls","placement"]),Z=y("popover",g),C=r.createElement(c.Z,{componentName:"Popconfirm",defaultLocale:s.Z.Popconfirm},(function(t){return function(t,n){var a,o=e.okButtonProps,l=e.cancelButtonProps,c=e.title,s=e.cancelText,u=e.okText,f=e.okType,p=e.icon;return r.createElement("div",{className:"".concat(t,"-inner-content")},r.createElement("div",{className:"".concat(t,"-message")},p,r.createElement("div",{className:"".concat(t,"-message-title")},(a=c)?"function"===typeof a?a():a:null)),r.createElement("div",{className:"".concat(t,"-buttons")},r.createElement(i.Z,d({onClick:b,size:"small"},l),s||n.cancelText),r.createElement(i.Z,d({onClick:h,type:f,size:"small"},o),u||n.okText)))}(Z,t)}));return r.createElement(l.Z,d({},k,{prefixCls:Z,placement:E,onVisibleChange:function(t){e.disabled||m(t)},visible:a,overlay:C,ref:t}))}));h.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:r.createElement(o(),null),disabled:!1};var b=h},2462:function(e,t,n){n.r(t),t.default={}}}]);
//# sourceMappingURL=449.fc1c5d47.chunk.js.map