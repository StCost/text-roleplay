(this["webpackJsonptext-roleplay"]=this["webpackJsonptext-roleplay"]||[]).push([[35],{110:function(e,t,a){"use strict";a.r(t),a.d(t,"listenForActivity",(function(){return l})),a.d(t,"addStatusChangeListener",(function(){return d})),a.d(t,"removeStatusChangeListener",(function(){return f}));var n=a(24),r=a(5),s={online:[],afk:[],offline:[]},c=["mousedown","mousemove","keydown","scroll","touchstart"],i="",u=0,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t||i!==e){var a=Date.now();if(t||!(a<u+500)){var n=localStorage.getItem("uid");n&&(i=e,u=a,"online"===e?r.default.updateLastOnline({}):r.default.setUserStatus({uid:n,status:e}))}}},l=function(){!function(){var e=function(){!document.hidden&&(!Object(n.isOnline)(parseInt(localStorage.getItem("lastActivity")||"0")-6e4)||"online"!==i)&&m(!0)};c.forEach((function(t){return document.addEventListener(t,e,!0)})),!document.hidden&&document.hasFocus()?m(!0):p(!0)}(),document.onvisibilitychange=function(){return document.hidden?p():m()},window.onblur=function(){return setTimeout((function(){return!document.hasFocus()&&p()}),100)},window.onfocus=function(){return setTimeout((function(){return!document.hidden&&document.hasFocus()&&m()}),100)},window.onbeforeunload=function(){b()}},d=function(e,t){return s[e].push(t)},f=function(e,t){return s[e]=s[e].filter((function(e){return e!==t}))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.online.forEach((function(e){return e()})),o("online",e)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.afk.forEach((function(e){return e()})),o("afk",e)},b=function(){s.offline.forEach((function(e){return e()})),o("offline",!0)}},111:function(e,t,a){"use strict";a.r(t);var n=a(50),r=a(194),s=a(52),c=a(51),i=a(0),u=a.n(i),o=a(448),l=a(463),d=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={visible:!1},e.toggleModal=function(){e.setState({visible:!e.state.visible})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.noTitle,n=void 0!==a&&a;return u.a.createElement(u.a.Fragment,null,u.a.createElement("img",{onClick:this.toggleModal,src:t,alt:"",className:"chat-image"}),u.a.createElement(o.a,{title:!n&&u.a.createElement("div",null,u.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},t),u.a.createElement(l.a,{onClick:this.toggleModal})),className:"image-modal",closable:!1,footer:null,visible:this.state.visible,onCancel:this.toggleModal,width:"fit-content"},u.a.createElement("img",{style:{maxWidth:"100%"},src:t,alt:""})))}}]),a}(i.Component);t.default=d},114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(12),c=a.n(s),i=a(38),u=(a(203),a(126)),o=a(90),l=a(72),d=a(142),f=a(8);navigator.serviceWorker.register("sw/firebase-messaging-sw.js").then((function(e){f.messaging.useServiceWorker(e)})),l.sagaMiddleware.run(o.default),c.a.render(r.a.createElement(i.a,{store:l.default},r.a.createElement(u.default,null)),document.getElementById("root")),d.unregister()},126:function(e,t,a){"use strict";a.r(t);var n=a(50),r=a(52),s=a(51),c=a(0),i=a.n(c),u=a(28),o=a(103),l=a(38),d=a(107),f=a(447),m=a(151),p=a.n(m),b=(a(285),a(286),a(127)),g=a(129),h=(a(228),a(229),a(230),a(44)),E=a(5),v=a(134),S=a(89),O=i.a.createElement("div",{className:"build-date"},"build date ",window.buildDate.replace("_"," "));p()().locale("ru");var I=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).applyZoom=function(){var t=document.querySelector("html");t&&(t.style.zoom="".concat(e.getZoom()/100))},e.UNSAFE_componentWillMount=e.applyZoom,e.componentDidUpdate=function(){var t=e.props,a=t.notify,n=t.redirect;a&&(d.a.info(a),E.default.notifySuccess({})),n&&E.default.redirectSuccess({}),e.applyZoom()},e.getRedirect=function(){var t=e.props.redirect;return t&&i.a.createElement(u.a,{to:t})},e.getZoom=function(){return parseInt(localStorage.getItem("zoom")||"".concat(h.defaultUser.zoom))},e.render=function(){var t=e.props.loading;return i.a.createElement(v.default,null,O,i.a.createElement(S.default,{loading:t}),i.a.createElement(o.a,null,e.getRedirect(),i.a.createElement(b.default,null),i.a.createElement(f.a,{spinning:t},i.a.createElement("div",{className:"app"},i.a.createElement(g.default,null)))))},e}return a}(c.Component);t.default=Object(l.b)((function(e){return{redirect:e.redirect,notify:e.notify,loading:e.loading,currentUser:e.currentUser}}))(I)},127:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(2),s=a(50),c=a(52),i=a(51),u=a(0),o=a.n(u),l=a(106),d=a(103),f=a(28),m=a(38),p=a(461),b=a(462),g=(a(204),a(49)),h=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(s.a)(this,a);for(var c=arguments.length,i=new Array(c),u=0;u<c;u++)i[u]=arguments[u];return(e=t.call.apply(t,[this].concat(i))).state=Object(r.a)({openedKeys:["char","user"],showDisabledMenus:!1},JSON.parse(localStorage.getItem("menu-opened")||"{}")),e.componentDidUpdate=function(t,a){a!==e.state&&localStorage.setItem("menu-opened",JSON.stringify(e.state));var n=e.state.showDisabledMenus,r=e.props.currentUser,s="true"===localStorage.getItem("enableDisabledFeatures")||(null===r||void 0===r?void 0:r.enableDisabledFeatures)||!1;s!==n&&e.setState({showDisabledMenus:s})},e.getMenuItem=function(t){var a=e.state.showDisabledMenus;return(!t.disabled||a)&&o.a.createElement(l.a.Item,{className:a&&"/chat"===t.path&&e.props.unreadMessage?"unread":"",key:t.path.split("/").pop(),disabled:t.path===e.props.location.pathname},o.a.createElement(d.b,{to:t.path},t.icon,"function"===typeof t.label?t.label():t.label))},e.onTitleClick=function(t){var a=e.state.openedKeys;a.indexOf(t.key)>-1?e.setState({openedKeys:a.filter((function(e){return e!==t.key}))}):e.setState({openedKeys:[].concat(Object(n.a)(a),[t.key])})},e.getDesktopMenu=function(){var t=e.props.location,a=e.state.openedKeys,n=o.a.createElement(l.a.SubMenu,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",key:"user",icon:o.a.createElement(p.a,null),onTitleClick:e.onTitleClick},g.userMenu.map(e.getMenuItem)),r=o.a.createElement(l.a.SubMenu,{title:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436",key:"char",icon:o.a.createElement(b.a,null),onTitleClick:e.onTitleClick},g.characterMenu.map(e.getMenuItem)),s=g.default.map(e.getMenuItem);return o.a.createElement("div",{className:"menu"},o.a.createElement(l.a,{mode:"inline",selectedKeys:[t.pathname.split("/").pop()||""],openKeys:a},r,n,s))},e.getMobileMenu=function(){var t=e.props.location;return o.a.createElement("div",{className:"menu"},o.a.createElement(l.a,{mode:"horizontal",selectedKeys:[t.pathname.split("/").pop()||""]},[].concat(Object(n.a)(g.characterMenu),Object(n.a)(g.userMenu),Object(n.a)(g.default)).map(e.getMenuItem)))},e.render=function(){return e.props.isLoggedIn?"inline"===(window.innerWidth<767?"horizontal":"inline")?e.getDesktopMenu():e.getMobileMenu():o.a.createElement(o.a.Fragment,null)},e}return a}(u.Component);t.default=Object(m.b)((function(e){return{isLoggedIn:e.isLoggedIn,unreadMessage:e.unreadMessage,currentUser:e.currentUser}}))(Object(f.g)(h))},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),c=a(38),i=a(66),u=a(130),o=a(131);t.default=Object(c.b)((function(e){return{isLoggedIn:e.isLoggedIn}}))((function(e){return e.isLoggedIn?r.a.createElement(s.d,null,u.default.map((function(e){var t=Object(n.lazy)((function(){return a(441)("./".concat(e.component))}));return r.a.createElement(s.b,{key:e.path,path:e.path,exact:e.exact||!1,component:function(){return r.a.createElement(n.Suspense,{key:e.path,fallback:r.a.createElement(i.a,{description:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f..."})},r.a.createElement(t,null))}})})),r.a.createElement(s.a,{to:"/stats"})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"*",component:o.default}))}))},130:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(2),s=function(e){return[Object(r.a)(Object(r.a)({},e),{},{exact:!0}),{path:"/:uid".concat(e.path),component:e.component,exact:!0}]},c=[{path:"/chat",component:"containers/Chat"}].concat(Object(n.a)(s({path:"/inventory",component:"containers/Inventory"})),Object(n.a)(s({path:"/perks",component:"containers/Perks"})),Object(n.a)(s({path:"/stats",component:"containers/Character"})),Object(n.a)(s({path:"/notes",component:"components/Notebook"})),Object(n.a)(s({path:"/settings",component:"containers/Settings"})),Object(n.a)(s({path:"/status",component:"containers/Status"})),[{path:"/items",component:"containers/Items"},{path:"/users",component:"components/Users"},{path:"/help",component:"components/Help"},{path:"/logout",component:"components/Logout"}]);t.default=c},131:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(449),c=a(74),i=a(33),u=a(75),o=a(35),l=a(5);t.default=function(){return r.a.createElement(s.a,null,r.a.createElement(c.a,{defaultActiveKey:"1"},r.a.createElement(c.a.TabPane,{tab:"\u041b\u043e\u0433\u0438\u043d",key:"1"},r.a.createElement(i.a,{onFinish:function(e){return l.default.login(e)}},r.a.createElement(i.a.Item,{label:"E-Mail",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail!"}]},r.a.createElement(u.a,null)),r.a.createElement(i.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}]},r.a.createElement(u.a.Password,null)),r.a.createElement(i.a.Item,null,r.a.createElement(o.a,{type:"primary",htmlType:"submit"},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement(c.a.TabPane,{tab:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",key:"2"},r.a.createElement(i.a,{onFinish:l.default.register},r.a.createElement(i.a.Item,{label:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c",name:"nickname",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0438\u043a\u043d\u0435\u0439\u043c!"}]},r.a.createElement(u.a,null)),r.a.createElement(i.a.Item,{label:"E-Mail",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail!"}]},r.a.createElement(u.a,null)),r.a.createElement(i.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!"}]},r.a.createElement(u.a.Password,null)),r.a.createElement(i.a.Item,{label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u041f\u0430\u0440\u043e\u043b\u044c",name:"passwordConfirm",rules:[{required:!0,message:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b!"}]},r.a.createElement(u.a.Password,null)),r.a.createElement(i.a.Item,null,r.a.createElement(o.a,{type:"primary",htmlType:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))),r.a.createElement(c.a.TabPane,{tab:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",key:"3"},r.a.createElement(i.a,{onFinish:function(e){return l.default.resetPassword(e)}},r.a.createElement(i.a.Item,{label:"E-Mail",name:"email",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail!"}]},r.a.createElement(u.a,null)),r.a.createElement(i.a.Item,null,r.a.createElement(o.a,{type:"primary",htmlType:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f \u043d\u0430 E-mail"))))))}},133:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);t.default=function(e){var t=e.link,a=new URL(t).searchParams,n="listType=playlist",s=function(e){if(!(e.indexOf("youtu.be")>-1))return new URL(e).searchParams.get("v")||"";var t=e.match(/youtu\.be\/.* /i);if(t){var a=t.pop();if(a)return a.split("/").pop()||""}return""}(t);if(s){var c=a.get("list");c&&(n+="&list="+c);var i=a.get("t");return i&&(n+="&start="+i),r.a.createElement("iframe",{title:s,id:"ytplayer",width:"100%",height:"360",src:"https://www.youtube.com/embed/".concat(s,"?").concat(n),frameBorder:"0",allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}return null}},134:function(e,t,a){"use strict";a.r(t);var n=a(50),r=a(52),s=a(51),c=a(0),i=a.n(c),u=a(35),o=a(66),l=a(38),d=a(5),f=function(e){Object(r.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).componentDidCatch=function(e){return d.default.setError({error:e}),{}},e.getErrorMessage=function(e){return i.a.createElement("div",{className:"error-boundary"},i.a.createElement("span",null,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u0443\u0440\u043e\u043d\u0438\u0432\u0448\u0430\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435. \u041e\u0431\u044b\u0447\u043d\u043e, \u044d\u0442\u043e \u043d\u0435 \u043a\u0440\u0438\u0442\u0438\u0447\u043d\u043e, \u043f\u0440\u043e\u0441\u0442\u043e \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"),i.a.createElement("span",null,"\u0415\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442\u0441\u044f - \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443, \u043f\u0440\u0438\u043b\u043e\u0436\u0438\u0432 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0432\u043e\u0438\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u0432\u0435\u043b\u0438 \u043a \u043e\u0448\u0438\u0431\u043a\u0435. \u0422\u0430\u043a \u0436\u0435 \u043f\u043e\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442 \u043e\u0448\u0438\u0431\u043a\u0438 \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u0438"),i.a.createElement(u.a,{onClick:function(){return window.location.reload()}},"\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",{className:"error-boundary-message"},i.a.createElement("p",null,e.name),i.a.createElement("br",null),i.a.createElement("p",null,e.message),i.a.createElement("br",null),i.a.createElement("p",null,JSON.stringify(e.stack,void 0,2))))},e.render=function(){var t=e.props.error;return t?i.a.createElement(o.a,{description:e.getErrorMessage(t)}):e.props.children},e}return a}(i.a.Component);t.default=Object(l.b)((function(e){return{error:e.error}}))(f)},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);t.default=function(){return r.a.createElement("svg",{viewBox:"64 64 896 896",focusable:"false",className:"anticon-spin","data-icon":"sync",width:"1em",height:"1em",fill:"#ff4d4f","aria-hidden":"true"},r.a.createElement("path",{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}))}},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);t.default=function(){return r.a.createElement("svg",{viewBox:"64 64 896 896",focusable:"false",className:"","data-icon":"check-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},r.a.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:"#52c41a"}),r.a.createElement("path",{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:"transparent"}),r.a.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:"#52c41a"}))}},137:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return I}));var n=a(2),r=a(6),s=a.n(r),c=a(10),i=a(8),u=a(5),o=a(44),l=a(110),d=a(29),f=s.a.mark(h),m=s.a.mark(E),p=s.a.mark(v),b=s.a.mark(S),g=s.a.mark(I);function h(e){var t,a,n;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.email,a=e.password,r.prev=1,r.next=4,i.auth.signInWithEmailAndPassword(t,a);case 4:return n=r.sent,u.default.loginSuccess({user:n}),localStorage.setItem("user",JSON.stringify(n.user)),localStorage.setItem("uid",n.user.uid),r.abrupt("return",n.user);case 11:return r.prev=11,r.t0=r.catch(1),u.default.loginFail({error:r.t0}),r.abrupt("return",!1);case 15:case"end":return r.stop()}}),f,null,[[1,11]])}function E(e){var t,a,r,c,l,f;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.email,a=e.password,r=e.passwordConfirm,c=e.nickname,a===r){s.next=4;break}return u.default.registerFail({error:{message:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!"}}),s.abrupt("return");case 4:return s.prev=4,s.next=7,i.auth.createUserWithEmailAndPassword(t,a);case 7:return u.default.registerSuccess({}),s.next=10,h(e);case 10:(l=s.sent)&&(f=l.uid,u.default.setUser({uid:f,user:Object(n.a)(Object(n.a)({},o.defaultUser),{},{uid:f,nickname:c,lastOnline:Date.now(),status:"online"})}),u.default.setCharacter({uid:f,character:Object(d.getInitialCharacter)()}),u.default.getUser({uid:f,currentUser:!0}),u.default.sendMessage({uid:f,message:"*[\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d]*"})),s.next=18;break;case 14:s.prev=14,s.t0=s.catch(4),console.error(s.t0),u.default.registerFail({error:s.t0});case 18:case"end":return s.stop()}}),m,null,[[4,14]])}function v(e){var t;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.email,a.prev=1,a.next=4,i.auth.sendPasswordResetEmail(t);case 4:u.default.resetPasswordSuccess({}),u.default.notify({message:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430 \u043d\u0430 E-mail!"}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0),u.default.resetPasswordFail({error:a.t0});case 12:case"end":return a.stop()}}),p,null,[[1,8]])}function S(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("uid"),u.default.setUserStatus({uid:e,status:"offline"}),localStorage.removeItem("user"),localStorage.removeItem("uid"),t.next=6,i.auth.signOut();case 6:case"end":return t.stop()}}),b)}function O(e){localStorage.setItem("user",JSON.stringify(e.user)),u.default.updateLastOnline({}),Object(l.listenForActivity)()}function I(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)([Object(c.c)("LOGIN",h),Object(c.c)("REGISTER",E),Object(c.c)("RESET_PASSWORD",v),Object(c.c)("LOGOUT",S),Object(c.c)("LOGIN_SUCCESS",O)]);case 2:case"end":return e.stop()}}),g)}},138:function(e,t,a){"use strict";a.r(t),a.d(t,"setUserStatus",(function(){return I})),a.d(t,"default",(function(){return x}));var n=a(27),r=a(6),s=a.n(r),c=a(2),i=a(10),u=a(8),o=a(5),l=s.a.mark(h),d=s.a.mark(v),f=s.a.mark(S),m=s.a.mark(O),p=s.a.mark(I),b=s.a.mark(j),g=s.a.mark(x);function h(e){var t,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.uid,a=e.user,n.next=3,u.database.ref("users").child(t).set(Object(c.a)(Object(c.a)({},a),{},{uid:t}));case 3:o.default.setUserSuccess({});case 4:case"end":return n.stop()}}),l)}var E={};function v(e){var t,a,r;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.uid,a=e.currentUser,!E[t]||a){s.next=4;break}return o.default.getUserFail({uid:t,error:"User is already listened"}),s.abrupt("return");case 4:return r=u.database.ref("users").child(t),E[t]=!0,s.prev=6,s.next=9,r.once("value",(function(e){var s=e.val();s?(o.default.getUserSuccess({uid:t,user:s,currentUser:a}),r.on("child_changed",(function(e){var r=e.key;if(r){var s=e.val();o.default.getUserSuccess({uid:t,updatedData:Object(n.a)({},r,s),currentUser:a})}}))):o.default.getUserFail({uid:t,user:{uid:t,error:{message:"User does not exist",code:"user/not-exist"}}})}));case 9:s.next=16;break;case 11:s.prev=11,s.t0=s.catch(6),console.error(s.t0),o.default.getUserFail(Object(c.a)(Object(c.a)({},e),{},{error:"Permission denied"})),E[t]=!1;case 16:case"end":return s.stop()}}),d,null,[[6,11]])}function S(){var e,t;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.database.ref("users").once("value");case 3:e=a.sent,t=e.val()||{},o.default.getAllUsersSuccess({users:t}),Object.keys(t).forEach((function(e){u.database.ref("users").child(e).on("child_changed",(function(t){E[e]=!0;var a=t.key;if(a){var r=t.val();o.default.getUserSuccess({uid:e,updatedData:Object(n.a)({},a,r)})}}))})),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),console.error(a.t0),o.default.getAllUsersFail({error:"Permission denied"});case 13:case"end":return a.stop()}}),f,null,[[0,9]])}function O(){var e,t,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((e=localStorage.getItem("uid"))&&"undefined"!==e){n.next=3;break}return n.abrupt("return");case 3:return t=Date.now(),localStorage.setItem("lastActivity","".concat(t)),a=u.database.ref("users").child("".concat(e)),n.next=8,a.child("lastOnline").set(t);case 8:return n.next=10,a.child("status").set("online");case 10:case"end":return n.stop()}}),m)}function I(e){var t,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.uid,a=e.status,t&&a){n.next=4;break}return console.error("Uid or status not defined",e),n.abrupt("return");case 4:return n.next=6,u.database.ref("users/".concat(t,"/status")).set(a);case 6:case"end":return n.stop()}}),p)}function j(e){var t;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.uid,a.next=3,u.database.ref("users").child(t).remove();case 3:return a.next=5,u.database.ref("characters").child(t).remove();case 5:o.default.redirect({to:"/chat"}),o.default.notify({message:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0451\u043d"});case 7:case"end":return a.stop()}}),b)}function x(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)([Object(i.c)("GET_USER",v),Object(i.c)("SET_USER",h),Object(i.c)("UPDATE_LAST_ONLINE",O),Object(i.b)("SET_USER_STATUS",I),Object(i.b)("GET_ALL_USERS",S),Object(i.b)("FULL_DELETE_USER",j)]);case 2:case"end":return e.stop()}}),g)}},139:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return y}));var n=a(102),r=a(6),s=a.n(r),c=a(2),i=a(10),u=a(5),o=a(8),l=a(24),d=a(56),f=s.a.mark(E),m=s.a.mark(O),p=s.a.mark(I),b=s.a.mark(j),g=s.a.mark(x),h=s.a.mark(y);function E(e){var t,a,n,r,i;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.item,a=Date.now(),n=t.id||Object(l.generateID)(),r=localStorage.getItem("uid"),i=Object(c.a)(Object(c.a)({},t),{},{id:n,time:a,author:r}),s.next=7,o.database.ref("items").child("".concat(n)).set(i);case 7:u.default.setItemSuccess({itemData:i}),u.default.getItemById({id:n});case 9:case"end":return s.stop()}}),f)}function v(){var e=function(e){var t=e.val();t&&u.default.getItemsSuccess({items:[t]})};o.database.ref("items").on("child_added",e),o.database.ref("items").on("child_changed",e)}function S(){o.database.ref("items").off()}function O(){var e,t;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.database.ref("items").orderByKey().limitToFirst(30).once("value");case 2:e=a.sent,t=Object.values(e.val()||{}),u.default.getItemsSuccess({items:t});case 5:case"end":return a.stop()}}),m)}function I(e){var t,a,n;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,r.next=3,o.database.ref("items").child(t).once("value");case 3:return a=r.sent,n=a.val()||Object(l.getFailedItem)(t),u.default.getItemsSuccess({items:[n]}),r.abrupt("return",!0);case 7:case"end":return r.stop()}}),p)}function j(e){var t,a,n,r,c;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.amount,a=void 0===t?1:t,n=e.lastItem){s.next=6;break}return u.default.notify({message:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 \u043f\u0443\u0441\u0442!"}),console.error("No last item",e),u.default.getMoreItemsFail({}),s.abrupt("return");case 6:return s.next=8,o.database.ref("items").orderByKey().startAt("".concat(n.id)).limitToFirst(a+1).once("value");case 8:r=s.sent,c=Object.values(r.val()||{}).splice(1),u.default.getItemsSuccess({items:c});case 11:case"end":return s.stop()}}),b)}function x(e){var t,a,r,c,i,l,f,m,p,b,h;return s.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return h=function(){return(h=Object(n.a)(s.a.mark((function e(a){var n,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m[a]){e.next=3;break}return e.abrupt("return");case 3:if(c=r(),setTimeout((function(){return u.default.deleteItemProgress({field:"usersChecked",value:a+1})}),c),!n.inventory){e.next=11;break}if(!(i=Object.values(n.inventory).find((function(e){return e.id===t})))){e.next=11;break}return e.next=10,o.database.ref("character/".concat(n.uid,"/inventory/").concat(t,"|").concat(i.time)).remove();case 10:setTimeout((function(){return u.default.deleteItemProgress({field:"usersCleared",value:++p})}),c);case 11:return e.next=13,b(a+1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)},b=function(e){return h.apply(this,arguments)},f=function(){return(f=Object(n.a)(s.a.mark((function e(a){var n,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c[a]){e.next=3;break}return e.abrupt("return");case 3:if(d=r(),setTimeout((function(){return u.default.deleteItemProgress({field:"messagesChecked",value:a+1})}),d),!n.data||!n.data.itemId||n.data.itemId!==t){e.next=9;break}return e.next=8,o.database.ref("messages/".concat(n.time,"/data")).remove();case 8:setTimeout((function(){return u.default.deleteItemProgress({field:"messagesCleared",value:++i})}),d);case 9:return e.next=11,l(a+1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)},l=function(e){return f.apply(this,arguments)},t=e.id,g.next=7,o.database.ref("items/".concat(t)).remove();case 7:return u.default.deleteItemProgress({field:"deleted",value:!0}),a=0,r=function(){return a+=Object(d.getRandomInt)(10,500)},g.t0=Object,g.next=13,o.database.ref("messages").once("value");case 13:if(g.t1=g.sent.val(),g.t1){g.next=16;break}g.t1={};case 16:return g.t2=g.t1,c=g.t0.values.call(g.t0,g.t2),i=0,g.next=21,l(0);case 21:return g.t3=Object,g.next=24,o.database.ref("characters").once("value");case 24:if(g.t4=g.sent.val(),g.t4){g.next=27;break}g.t4={};case 27:return g.t5=g.t4,m=g.t3.values.call(g.t3,g.t5),p=0,g.next=32,b(0);case 32:setTimeout((function(){return u.default.deleteItemProgress({field:"done",value:!0})}),r()),u.default.deleteItemSuccess({id:t});case 34:case"end":return g.stop()}}),g)}function y(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)([Object(i.c)("DELETE_ITEM",x),Object(i.c)("SET_ITEM",E),Object(i.c)("GET_ITEMS",O),Object(i.c)("GET_MORE_ITEMS",j),Object(i.b)("GET_ITEM_BY_ID",I),Object(i.c)("SUBSCRIBE",v),Object(i.c)("UNSUBSCRIBE",S)]);case 2:case"end":return e.stop()}}),h)}},140:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return I}));var n=a(2),r=a(6),s=a.n(r),c=a(10),i=a(8),u=a(5),o=a(95),l=a(24),d=s.a.mark(h),f=s.a.mark(E),m=s.a.mark(v),p=s.a.mark(S),b=s.a.mark(O),g=s.a.mark(I);function h(e){var t,a,n,r,c,i,o,f,m;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.id,a=e.uid,n=e.demonstrate,r=e.use,c=e.item,i=e.to,o=e.ignoreAmountCheck,!(t&&a&&c)){s.next=33;break}if(f=Object(l.getItemName)(c),!n){s.next=8;break}return u.default.sendMessage({uid:a,message:"*\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 ".concat(f),data:{itemId:t,amount:c.amount}}),u.default.passItemSuccess({}),u.default.notify({message:"\u0412\u044b \u043f\u043e\u043a\u0430\u0437\u0430\u043b\u0438 ".concat(f)}),s.abrupt("return",!0);case 8:if(s.t0=o,s.t0){s.next=13;break}return s.next=12,E({id:t,uid:a,amount:c.amount});case 12:s.t0=s.sent;case 13:if(s.t0){s.next=18;break}return console.error("passItem error:",e),u.default.passItemFail({id:t,uid:a}),s.abrupt("return",!1);case 18:if(!r){s.next=24;break}return m=Object(l.getItemName)(c,!1),u.default.sendMessage({uid:a,message:"*\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b ".concat(m),data:{itemId:t}}),u.default.notify({message:"\u0412\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438 ".concat(m)}),u.default.passItemSuccess({}),s.abrupt("return",!0);case 24:if(!i){s.next=29;break}return u.default.giveItem({uid:i.uid,id:t,itemType:c.type,amount:c.amount}),u.default.notify({message:"\u0412\u044b \u043f\u0435\u0440\u0435\u0434\u0430\u043b\u0438 '".concat(c.name,"' \u0438\u0433\u0440\u043e\u043a\u0443 '").concat(i.nickname,"'")}),u.default.passItemSuccess({}),s.abrupt("return");case 29:return u.default.sendMessage({uid:a,message:"*\u0432\u044b\u0431\u0440\u043e\u0441\u0438\u043b ".concat(f),data:{itemId:t,amount:c.amount,type:c.type}}),u.default.notify({message:"\u0412\u044b \u0432\u044b\u0431\u0440\u043e\u0441\u0438\u043b\u0438 ".concat(f)}),u.default.passItemSuccess({}),s.abrupt("return",!0);case 33:return u.default.passItemFail({id:t,uid:a}),console.error("passItem error: id, uid, or item are not defined",e),s.abrupt("return",!1);case 36:case"end":return s.stop()}}),d)}function E(e){var t,a,r,c,o,l,d;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.id,a=e.uid,r=e.amount,c=void 0===r?1:r,o=i.database.ref("characters").child(a).child("inventory"),s.next=4,v({id:t,uid:a});case 4:if(!(l=s.sent)){s.next=16;break}if(!(l.amount-c>=1)){s.next=12;break}return d=Object(n.a)(Object(n.a)({},l),{},{amount:l.amount-c}),s.next=10,o.child("".concat(t,"|").concat(l.time)).set(d);case 10:return u.default.removeItemSuccess({id:t,uid:a}),s.abrupt("return",!0);case 12:return s.next=14,o.child("".concat(t,"|").concat(l.time)).remove();case 14:return u.default.removeItemSuccess({id:t,uid:a}),s.abrupt("return",!0);case 16:return console.error("removeItem error: User '".concat(a,"' doesn't have item '").concat(t,"'")),u.default.notify({message:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u0430 \u043d\u0435\u0442 \u0432 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u0435"}),u.default.removeItemFail({id:t,uid:a,error:"has-no-item"}),s.abrupt("return",!1);case 20:case"end":return s.stop()}}),f)}function v(e){var t,a,n,r,c;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.id,a=e.uid,s.next=3,i.database.ref("characters").child(a).child("inventory").once("value");case 3:if(n=s.sent,!(r=Object.values(n.val()||{})).length){s.next=9;break}if(!(c=r.find((function(e){return e.id===t})))){s.next=9;break}return s.abrupt("return",c);case 9:return s.abrupt("return");case 10:case"end":return s.stop()}}),m)}function S(e){var t,a,n,r,c,o,l,d,f;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.id,a=e.uid,n=e.itemType,r=e.amount,c=void 0===r?1:r,t&&a&&n){s.next=5;break}return console.error("giveItem error. One of the properties are not defined",t,a,n),u.default.giveItemFail({}),s.abrupt("return");case 5:if(o=Date.now(),l={id:t,time:o,type:n,amount:c},"weapon"===n||"wearable"===n){s.next=12;break}return s.next=10,v({id:t,uid:a});case 10:(d=s.sent)&&(l.amount=(d.amount||1)+c,l.time=d.time);case 12:return f="".concat(l.id,"|").concat(l.time),s.next=15,i.database.ref("characters").child(a).child("inventory").child(f).set(l);case 15:return u.default.giveItemSuccess({id:t,uid:a}),s.abrupt("return",!0);case 17:case"end":return s.stop()}}),p)}function O(e){var t,a,n,r,c,i;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.uid,a=e.message,n=a.data,r=n.itemId,c=n.amount,i=n.type,a.data.taken=!0,s.next=5,Object(o.changeMessage)({uid:t,message:a});case 5:if(!s.sent||!i){s.next=14;break}return s.next=9,S({id:r,uid:t,amount:c||1,itemType:i});case 9:if(!s.sent){s.next=14;break}return u.default.sendMessage({uid:t,message:"*\u043f\u043e\u0434\u043e\u0431\u0440\u0430\u043b \u043f\u0440\u0435\u0434\u043c\u0435\u0442"}),u.default.takeItemSuccess({}),s.abrupt("return",!0);case 14:return console.error("takeItem error. Cant take or no item",e),u.default.takeItemFail({}),s.abrupt("return",!1);case 17:case"end":return s.stop()}}),b)}function I(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)([Object(c.c)("GIVE_ITEM",S),Object(c.c)("REMOVE_ITEM",E),Object(c.c)("PASS_ITEM",h),Object(c.c)("TAKE_ITEM",O)]);case 2:case"end":return e.stop()}}),g)}},141:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var n=a(6),r=a.n(n),s=a(2),c=a(27),i=a(10),u=a(5),o=a(8),l=a(29),d=r.a.mark(g),f=r.a.mark(h),m=r.a.mark(E),p=r.a.mark(v),b=[];function g(e){var t,a,n,i,f;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.uid,!(b.indexOf(t)>-1)){r.next=4;break}return console.error("Character already listened",t),r.abrupt("return");case 4:return a=o.database.ref("characters").child(t),n=function(e){var a=e.key;if(a){var n=e.val(),r=Object(c.a)({},a,void 0===n?"":n);u.default.getCharacterSuccess({uid:t,updatedData:r})}},r.next=8,a.once("value");case 8:i=r.sent,f=i.val()||Object(l.getInitialCharacter)(),u.default.getCharacterSuccess({uid:t,updatedData:Object(s.a)(Object(s.a)({},f),{},{uid:t})}),a.on("child_changed",n),a.on("child_added",n),a.on("child_removed",n);case 14:case"end":return r.stop()}}),d)}function h(e){var t,a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.uid,a=e.character,n.next=3,o.database.ref("characters").child(t).set(Object(s.a)(Object(s.a)({},a),{},{uid:t}));case 3:u.default.setCharacterSuccess({});case 4:case"end":return n.stop()}}),f)}function E(e){var t,a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.uid,a=e.notes,n.next=3,o.database.ref("characters").child(t).child("notes").set(a);case 3:u.default.setCharacterNotesSuccess({});case 4:case"end":return n.stop()}}),m)}function v(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.a)([Object(i.c)("GET_CHARACTER",g),Object(i.c)("SET_CHARACTER",h),Object(i.c)("SET_CHARACTER_NOTES",E)]);case 2:case"end":return e.stop()}}),p)}},142:function(e,t,a){"use strict";a.r(t),a.d(t,"register",(function(){return r})),a.d(t,"unregister",(function(){return c}));var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");n?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function c(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},203:function(e,t,a){},204:function(e,t,a){},228:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t),a.d(t,"camelize",(function(){return p})),a.d(t,"colorFromString",(function(){return b})),a.d(t,"isOnline",(function(){return g})),a.d(t,"doubleDigit",(function(){return h})),a.d(t,"getTime",(function(){return E})),a.d(t,"getDate",(function(){return v})),a.d(t,"getFullTime",(function(){return S})),a.d(t,"processMessages",(function(){return O})),a.d(t,"formatMessage",(function(){return I})),a.d(t,"validateMessage",(function(){return j})),a.d(t,"generateID",(function(){return x})),a.d(t,"getFailedItem",(function(){return y})),a.d(t,"getItemName",(function(){return T})),a.d(t,"replaceString",(function(){return _})),a.d(t,"urlRegex",(function(){return k})),a.d(t,"youtubeRegex",(function(){return w})),a.d(t,"imageRegex",(function(){return M})),a.d(t,"isURL",(function(){return C})),a.d(t,"getURLs",(function(){return A})),a.d(t,"processLinks",(function(){return R})),a.d(t,"getUserStatus",(function(){return U})),a.d(t,"getStateUser",(function(){return L})),a.d(t,"processCharacterChanges",(function(){return D})),a.d(t,"getCharacterChanges",(function(){return G})),a.d(t,"arraysEqual",(function(){return P})),a.d(t,"set",(function(){return F})),a.d(t,"redirectToUserPage",(function(){return N}));var n=a(21),r=a(91),s=a(2),c=a(0),i=a.n(c),u=a(107),o=a(186),l=a(56),d=a(111),f=a(133),m=a(29),p=function(e){return e.toLowerCase().replace(/_./g,(function(e){return e.toUpperCase()})).replace(/_/g,"")},b=function(e){if(!e)return"#000";for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);for(var n="#",r=0;r<3;r++){n+=("00"+(t>>8*r&255).toString(16)).substr(-2)}return n},g=function(e){return!!e&&(e||parseInt(localStorage.getItem("lastActivity")||"0"))+18e4>Date.now()},h=function(e){return 1==="".concat(e).length?"0".concat(e):e},E=function(e){var t=new Date(e);return[t.getHours(),t.getMinutes(),t.getSeconds()].map(h).join(":")},v=function(e){var t=new Date(e);return[t.getDate(),t.getMonth()+1,t.getFullYear()].map(h).join(".")},S=function(e){var t=new Date(e);return[[t.getHours(),t.getMinutes(),t.getSeconds()].map(h).join(":"),[t.getDate(),t.getMonth()+1,t.getFullYear()].map(h).join(".")].join(" ")},O=function(e){return e.filter((function(e,t,a){return a.findIndex((function(t){return t.time===e.time}))===t})).sort((function(e,t){return t.time-e.time})).map((function(e,t,a){return t<a.length-2&&e.author===a[t+1].author?Object(s.a)(Object(s.a)({},e),{},{grouped:!0}):e}))},I=function(e){var t=e.body;return l.diceRegex.test(t)&&(e.rolls=Object(l.exportRolls)(t)),t.indexOf("*")>-1&&(e.isRP=!0),/(@[a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A]*)/im.test(t)&&(e.mentioned=!0),e},j=function(e){if(!e)return u.a.error("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u0443\u0441\u0442\u043e\u0435"),!1;if(Object(l.hasDice)(e)){var t=e.match(/(( |^)[a-z\u017F\u0430-\u044F\u1C80-\u1C86\u212A]+[0-9]+[d\u0434\u1C81][0-9]+)|([0-9]+[d\u0434\u1C81][0-9]+[a-z\u017F\u0430-\u044F\u1C80-\u1C86\u212A]+( |$))|([0-9]+[d\u0434\u1C81][0-9]+)/gim);if(t)if(t.some((function(e){if(/(([a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A])[0-9]+[d\u0434\u1C81][0-9]+)|([0-9]+[d\u0434\u1C81][0-9]+([a-z\u017F\u0430-\u044F\u0451\u1C80-\u1C86\u212A]))/gim.test(e))return u.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0434\u0430\u0439\u0441\u0435 ".concat(e,". \u0420\u044f\u0434\u043e\u043c \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")),!0;var t=e.split(/[d\u0434]/),a=Object(r.a)(t,2),n=a[0],s=a[1];return parseInt(n)>10?(u.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0434\u0430\u0439\u0441\u0435 ".concat(e,". \u041d\u0435\u043b\u044c\u0437\u044f \u0431\u0440\u043e\u0441\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 10-\u0442\u0438 \u0434\u0430\u0439\u0441\u043e\u0432")),!0):-1===[2,4,6,8,10,12,20].indexOf(parseInt(s))&&(u.a.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0434\u0430\u0439\u0441\u0435 ".concat(e,". \u041c\u043e\u0436\u043d\u043e \u0431\u0440\u043e\u0441\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u0430\u0439\u0441\u044b \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u0432 4 6 8 10 12 20")),!0)})))return!1}return!0},x=function(){return"_"+Math.random().toString(36).substr(2,9)},y=function(e){return{discriminator:"IItem",id:e,type:"misc",name:"\u041e\u0448\u0438\u0431\u043a\u0430",weight:0,time:0,effect:e,image:"",description:"\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",price:0,capacity:0,armor:0,approved:!0,failed:!0,amount:Number.MAX_VALUE}},T=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"".concat(e?"'".concat(e.name,"'"):"\u043f\u0440\u0435\u0434\u043c\u0435\u0442")+(t&&e.amount&&e.amount>=2?" (".concat(e.amount,"\u0448\u0442)"):"")},_=function(e,t){return e.split(" ").map((function(e,a){return t?t(e,a):" ".concat(e)}))},k=/https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/gim,w=/(^| )https?:\/\/(www\.)?((youtube\.com(\/embed)?\/watch\?v=)|(youtu.be\/))[a-z0-9-_]{11}(\?t=[0-9]+)?(&feature=related)?(&list=[a-z0-9-_]{13})?(&index=[0-9]+)?(&t=[0-9]+)?/gim,M=/(^| )https?:\/\/(.*)\.(gif|jpe?g|tiff|png|webp|bmp)($| )/gim,C=function(e){return k.test(e)},A=function(e){return e.match(k)},R=function(e){var t=A(e);if(t&&t.length>0){var a=_(e,(function(e,a){return t.find((function(t){return t.trim()===e.trim()}))?i.a.createElement(i.a.Fragment,{key:e+a}," ",i.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},e)):" ".concat(e)})),n=e.match(M),r=e.match(w);return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,a),n&&n.map((function(e,t){return i.a.createElement(d.default,{src:e,key:e+t})})),r&&r.map((function(e,t){return i.a.createElement(f.default,{link:e,key:e+t})})))}return null},U=function(e){if(!e)return"offline";var t=e.status,a=e.lastOnline;switch(t){case"online":if(a+18e4>Date.now())return"online";case"afk":if(a+6e5>Date.now())return"afk";default:return"offline"}},L=function(e,t){var a=e.users,n=e.currentUser,r=e.loading,s=e.characters,c=new URLSearchParams(t.match.params).get("uid")||e.uid||localStorage.getItem("uid")||"0",i=a[c],u=s[c];return{loading:r,user:i,uid:c,hasRight:!!i&&!!n&&n.approved&&(n.uid===i.uid||n.isAdmin),currentUser:n,character:u}},D=function(e,t){var a=t.special,r=t.skills,c=t.stats,i=t.gifts;if(!e.bio){var u={};m.special.forEach((function(e){var t=e.field,n=e.label,r=a[t],c=Math.max(0,Math.min(9,r.base+r.change));a[t]=Object(s.a)(Object(s.a)({},r),{},{total:c}),u[n.toLowerCase()]=c})),c.spentSkillPoints=0,m.skills.forEach((function(e){var t=e.field,a=e.getBase,n=r[t],s=i&&i.indexOf(t)>-1,o=Math.max(0,n.change),l=Math.max(0,a?a(u,c):1),d=Math.max(0,Math.min(95,l+(s?2*o+10:o)));r[t]={change:o,base:l,total:d},c.spentSkillPoints+=n.change})),[].concat(Object(n.a)(m.stats),Object(n.a)(m.subStats)).forEach((function(e){var t=e.field,a=e.getBase;if(a)if("armorClass"===t){var n=a(u,c),r=c[t].change;c[t]={change:r,base:n,total:r+n}}else c[t]=Math.floor(a(u,c))}))}return c.maxHealthPoints=Math.min(100,c.maxHealthPoints),{special:a,skills:r,stats:c,gifts:i}},G=function(e,t){var a=Object(o.diff)(t,e),n=Object(o.diff)(e,t),s=[];return Object.entries(a).forEach((function(c){var i=Object(r.a)(c,2),u=i[0],o=i[1];if("bio"!==u||"string"!==typeof o)if("gifts"!==u)"object"===typeof o&&n[u]&&Object.entries(o).forEach((function(e){var t=Object(r.a)(e,2),c=t[0],i=t[1],o=Object(m.getConfigByField)(c);if(o)if("limbs"===u){var l={fine:"\u0426\u0435\u043b\u043e\u0435",crippled:"\u041f\u043e\u0432\u0440\u0435\u0436\u0434\u0435\u043d\u043e"};s.push({label:o.label,full:o.full,before:l[a[u][c]]||"",after:l[n[u][c]]||""})}else s.push({label:o.label,full:o.full,before:i||"",after:n[u][c]||""})}));else{var l=e.gifts||[],d=t.gifts||[];if(!P(l,d)){var f=l.map((function(e){var t=m.skills.find((function(t){return t.field===e}));return t&&t.label})).filter(Boolean),p=d.map((function(e){var t=m.skills.find((function(t){return t.field===e}));return t&&t.label})).filter(Boolean);s.push({label:"Gifted Skills",full:"\u041f\u0440\u0438\u0437\u043e\u0432\u044b\u0435 \u043d\u0430\u0432\u044b\u043a\u0438",before:f.join(", "),after:p.join(", ")})}}else s.push({label:"Bio",full:"\u0411\u0438\u043e\u0433\u0440\u0430\u0444\u0438\u044f",before:o,after:n[u]})})),s},P=function(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0},F=function(e,t,a){for(var n="string"===typeof t?t:t.join("."),r=function e(t){var a,n,r;if("object"!==typeof t||null===t)return t;for(r in a=Array.isArray(t)?[]:{},t)n=t[r],a[r]=e(n);return a}(e),s=r,c=n.split("."),i=c.length,u=0;u<i-1;u++){var o=c[u];s[o]||(s[o]={}),s=s[o]}return s[c[i-1]]=a,r},N=function(e,t,a){e&&e.uid&&t&&t.uid===e.uid&&2===a.location.pathname.split("/").length&&a.push("/".concat(t.uid,"/").concat(a.location.pathname.split("/").pop()))}},276:function(e,t,a){e.exports=a(114)},29:function(e,t,a){"use strict";a.r(t),a.d(t,"initialCharacteristic",(function(){return n})),a.d(t,"defaultLimbs",(function(){return r})),a.d(t,"getInitialCharacter",(function(){return s})),a.d(t,"special",(function(){return c})),a.d(t,"skills",(function(){return i})),a.d(t,"stats",(function(){return u})),a.d(t,"subStats",(function(){return o})),a.d(t,"limb",(function(){return l})),a.d(t,"getConfigByField",(function(){return d}));var n={change:0,base:0,total:0},r={handR:"fine",head:"fine",handL:"fine",torso:"fine",legR:"fine",legL:"fine"},s=function(){return{uid:"",special:{strength:n,perception:n,endurance:n,charisma:n,intelligence:n,agility:n,luck:n},skills:{smallGuns:n,bigGuns:n,energyGuns:n,unarmed:n,meleeWeapons:n,medicine:n,sneak:n,lockpick:n,steal:n,traps:n,science:n,repair:n,speech:n,barter:n,survival:n},stats:{level:0,hpPerLevel:0,exp:0,carryWeight:0,wounds:"",maxHealthPoints:0,healthPoints:0,armorClass:n,healingRate:0,resistance:0,actionPoints:0,sequence:0,meleeDamage:0,criticalChance:0,skillPoints:0,spentSkillPoints:0},gifts:[],limbs:r,bio:"",inventory:{},perks:[],notes:""}},c=[{label:"ST",full:"\u0421\u0438\u043b\u0430",field:"strength"},{label:"PE",full:"\u0412\u043e\u0441\u043f\u0440\u0438\u044f\u0442\u0438\u0435",field:"perception"},{label:"EN",full:"\u0412\u044b\u043d\u043e\u0441\u043b\u0438\u0432\u043e\u0441\u0442\u044c",field:"endurance"},{label:"CH",full:"\u0425\u0430\u0440\u0438\u0437\u043c\u0430",field:"charisma"},{label:"IN",full:"\u0418\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442",field:"intelligence"},{label:"AG",full:"\u041b\u043e\u0432\u043a\u043e\u0441\u0442\u044c",field:"agility"},{label:"LK",full:"\u0423\u0434\u0430\u0447\u0430",field:"luck"}],i=[{label:"Small Guns",full:"\u041e\u0440\u0443\u0436\u0438\u0435",formula:"5+(4*AG)",field:"smallGuns",getBase:function(e){return 5+4*e.ag}},{label:"Big Guns",full:"\u0411\u043e\u043b\u044c\u0448\u043e\u0435 \u043e\u0440\u0443\u0436\u0438\u0435",formula:"(2*AG)",field:"bigGuns",getBase:function(e){return 2*e.ag}},{label:"Energy Guns",full:"\u042d\u043d\u0435\u0440\u0433\u0435\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0440\u0443\u0436\u0438\u0435",formula:"(2*AG)",field:"energyGuns",getBase:function(e){return 2*e.ag}},{label:"Unarmed",full:"\u0411\u0435\u0437 \u043e\u0440\u0443\u0436\u0438\u044f",formula:"(30+(2*(AG+ST)))",field:"unarmed",getBase:function(e){return 30+2*(e.ag+e.st)}},{label:"Melee",full:"\u0425\u043e\u043b\u043e\u0434\u043d\u043e\u0435 \u043e\u0440\u0443\u0436\u0438\u0435",formula:"20+(2*(AG+ST))",field:"meleeWeapons",getBase:function(e){return 20+2*(e.ag+e.st)}},{label:"Medicine",full:"\u041c\u0435\u0434\u0438\u0446\u0438\u043d\u0430",formula:"5+(PE+EN+(3*AG))",field:"medicine",getBase:function(e){return 5+(e.pe+e.en+3*e.ag)}},{label:"Sneak",full:"\u0421\u043a\u0440\u044b\u0442\u043d\u043e\u0441\u0442\u044c",formula:"5+(3*AG)",field:"sneak",getBase:function(e){return 5+3*e.ag}},{label:"Lockpick",full:"\u0412\u0437\u043b\u043e\u043c",formula:"10+(PE+AG)",field:"lockpick",getBase:function(e){return 10+(e.pe+e.ag)}},{label:"Steal",full:"\u041a\u0440\u0430\u0436\u0430",formula:"(3+AG)",field:"steal",getBase:function(e){return 3+e.ag}},{label:"Traps",full:"\u041b\u043e\u0432\u0443\u0448\u043a\u0438",formula:"10+(PE+AG)",field:"traps",getBase:function(e){return 10+(e.pe+e.ag)}},{label:"Science",full:"\u041d\u0430\u0443\u043a\u0430",formula:"(4*IN)",field:"science",getBase:function(e){return 4*e.in}},{label:"Repair",full:"\u0420\u0435\u043c\u043e\u043d\u0442",formula:"(3*IN)",field:"repair",getBase:function(e){return 3*e.in}},{label:"Speech",full:"\u041a\u0440\u0430\u0441\u043d\u043e\u0440\u0435\u0447\u0438\u0435",formula:"(5*CH)",field:"speech",getBase:function(e){return 5*e.ch}},{label:"Barter",full:"\u0411\u0430\u0440\u0442\u0435\u0440",formula:"(4*CH)",field:"barter",getBase:function(e){return 4*e.ch}},{label:"Survival",full:"\u0412\u044b\u0436\u0438\u0432\u0430\u043d\u0438\u0435",formula:"(2*(EN+IN))",field:"survival",getBase:function(e){return 2*(e.en+e.in)}}],u=[{label:"Level",full:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c",field:"level",getBase:function(e,t){return(Math.sqrt(t.exp/500*4+1)+1)/2}},{label:"HP/Level",full:"\u041e\u0417/\u0423\u0440\u043e\u0432\u0435\u043d\u044c",field:"hpPerLevel",getBase:function(e){return 3+Math.floor(e.en/2)}},{label:"Experience",full:"\u041e\u043f\u044b\u0442",field:"exp"},{label:"Next Level",full:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c",field:"nextLevel",getBase:function(e,t){var a=t.level+1;return a*(a-1)/2*1e3}}],o=[{label:"Max HP",full:"\u041c\u0430\u043a\u0441. \u041e\u0447\u043a\u0438 \u0417\u0434\u043e\u0440\u043e\u0432\u044c\u044f (\u041e\u0417)",field:"maxHealthPoints",getBase:function(e,t){return 15+(e.st+2*e.en)+t.hpPerLevel*t.level}},{label:"Health Points",full:"\u041e\u0447\u043a\u0438 \u0417\u0434\u043e\u0440\u043e\u0432\u044c\u044f (\u041e\u0417)",field:"healthPoints"},{label:"\u041a\u0411",full:"\u041a\u043b\u0430\u0441\u0441 \u0411\u0440\u043e\u043d\u0438",field:"armorClass",getBase:function(e){return e.ag}},{label:"\u0421\u041b",full:"\u0421\u0430\u043c\u043e\u041b\u0435\u0447\u0435\u043d\u0438\u0435",field:"healingRate",getBase:function(e){return Math.floor(e.en/3)}},{label:"\u0421\u041f",full:"\u0421\u043e\u041f\u0440\u043e\u0442\u0438\u0432\u043b\u0435\u043d\u0438\u0435",field:"resistance",getBase:function(e){return 5*e.en}},{label:"\u041e\u0414",full:"\u041e\u0447\u043a\u0438 \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0439",field:"actionPoints",getBase:function(e){return 5+Math.ceil(e.ag/2)}},{label:"\u0418\u0426",full:"\u0418\u043d\u0438\u0426\u0438\u0430\u0442\u0438\u0432\u0430",field:"sequence",getBase:function(e){return 2*e.pe}},{label:"\u0420\u0423",full:"\u0420\u0443\u043a\u043e\u043f\u0430\u0448\u043d\u044b\u0439 \u0423\u0440\u043e\u043d",field:"meleeDamage",getBase:function(e){return Math.max(1,e.st-5)}},{label:"\u0428\u041a",full:"\u0428\u0430\u043d\u0441 \u041a\u0440\u0438\u0442\u0430",field:"criticalChance",getBase:function(e){return e.lk}},{label:"\u041e\u041d",full:"\u041e\u0447\u043a\u0438 \u041d\u0430\u0432\u044b\u043a\u043e\u0432",field:"skillPoints",getBase:function(e,t){return Math.floor((t.level-1)*(10+e.in/2)-t.spentSkillPoints)}}],l=[{label:"Head",field:"head",full:"\u0413\u043e\u043b\u043e\u0432\u0430"},{label:"Left Hand",field:"handL",full:"\u041b\u0435\u0432\u0430 \u0440\u0443\u043a\u0430"},{label:"Right Hand",field:"handR",full:"\u041f\u0440\u0430\u0432\u0430\u044f \u0440\u0443\u043a\u0430"},{label:"Torso",field:"torso",full:"\u0422\u043e\u0440\u0441"},{label:"Left Leg",field:"legL",full:"\u041b\u0435\u0432\u0430\u044f \u043d\u043e\u0433\u0430"},{label:"Right Leg",field:"legR",full:"\u041f\u0440\u0430\u0432\u0430\u044f \u043d\u043e\u0433\u0430"}],d=function(e){return[].concat(c,i,u,o,l).find((function(t){return t.field===e}))}},44:function(e,t,a){"use strict";a.r(t),a.d(t,"defaultUser",(function(){return n})),a.d(t,"defaultItem",(function(){return r})),a.d(t,"defaultDeletedItemData",(function(){return s}));var n={lastOnline:0,nickname:"",avatar:"",zoom:100,enableDisabledFeatures:!1,notificationVolume:50,approved:!1,uid:"",isAdmin:!1,notesAreVisible:!1,isSuperAdmin:!1,status:"online",isTyping:!1},r={discriminator:"IItem",id:"",type:"junk",name:"",effect:"",image:"",weight:0,price:0,description:"",capacity:0,approved:!1,armor:0,time:0,amount:0},s={itemId:"",deleted:!1,messagesChecked:0,messagesCleared:0,usersChecked:0,usersCleared:0,done:!1}},441:function(e,t,a){var n={"./":[114,9],"./App":[126,9],"./App.css":[228,7],"./App.tsx":[126,9],"./components/AmountModal":[258,9,3,29],"./components/AmountModal.tsx":[258,9,3,29],"./components/Avatar":[253,9,27],"./components/Avatar.tsx":[253,9,27],"./components/ErrorBoundary":[134,9],"./components/ErrorBoundary.tsx":[134,9],"./components/Help":[270,9,32],"./components/Help.tsx":[270,9,32],"./components/Image":[111,9],"./components/Image.tsx":[111,9],"./components/InputUpload":[259,9,30],"./components/InputUpload.tsx":[259,9,30],"./components/Item":[254,9,20],"./components/Item.tsx":[254,9,20],"./components/ItemById":[257,9,19],"./components/ItemById.tsx":[257,9,19],"./components/Loader":[89,9],"./components/Loader/":[89,9],"./components/Loader/CheckIcon":[136,9],"./components/Loader/CheckIcon.tsx":[136,9],"./components/Loader/LoadIcon":[135,9],"./components/Loader/LoadIcon.tsx":[135,9],"./components/Loader/index":[89,9],"./components/Loader/index.tsx":[89,9],"./components/Login":[131,9],"./components/Login.tsx":[131,9],"./components/Logout":[271,9,31],"./components/Logout.tsx":[271,9,31],"./components/Menu":[127,9],"./components/Menu.tsx":[127,9],"./components/Notebook":[272,9,24],"./components/Notebook.tsx":[272,9,24],"./components/Router":[129,9],"./components/Router.tsx":[129,9],"./components/TypingUsersList":[263,9,33],"./components/TypingUsersList.tsx":[263,9,33],"./components/UserInfo":[255,9,22],"./components/UserInfo.tsx":[255,9,22],"./components/Users":[273,9,17],"./components/Users.tsx":[273,9,17],"./components/UsersList":[260,9,18],"./components/UsersList.tsx":[260,9,18],"./components/YoutubeEmbed":[133,9],"./components/YoutubeEmbed.tsx":[133,9],"./configs/firebase":[94,9],"./configs/firebase.js":[94,9],"./configs/menu":[49,9],"./configs/menu.tsx":[49,9],"./configs/routes":[130,9],"./configs/routes.tsx":[130,9],"./containers/Character":[161,9,1,11],"./containers/Character/":[161,9,1,11],"./containers/Character/config":[29,9],"./containers/Character/config.ts":[29,9],"./containers/Character/index":[161,9,1,11],"./containers/Character/index.tsx":[161,9,1,11],"./containers/Chat":[160,9,0,4,5],"./containers/Chat/":[160,9,0,4,5],"./containers/Chat/Message":[264,9,4,15],"./containers/Chat/Message.tsx":[264,9,4,15],"./containers/Chat/MessageBody":[261,9,4,16],"./containers/Chat/MessageBody.tsx":[261,9,4,16],"./containers/Chat/index":[160,9,0,4,5],"./containers/Chat/index.tsx":[160,9,0,4,5],"./containers/Inventory":[156,9,0,3,2,13,7],"./containers/Inventory/":[156,9,0,3,2,13,7],"./containers/Inventory/index":[156,9,0,3,2,13,7],"./containers/Inventory/index.tsx":[156,9,0,3,2,13,7],"./containers/Items":[157,9,0,1,3,2,6],"./containers/Items/":[157,9,0,1,3,2,6],"./containers/Items/ItemCreator":[265,9,1,25,21],"./containers/Items/ItemCreator.tsx":[265,9,1,25,21],"./containers/Items/index":[157,9,0,1,3,2,6],"./containers/Items/index.tsx":[157,9,0,1,3,2,6],"./containers/ItemsTable":[152,9,2,14],"./containers/ItemsTable/":[152,9,2,14],"./containers/ItemsTable/ItemsList":[262,9,0,23],"./containers/ItemsTable/ItemsList.tsx":[262,9,0,23],"./containers/ItemsTable/index":[152,9,2,14],"./containers/ItemsTable/index.tsx":[152,9,2,14],"./containers/Perks":[162,9,10],"./containers/Perks/":[162,9,10],"./containers/Perks/PerkItem":[256,9,26],"./containers/Perks/PerkItem.tsx":[256,9,26],"./containers/Perks/index":[162,9,10],"./containers/Perks/index.tsx":[162,9,10],"./containers/Settings":[158,9,1,8],"./containers/Settings/":[158,9,1,8],"./containers/Settings/index":[158,9,1,8],"./containers/Settings/index.tsx":[158,9,1,8],"./containers/Status":[159,9,12,9],"./containers/Status/":[159,9,12,9],"./containers/Status/BodyStatus":[266,9,28],"./containers/Status/BodyStatus.tsx":[266,9,28],"./containers/Status/index":[159,9,12,9],"./containers/Status/index.tsx":[159,9,12,9],"./helpers/activity":[110,9],"./helpers/activity.ts":[110,9],"./helpers/dice":[56,9],"./helpers/dice.tsx":[56,9],"./helpers/firebase":[8,9],"./helpers/firebase.tsx":[8,9],"./helpers/store":[72,9],"./helpers/store.tsx":[72,9],"./helpers/utils":[24,9],"./helpers/utils.tsx":[24,9],"./index":[114,9],"./index.css":[203,7],"./index.tsx":[114,9],"./react-app-env.d":[274,7,34],"./react-app-env.d.ts":[274,7,34],"./reducers":[58,9],"./reducers/":[58,9],"./reducers/actions":[5,9],"./reducers/actions.ts":[5,9],"./reducers/index":[58,9],"./reducers/index.ts":[58,9],"./reducers/interfaces":[44,9],"./reducers/interfaces.ts":[44,9],"./sagas":[90,9],"./sagas/":[90,9],"./sagas/auth":[137,9],"./sagas/auth.ts":[137,9],"./sagas/character":[141,9],"./sagas/character.ts":[141,9],"./sagas/index":[90,9],"./sagas/index.ts":[90,9],"./sagas/inventory":[140,9],"./sagas/inventory.ts":[140,9],"./sagas/items":[139,9],"./sagas/items.ts":[139,9],"./sagas/messages":[95,9],"./sagas/messages.ts":[95,9],"./sagas/users":[138,9],"./sagas/users.ts":[138,9],"./serviceWorker":[142,9],"./serviceWorker.ts":[142,9],"./styles/active-users.scss":[467,7,38],"./styles/antd-dark.scss":[229,7],"./styles/body-status.scss":[469,7,39],"./styles/character.scss":[471,7,40],"./styles/chat.scss":[472,7,41],"./styles/colors.scss":[475,7,42],"./styles/components.scss":[230,7],"./styles/item.scss":[464,7,43],"./styles/items.scss":[468,7,44],"./styles/menu.scss":[204,7],"./styles/notebook.scss":[470,7,45],"./styles/perks.scss":[466,7,46],"./styles/settings.scss":[473,7,47],"./styles/status.scss":[474,7,48],"./styles/user-info.scss":[465,7,49]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(2).map(a.e)).then((function(){return a.t(r,t[1])}))}r.keys=function(){return Object.keys(n)},r.id=441,e.exports=r},49:function(e,t,a){"use strict";a.r(t),a.d(t,"characterMenu",(function(){return h})),a.d(t,"userMenu",(function(){return E}));var n=a(0),r=a.n(n),s=a(450),c=a(451),i=a(452),u=a(453),o=a(454),l=a(455),d=a(456),f=a(457),m=a(458),p=a(459),b=a(460),g=[{label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",path:"/users",icon:r.a.createElement(s.a,null)},{label:function(){return"true"===localStorage.getItem("enableDisabledFeatures")?"\u0427\u0430\u0442":"\u041b\u043e\u0433\u0438"},path:"/chat",icon:r.a.createElement(c.a,null)},{label:"\u0412\u044b\u0439\u0442\u0438",path:"/logout",icon:r.a.createElement(i.a,null)}],h=[{label:"\u0421\u0442\u0430\u0442\u0443\u0441",path:"./status",icon:r.a.createElement(u.a,null),disabled:!0},{label:"\u0418\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c",path:"./inventory",icon:r.a.createElement(o.a,null),disabled:!0},{label:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438",path:"./stats",icon:r.a.createElement(l.a,null)},{label:"\u041f\u0435\u0440\u043a\u0438",path:"./perks",icon:r.a.createElement(d.a,null)},{label:"\u0417\u0430\u043f\u0438\u0441\u0438",path:"./notes",icon:r.a.createElement(f.a,null),disabled:!0}],E=[{label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",path:"./settings",icon:r.a.createElement(m.a,null)},{label:"\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u044b",path:"/items",icon:r.a.createElement(p.a,null),disabled:!0},{label:"\u041f\u043e\u043c\u043e\u0449\u044c",path:"/help",icon:r.a.createElement(b.a,null)}];t.default=g},5:function(e,t,a){"use strict";a.r(t);var n=a(27),r=a(2),s=a(72),c=a(24),i=s.default.dispatch,u=function(e){return function(t){return i(Object(r.a)({type:e},t))}},o=function(e){var t,a=Object(c.camelize)(e);return t={},Object(n.a)(t,a,u(e)),Object(n.a)(t,"".concat(a,"Success"),u("".concat(e,"_SUCCESS"))),Object(n.a)(t,"".concat(a,"Fail"),u("".concat(e,"_FAIL"))),t},l=Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},o("LOGIN")),o("REGISTER")),o("RESET_PASSWORD")),o("GET_USER")),o("GET_MESSAGES")),o("GET_MORE_MESSAGES")),o("SET_USER")),o("SEND_MESSAGE")),o("CHANGE_MESSAGE")),o("SUBSCRIBE")),o("UNSUBSCRIBE")),o("UPLOAD_FILE")),o("SET_ITEM")),o("DELETE_ITEM")),o("GET_ITEMS")),o("GET_ITEM_BY_ID")),o("GET_MORE_ITEMS")),o("GIVE_ITEM")),o("REMOVE_ITEM")),o("PASS_ITEM")),o("TAKE_ITEM")),o("NOTIFY")),o("REDIRECT")),o("DELETE_ITEM")),o("SET_USER_STATUS")),o("GET_CHARACTER")),o("SET_CHARACTER")),o("GET_ALL_USERS")),o("FULL_DELETE_USER")),o("SET_CHARACTER_NOTES")),o("REMOVE_MESSAGE")),o("SET_IS_TYPING")),{},{setUnreadMessage:u("SET_UNREAD_MESSAGE"),deleteItemProgress:u("DELETE_ITEM_PROGRESS"),updateLastOnline:u("UPDATE_LAST_ONLINE"),logout:u("LOGOUT"),setError:u("SET_ERROR")});t.default=l},56:function(e,t,a){"use strict";a.r(t),a.d(t,"diceRegex",(function(){return u})),a.d(t,"diceRegexG",(function(){return o})),a.d(t,"getRandomInt",(function(){return l})),a.d(t,"hasDice",(function(){return d})),a.d(t,"rollDice",(function(){return f})),a.d(t,"exportRolls",(function(){return m})),a.d(t,"importRolls",(function(){return p}));var n=a(21),r=a(91),s=a(0),c=a.n(s),i=a(153),u=/([1-9]|10)[d\u0434\u1C81]((10|12|20)|[468])/im,o=/([1-9]|10)[d\u0434\u1C81]((10|12|20)|[468])/gim,l=function(e,t){return Math.floor(Math.random()*(t+1-e)+e)},d=function(e){return/[0-9]+[d\u0434\u1C81][0-9]+/im.test(e)},f=function(e,t){return new Array(e).fill(e+t).map((function(){return l(1,t)}))},m=function(e){var t=e.match(o);return t?t.map((function(e){var t=e.split(/[d\u0434]/),a=Object(r.a)(t,2),n=a[0],s=a[1],c=parseInt(n),i=parseInt(s),u=f(c,i);return{maxResult:i*c,minResult:c,sum:u.reduce((function(e,t){return e+t}),0),roll:e,results:u,amount:c,size:i}})).splice(0,10):[]},p=function(e,t){var a=Object(n.a)(t);return e.split(/[ |\n]/g).map((function(e,t){var n=a.findIndex((function(t){return t.roll===e}));if(n>-1){var r=a.splice(n,1)[0],s=r.results,u=r.maxResult,o=r.minResult,l=r.sum,d=s.length>1?"".concat(l," = ").concat(s.join(" + ")):"".concat(s.join(" + ")),f=(l===u?"critHit":l===o&&"critMiss")||"";return c.a.createElement(c.a.Fragment,{key:e+t}," ",c.a.createElement(i.a,{title:d},c.a.createElement("b",{className:f},e,"(",l,")")))}return" ".concat(e)}))}},58:function(e,t,a){"use strict";a.r(t),a.d(t,"initialState",(function(){return o}));var n=a(27),r=a(21),s=a(2),c=a(24),i=a(44),u=JSON.parse(localStorage.getItem("user")||"null");u&&localStorage.setItem("uid",u.uid);var o={userData:u,isLoggedIn:null!==u,settings:!1,loading:!1,messages:[],users:{},uid:u?u.uid:"",currentUser:null,items:[],deletingItemData:i.defaultDeletedItemData,unreadMessage:!1,characters:{}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"GET_MESSAGES":case"GET_MORE_MESSAGES":case"SEND_MESSAGE":case"SET_USER":case"GET_ITEMS":case"GET_MORE_ITEMS":case"GET_ITEMS_BY_ID":case"CREATE_ITEM":case"GIVE_ITEM":case"REMOVE_ITEM":case"PASS_ITEM":case"REGISTER":case"RESET_PASSWORD":case"SET_CHARACTER_NOTES":case"GET_CHARACTER":case"SET_CHARACTER":case"GET_ALL_USERS":case"REMOVE_MESSAGE":case"UPLOAD_FILE":return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case"SET_USER_SUCCESS":case"GET_CHARACTER_FAIL":case"SET_USER_FAIL":case"GET_MESSAGES_FAIL":case"GET_MORE_MESSAGES_SUCCESS":case"GET_MORE_MESSAGES_FAIL":case"GIVE_ITEM_SUCCESS":case"REMOVE_ITEM_SUCCESS":case"REMOVE_ITEM_FAIL":case"PASS_ITEM_SUCCESS":case"PASS_ITEM_FAIL":case"DELETE_ITEM_FAIL":case"RESET_PASSWORD_FAIL":case"UPLOAD_FILE_SUCCESS":case"UPLOAD_FILE_FAIL":case"RESET_PASSWORD_SUCCESS":case"GET_MORE_ITEMS_FAIL":case"SET_CHARACTER_NOTES_FAIL":case"SET_CHARACTER_NOTES_SUCCESS":case"SEND_MESSAGE_SUCCESS":case"SEND_MESSAGE_FAIL":return Object(s.a)(Object(s.a)({},e),{},{loading:!1});case"LOGIN_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{uid:t.user.uid,userData:t.user,isLoggedIn:null!==t.user,currentUser:Object(s.a)(Object(s.a)({},i.defaultUser),{},{uid:t.user.uid}),loading:!1});case"REGISTER_FAIL":case"LOGIN_FAIL":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,error:t.error});case"LOGOUT":return Object(s.a)(Object(s.a)({},e),{},{userData:null,isLoggedIn:!1});case"GET_MESSAGES_SUCCESS":var a=t.concat?[].concat(Object(r.a)(t.messages),Object(r.a)(e.messages)):t.messages;return Object(s.a)(Object(s.a)({},e),{},{messages:Object(c.processMessages)(a),loading:!1});case"GET_USER_FAIL":case"GET_USER_SUCCESS":var u=t.uid,l=t.user,d=t.updatedData;if(!l&&!d)return e;var f=d?Object(s.a)(Object(s.a)({},e.users[u]),d):l,m=u===e.uid?f:e.currentUser;return localStorage.setItem("notificationVolume",m.notificationVolume),localStorage.setItem("enableDisabledFeatures",m.enableDisabledFeatures),localStorage.setItem("zoom",m.zoom),Object(s.a)(Object(s.a)({},e),{},{currentUser:m,users:Object(s.a)(Object(s.a)({},e.users),{},Object(n.a)({},t.uid,f))});case"GET_ITEMS_SUCCESS":var p={};return[].concat(Object(r.a)(e.items),Object(r.a)(t.items)).forEach((function(e){return p[e.id]=e})),Object(s.a)(Object(s.a)({},e),{},{loading:!1,items:Object.values(p)});case"NOTIFY":return Object(s.a)(Object(s.a)({},e),{},{notify:t.message});case"NOTIFY_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{notify:void 0});case"REDIRECT":return Object(s.a)(Object(s.a)({},e),{},{redirect:t.to});case"REDIRECT_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{redirect:void 0});case"DELETE_ITEM":return Object(s.a)(Object(s.a)({},e),{},{loading:!0,deletingItemData:{itemId:t.id,defaultDeletedItemData:i.defaultDeletedItemData}});case"DELETE_ITEM_PROGRESS":return Object(s.a)(Object(s.a)({},e),{},{deletingItemData:Object(s.a)(Object(s.a)({},e.deletingItemData),{},Object(n.a)({},t.field,t.value))});case"DELETE_ITEM_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,items:e.items.filter((function(e){return e.id!==t.id}))});case"SET_UNREAD_MESSAGE":return Object(s.a)(Object(s.a)({},e),{},{unreadMessage:!!t.unreadMessage});case"GET_ALL_USERS_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,users:t.users});case"GET_CHARACTER_SUCCESS":var b=t.uid,g=t.character,h=t.updatedData,E=h?Object(s.a)(Object(s.a)({},e.characters[b]),h):g;return Object(s.a)(Object(s.a)({},e),{},{loading:!1,characters:Object(s.a)(Object(s.a)({},e.characters),{},Object(n.a)({},t.uid,E))});case"SET_ERROR":return Object(s.a)(Object(s.a)({},e),{},{error:t.error});case"REMOVE_MESSAGE_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{loading:!1,messages:e.messages.filter((function(e){return e.time!==parseInt(t.id)}))});default:return e}}},72:function(e,t,a){"use strict";a.r(t),a.d(t,"sagaMiddleware",(function(){return i}));var n=a(60),r=a(251),s=a(236),c=a(58),i=Object(r.a)(),u=Object(n.createStore)(c.default,c.initialState,Object(s.composeWithDevTools)(Object(n.applyMiddleware)(i)));t.default=u},8:function(e,t,a){"use strict";a.r(t),a.d(t,"auth",(function(){return u})),a.d(t,"database",(function(){return o})),a.d(t,"firebase",(function(){return i})),a.d(t,"messaging",(function(){return l}));var n=a(187),r=a.n(n);a.d(t,"_firebase",(function(){return r.a}));a(442),a(444),a(446);var s=a(94),c=a(5),i=r.a.initializeApp(s.default),u=i.auth();u.languageCode="ru";var o=i.database(),l=i.messaging();u.onAuthStateChanged((function(e){e?(c.default.loginSuccess({user:e}),c.default.getUser({uid:e.uid,currentUser:!0})):c.default.logout({})}))},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(135),c=a(136);t.default=function(e){var t=e.loading;return r.a.createElement("div",{className:"loader"},t?r.a.createElement(s.default,null):r.a.createElement(c.default,null))}},90:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var n=a(6),r=a.n(n),s=a(10),c=a(5),i=a(137),u=a(138),o=a(95),l=a(139),d=a(140),f=a(141),m=r.a.mark(p);function p(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s.a)([Object(i.default)(),Object(u.default)(),Object(o.default)(),Object(l.default)(),Object(d.default)(),Object(f.default)()]);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),c.default.setError({error:e.t0});case 9:case"end":return e.stop()}}),m,null,[[0,5]])}},94:function(e,t,a){"use strict";a.r(t),a.d(t,"publickVapidKey",(function(){return n})),t.default={apiKey:"AIzaSyDbEpYg_R2d1urPBabOHzrKN4rwpJQjC4o",authDomain:"text-roleplay-afae6.firebaseapp.com",databaseURL:"https://text-roleplay-afae6.firebaseio.com",projectId:"text-roleplay-afae6",storageBucket:"text-roleplay-afae6.appspot.com",messagingSenderId:"497277640969",appId:"1:497277640969:web:56bb7d2a6f3463567733d8"};var n="BAyoIImrqrRCYywaalz49AsXoR-e8LlbaN8Aljoc8EKUOlOXkGovTxThpj05thYO7vUV2gTnx6gSiHkX5oWlh5k"},95:function(e,t,a){"use strict";a.r(t),a.d(t,"changeMessage",(function(){return T})),a.d(t,"setUnreadMessage",(function(){return k})),a.d(t,"default",(function(){return C}));var n=a(102),r=a(6),s=a.n(r),c=a(10),i=a(5),u=a(8),o=a(24),l=a(94),d=s.a.mark(E),f=s.a.mark(j),m=s.a.mark(x),p=s.a.mark(T),b=s.a.mark(w),g=s.a.mark(M),h=s.a.mark(C);function E(e){var t,a,n,r,c,l;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.uid,a=e.message,n=e.data,r=void 0===n?{}:n,c=Date.now(),l=Object(o.formatMessage)({time:c,author:t,body:"".concat(a.replace(/\n/g," \n")," "),data:r}),s.prev=3,s.next=6,u.database.ref("messages").child("".concat(c)).set(l);case 6:localStorage.setItem("message",""),i.default.sendMessageSuccess({message:l}),s.next=15;break;case 10:s.prev=10,s.t0=s.catch(3),i.default.sendMessageFail({}),console.error(s.t0),i.default.notify({message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e. \u0414\u043b\u044f \u0434\u0435\u0442\u0430\u043b\u0435\u0439 ctrl + shift + i, \u0432\u043a\u043b\u0430\u0434\u043a\u0430 Console"});case 15:case"end":return s.stop()}}),d,null,[[3,10]])}var v=function(){var e=Object(n.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:if("granted"!==Notification.permission){e.next=11;break}return u.messaging.usePublicVapidKey(l.publickVapidKey),e.next=6,u.messaging.getToken();case 6:return t=e.sent,a=localStorage.getItem("uid"),n=a+"___"+navigator.userAgent.replace(/[.$[\]/]/g,"_"),e.next=11,u.database.ref("tokens").child(n).set(t);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=!1;function O(){if(!S){v(),i.default.getMessages({});var e=function(e){var t=e.val();t&&(i.default.getMessagesSuccess({messages:[t],concat:!0}),!document.hidden&&document.hasFocus()&&"#/chat"===window.location.hash||i.default.setUnreadMessage({unreadMessage:!0}))};S=!0,u.database.ref("messages").orderByKey().startAt("".concat(Date.now()-3e4)).on("child_added",e),u.database.ref("messages").on("child_changed",e),u.database.ref("messages").on("child_removed",(function(e){var t=e.key;t&&i.default.removeMessageSuccess({id:t})}))}}function I(){u.database.ref("messages").off(),S=!1}function j(){var e,t;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.database.ref("messages").orderByKey().limitToLast(100).once("value");case 2:e=a.sent,t=Object.values(e.val()||{}),i.default.getMessagesSuccess({messages:t});case 5:case"end":return a.stop()}}),f)}function x(e){var t,a,n;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.firstMessage,r.next=3,u.database.ref("messages").orderByKey().endAt("".concat(t.time)).limitToLast(30).once("value");case 3:a=r.sent,n=Object.values(a.val()||{}),i.default.getMessagesSuccess({messages:n,concat:!0});case 6:case"end":return r.stop()}}),m)}function y(e){var t=e.file,a=e.onFinish;try{var n=new XMLHttpRequest,r=new FormData;r.append("image",t),n.open("POST","https://api.imgur.com/3/image/"),n.setRequestHeader("Authorization","Client-ID ea2c833b74d4583"),n.onreadystatechange=function(){if(200===n.status&&4===n.readyState){var e=JSON.parse(n.responseText);i.default.uploadFileSuccess({}),a(e.data.link)}},n.send(r)}catch(s){i.default.notify({message:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e! \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"}),console.error(s),i.default.uploadFileFail({error:s})}}function T(e){var t,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.message,a=Object(o.formatMessage)(t),n.next=4,u.database.ref("messages").child("".concat(t.time)).set(a);case 4:return i.default.changeMessageSuccess({message:a}),n.abrupt("return",a);case 6:case"end":return n.stop()}}),p)}var _=!1;function k(e){if(!1!==e.unreadMessage){if("visible"!==document.visibilityState||"#/chat"!==window.location.hash){var t=document.body.querySelector("audio#notification");if(t){var a=parseInt(localStorage.getItem("notificationVolume")||"50");a>0&&(t.volume=a/100,t.play())}}if(!_){_=!0;var n=setInterval((function(){var e=document.head.querySelector("title"),t=document.head.querySelector("link#favicon");e&&t&&(e.innerText="TRP"===e.innerText?"TRP New Message!":"TRP",t.href="TRP"===e.innerText?"./regular.png":"./bright.png",(!_||"visible"===document.visibilityState&&"#/chat"===window.location.hash)&&(clearInterval(n),_=!1,i.default.setUnreadMessage({unreadMessage:!1}),e.innerText="TRP",t.href="regular.png"))}),1e3)}}}function w(e){var t;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,a.next=3,u.database.ref("messages/".concat(t)).remove();case 3:case"end":return a.stop()}}),b)}function M(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e.isTyping||!e.uid){t.next=3;break}return t.next=3,u.database.ref("users/".concat(e.uid,"/isTyping")).set(e.isTyping);case 3:case"end":return t.stop()}}),g)}function C(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)([Object(c.c)("SEND_MESSAGE",E),Object(c.c)("GET_MESSAGES",j),Object(c.c)("GET_MORE_MESSAGES",x),Object(c.c)("SUBSCRIBE",O),Object(c.c)("UNSUBSCRIBE",I),Object(c.c)("UPLOAD_FILE",y),Object(c.c)("CHANGE_MESSAGE",T),Object(c.c)("SET_UNREAD_MESSAGE",k),Object(c.c)("REMOVE_MESSAGE",w),Object(c.c)("SET_IS_TYPING",M)]);case 2:case"end":return e.stop()}}),h)}}},[[276,36,37]]]);
//# sourceMappingURL=main.489d1ca7.chunk.js.map